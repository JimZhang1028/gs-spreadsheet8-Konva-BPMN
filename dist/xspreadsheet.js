!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=65)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(2);e.Factory={addGetterSetter:function(t,e,n,i,r){this.addGetter(t,e,n),this.addSetter(t,e,i,r),this.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,n){var r="get"+i.Util._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var t=this.attrs[e];return void 0===t?n:t}},addSetter:function(t,n,r,o){var a="set"+i.Util._capitalize(n);t.prototype[a]||e.Factory.overWriteSetter(t,n,r,o)},overWriteSetter:function(t,e,n,r){var o="set"+i.Util._capitalize(e);t.prototype[o]=function(t){return n&&null!=t&&(t=n.call(this,t,e)),this._setAttr(e,t),r&&r.call(this),this}},addComponentsGetterSetter:function(t,e,n,o,a){var s,l,c=n.length,u=i.Util._capitalize,h="get"+u(e),p="set"+u(e);t.prototype[h]=function(){var t={};for(s=0;s<c;s++)t[l=n[s]]=this.getAttr(e+u(l));return t};var f=r.getComponentValidator(n);t.prototype[p]=function(t){var n,i=this.attrs[e];for(n in o&&(t=o.call(this,t)),f&&f.call(this,t,e),t)t.hasOwnProperty(n)&&this._setAttr(e+u(n),t[n]);return this._fireChangeEvent(e,i,t),a&&a.call(this),this},this.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter:function(t,e){var n=i.Util._capitalize(e),r="set"+n,o="get"+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter:function(t,e,n,r){i.Util.error("Adding deprecated "+e);var o="get"+i.Util._capitalize(e),a=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[o]=function(){i.Util.error(a);var t=this.attrs[e];return void 0===t?n:t},this.addSetter(t,e,r,(function(){i.Util.error(a)})),this.addOverloadedGetterSetter(t,e)},backCompat:function(t,e){i.Util.each(e,(function(e,n){var r=t.prototype[n],o="get"+i.Util._capitalize(e),a="set"+i.Util._capitalize(e);function s(){r.apply(this,arguments),i.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=s,t.prototype[o]=s,t.prototype[a]=s}))},afterSetFilter:function(){this._filterUpToDate=!1}}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=Math.PI/180;var i=function(t){var e=t.indexOf("msie ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)};e._parseUA=function(t){var e=t.toLowerCase(),n=/(chrome)[ /]([\w.]+)/.exec(e)||/(webkit)[ /]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],r=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),o=!!t.match(/IEMobile/i);return{browser:n[1]||"",version:n[2]||"0",isIE:i(e),mobile:r,ieMobile:o}},e.glob=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"4.0.12",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return e.Konva.angleDeg?t*n:t},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},UA:e._parseUA(e.glob.navigator&&e.glob.navigator.userAgent||""),document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t},_parseUA:e._parseUA},e._NODES_REGISTRY={},e._registerNode=function(t){e._NODES_REGISTRY[t.prototype.getClassName()]=t,e.Konva[t.prototype.getClassName()]=t}}).call(this,n(26))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(3);function o(t){return r.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)?t:r.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(i.Konva.isUnminified)return function(t,e){return r.Util._isNumber(t)||r.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrAutoValidator=function(){if(i.Konva.isUnminified)return function(t,e){return r.Util._isNumber(t)||"auto"===t||r.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(i.Konva.isUnminified)return function(t,e){return r.Util._isString(t)||r.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getFunctionValidator=function(){if(i.Konva.isUnminified)return function(t,e){return r.Util._isFunction(t)||r.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(i.Konva.isUnminified)return function(t,e){return r.Util._isArray(t)?t.forEach((function(t){r.Util._isNumber(t)||r.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):r.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}},e.getBooleanValidator=function(){if(i.Konva.isUnminified)return function(t,e){return!0===t||!1===t||r.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(i.Konva.isUnminified)return function(e,n){return r.Util.isObject(e)||r.Util.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(){function t(){}return t.toCollection=function(e){var n,i=new t,r=e.length;for(n=0;n<r;n++)i.push(e[n]);return i},t._mapMethod=function(e){t.prototype[e]=function(){var t,n=this.length,i=[].slice.call(arguments);for(t=0;t<n;t++)this[t][e].apply(this[t],i);return this}},t.mapMethods=function(e){var n=e.prototype;for(var i in n)t._mapMethod(i)},t}();e.Collection=r,r.prototype=[],r.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},r.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;t<n;t++)e.push(this[t]);return e};var o=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.m=t&&t.slice()||[1,0,0,1,0,0]}return t.prototype.copy=function(){return new t(this.m)},t.prototype.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},t.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},t.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,r=this.m[1]*e+this.m[3]*n,o=this.m[0]*-n+this.m[2]*e,a=this.m[1]*-n+this.m[3]*e;return this.m[0]=i,this.m[1]=r,this.m[2]=o,this.m[3]=a,this},t.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},t.prototype.skew=function(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=o,this},t.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=o,this.m[5]=a,this},t.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,r=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=o,this.m[5]=a,this},t.prototype.getMatrix=function(){return this.m},t.prototype.setAbsolutePosition=function(t,e){var n=this.m[0],i=this.m[1],r=this.m[2],o=this.m[3],a=this.m[4],s=(n*(e-this.m[5])-i*(t-a))/(n*o-i*r),l=(t-a-r*s)/n;return this.translate(l,s)},t}();e.Transform=o;var a=Math.PI/180,s=180/Math.PI,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},c=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,u=[];e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t?0:t>0?1:-1},requestAnimFrame:function(t){u.push(t),1===u.length&&requestAnimationFrame((function(){var t=u;u=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var n,i,r=[],o=t.length,a=e.Util;for(n=0;n<o;n++)i=t[n],a._isNumber(i)?i=Math.round(1e3*i)/1e3:a._isString(i)||(i=i.toString()),r.push(i);return r},_urlToImage:function(t,e){var n=new i.glob.Image;n.onload=function(){e(n)},n.src=t},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in l?{r:(e=l[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=c.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=l[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=(e[0],e.slice(1)),i=Number(n[0])/360,r=Number(n[1])/100,o=Number(n[2])/100,a=void 0,s=void 0,l=void 0;if(0===r)return l=255*o,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};for(var c=2*o-(a=o<.5?o*(1+r):o+r-o*r),u=[0,0,0],h=0;h<3;h++)(s=i+1/3*-(h-1))<0&&s++,s>1&&s--,l=6*s<1?c+6*(a-c)*s:2*s<1?a:3*s<2?c+(a-c)*(2/3-s)*6:c,u[h]=255*l;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*a},_radToDeg:function(t){return t*s},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error("Konva error: "+t)},error:function(t){console.error("Konva error: "+t)},warn:function(t){i.Konva.showWarnings&&console.warn("Konva warning: "+t)},extend:function(t,e){function n(){this.constructor=t}n.prototype=e.prototype;var i=t.prototype;for(var r in t.prototype=new n,i)i.hasOwnProperty(r)&&(t.prototype[r]=i[r]);t.__super__=e.prototype,t.super=e},_getControlPoints:function(t,e,n,i,r,o,a){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),l=Math.sqrt(Math.pow(r-n,2)+Math.pow(o-i,2)),c=a*s/(s+l),u=a*l/(s+l);return[n-c*(r-t),i-c*(o-e),n+u*(r-t),i+u*(o-e)]},_expandPoints:function(t,n){var i,r,o=t.length,a=[];for(i=2;i<o-2;i+=2)r=e.Util._getControlPoints(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],n),a.push(r[0]),a.push(r[1]),a.push(t[i]),a.push(t[i+1]),a.push(r[2]),a.push(r[3]);return a},each:function(t,e){for(var n in t)e(n,t[n])},_inRange:function(t,e,n){return e<=t&&t<n},_getProjectionToSegment:function(t,e,n,i,r,o){var a,s,l,c=(t-n)*(t-n)+(e-i)*(e-i);if(0==c)a=t,s=e,l=(r-n)*(r-n)+(o-i)*(o-i);else{var u=((r-t)*(n-t)+(o-e)*(i-e))/c;u<0?(a=t,s=e,l=(t-r)*(t-r)+(e-o)*(e-o)):u>1?(a=n,s=i,l=(n-r)*(n-r)+(i-o)*(i-o)):l=((a=t+u*(n-t))-r)*(a-r)+((s=e+u*(i-e))-o)*(s-o)}return[a,s,l]},_getProjectionToLine:function(t,n,i){var r=e.Util.cloneObject(t),o=Number.MAX_VALUE;return n.forEach((function(a,s){if(i||s!==n.length-1){var l=n[(s+1)%n.length],c=e.Util._getProjectionToSegment(a.x,a.y,l.x,l.y,t.x,t.y),u=c[0],h=c[1],p=c[2];p<o&&(r.x=u,r.y=h,o=p)}})),r},_prepareArrayForTween:function(t,n,i){var r,o=[],a=[];if(t.length>n.length){var s=n;n=t,t=s}for(r=0;r<t.length;r+=2)o.push({x:t[r],y:t[r+1]});for(r=0;r<n.length;r+=2)a.push({x:n[r],y:n[r+1]});var l=[];return a.forEach((function(t){var n=e.Util._getProjectionToLine(t,o,i);l.push(n.x),l.push(n.y)})),l},_prepareToStringify:function(t){var n;for(var i in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(i)&&t[i]&&"object"==typeof t[i])if(n=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||e.Util._isElement(t[i])){if(!n.configurable)return null;delete t[i]}else if(null===e.Util._prepareToStringify(t[i])){if(!n.configurable)return null;delete t[i]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(0),o=n(10),a=n(1),s=n(11),l=n(2);e.ids={},e.names={};e._removeId=function(t,n){t&&e.ids[t]===n&&delete e.ids[t]},e._addName=function(t,n){n&&(e.names[n]||(e.names[n]=[]),e.names[n].push(t))},e._removeName=function(t,n){if(t){var i=e.names[t];if(i){for(var r=0;r<i.length;r++){i[r]._id===n&&i.splice(r,1)}0===i.length&&delete e.names[t]}}};var c="absoluteOpacity",u="absoluteTransform",h="absoluteScale",p="listening",f="Shape",d="transform",y="visible",m=["id"],v=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),g=["scaleXChange.konva","scaleYChange.konva"].join(" "),b=new i.Collection,_=1,w=function(){function t(t){var e=this;this._id=_++,this.eventListeners={},this.attrs={},this.index=0,this.parent=null,this._cache=new Map,this._lastPos=null,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=b,this._dragEventId=null,this.setAttrs(t),this.on(v,(function(){e._clearCache(d),e._clearSelfAndDescendantCache(u)})),this.on(g,(function(){e._clearSelfAndDescendantCache(h)})),this.on("visibleChange.konva",(function(){e._clearSelfAndDescendantCache(y)})),this.on("listeningChange.konva",(function(){e._clearSelfAndDescendantCache(p)})),this.on("opacityChange.konva",(function(){e._clearSelfAndDescendantCache(c)}))}return t.prototype.hasChildren=function(){return!1},t.prototype.getChildren=function(){return b},t.prototype._clearCache=function(t){t?this._cache.delete(t):this._cache.clear()},t.prototype._getCache=function(t,e){var n=this._cache.get(t);return void 0===n&&(n=e.call(this),this._cache.set(t,n)),n},t.prototype._getCanvasCache=function(){return this._cache.get("canvas")},t.prototype._clearSelfAndDescendantCache=function(t){this._clearCache(t),this._getCanvasCache()||this.children&&this.children.each((function(e){e._clearSelfAndDescendantCache(t)}))},t.prototype.clearCache=function(){return this._cache.delete("canvas"),this._clearSelfAndDescendantCache(),this},t.prototype.cache=function(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=e.width||n.width,a=e.height||n.height,s=e.pixelRatio,l=void 0===e.x?n.x:e.x,u=void 0===e.y?n.y:e.y,p=e.offset||0,f=e.drawBorder||!1;if(r&&a){r+=2*p,a+=2*p,l-=p,u-=p;var d=new o.SceneCanvas({pixelRatio:s,width:r,height:a}),y=new o.SceneCanvas({pixelRatio:s,width:r,height:a}),m=new o.HitCanvas({pixelRatio:1,width:r,height:a}),v=d.getContext(),g=m.getContext();return m.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(d.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),v.save(),g.save(),v.translate(-l,-u),g.translate(-l,-u),this._isUnderCache=!0,this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(h),this.drawScene(d,this,!0),this.drawHit(m,this,!0),this._isUnderCache=!1,v.restore(),g.restore(),f&&(v.save(),v.beginPath(),v.rect(0,0,r,a),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set("canvas",{scene:d,filter:y,hit:m,x:l,y:u}),this}i.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},t.prototype.isCached=function(){return this._cache.has("canvas")},t.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},t.prototype._transformedRect=function(t,e){var n,i,r,o,a=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return a.forEach((function(t){var e=s.point(t);void 0===n&&(n=r=e.x,i=o=e.y),n=Math.min(n,e.x),i=Math.min(i,e.y),r=Math.max(r,e.x),o=Math.max(o,e.y)})),{x:n,y:i,width:r-n,height:o-i}},t.prototype._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),i=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/i,n.height/i),t.restore()},t.prototype._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t._applyGlobalCompositeOperation(this),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0),t.restore()},t.prototype._getCachedSceneCanvas=function(){var t,e,n,r,o=this.filters(),a=this._getCanvasCache(),s=a.scene,l=a.filter,c=l.getContext();if(o){if(!this._filterUpToDate){var u=s.pixelRatio;try{for(t=o.length,c.clear(),c.drawImage(s._canvas,0,0,s.getWidth()/u,s.getHeight()/u),e=c.getImageData(0,0,l.getWidth(),l.getHeight()),n=0;n<t;n++)"function"==typeof(r=o[n])?(r.call(this,e),c.putImageData(e,0,0)):i.Util.error("Filter should be type of function, but got "+typeof r+" insted. Please check correct filters")}catch(t){i.Util.error("Unable to apply filter. "+t.message)}this._filterUpToDate=!0}return l}return s},t.prototype.on=function(t,e){if(3===arguments.length)return this._delegate.apply(this,arguments);var n,i,r,o,a=t.split(" "),s=a.length;for(n=0;n<s;n++)r=(i=a[n].split("."))[0],o=i[1]||"",this.eventListeners[r]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:o,handler:e});return this},t.prototype.off=function(t,e){var n,i,r,o,a,s=(t||"").split(" "),l=s.length;if(!t)for(i in this.eventListeners)this._off(i);for(n=0;n<l;n++)if(o=(r=s[n].split("."))[0],a=r[1],o)this.eventListeners[o]&&this._off(o,a,e);else for(i in this.eventListeners)this._off(i,a,e);return this},t.prototype.dispatchEvent=function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},t.prototype.addEventListener=function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this},t.prototype.removeEventListener=function(t){return this.off(t),this},t.prototype._delegate=function(t,e,n){var r=this;this.on(t,(function(t){for(var o=t.target.findAncestors(e,!0,r),a=0;a<o.length;a++)(t=i.Util.cloneObject(t)).currentTarget=o[a],n.call(o[a],t)}))},t.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),s.DD._dragElements.delete(this._id),this._remove(),this},t.prototype._remove=function(){this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(c);var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},t.prototype.destroy=function(){e._removeId(this.id(),this);for(var t=(this.name()||"").split(/\s/g),n=0;n<t.length;n++){var i=t[n];e._removeName(i,this._id)}return this.remove(),this},t.prototype.getAttr=function(t){var e="get"+i.Util._capitalize(t);return i.Util._isFunction(this[e])?this[e]():this.attrs[t]},t.prototype.getAncestors=function(){for(var t=this.getParent(),e=new i.Collection;t;)e.push(t),t=t.getParent();return e},t.prototype.getAttrs=function(){return this.attrs||{}},t.prototype.setAttrs=function(t){var e,n;if(!t)return this;for(e in t)"children"!==e&&(n="set"+i.Util._capitalize(e),i.Util._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]));return this},t.prototype.isListening=function(){return this._getCache(p,this._isListening)},t.prototype._isListening=function(){var t=this.listening(),e=this.getParent();return"inherit"===t?!e||e.isListening():t},t.prototype.isVisible=function(){return this._getCache(y,this._isVisible)},t.prototype._isVisible=function(t){var e=this.visible(),n=this.getParent();return"inherit"===e?!n||n===t||n._isVisible(t):e},t.prototype.shouldDrawHit=function(){var t=this.getLayer();return!t&&this.isListening()&&this.isVisible()||t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()},t.prototype.show=function(){return this.visible(!0),this},t.prototype.hide=function(){return this.visible(!1),this},t.prototype.getZIndex=function(){return this.index||0},t.prototype.getAbsoluteZIndex=function(){var t,e,n,i,r=this.getDepth(),o=this,a=0;return"Stage"!==o.nodeType&&function s(l){for(t=[],e=l.length,n=0;n<e;n++)i=l[n],a++,i.nodeType!==f&&(t=t.concat(i.getChildren().toArray())),i._id===o._id&&(n=e);t.length>0&&t[0].getDepth()<=r&&s(t)}(o.getStage().getChildren()),a},t.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},t.prototype.setPosition=function(t){return this.x(t.x),this.y(t.y),this},t.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},t.prototype.getAbsolutePosition=function(t){var e=this.getAbsoluteTransform(t).getMatrix(),n=new i.Transform,r=this.offset();return n.m=e.slice(),n.translate(r.x,r.y),n.getTranslation()},t.prototype.setAbsolutePosition=function(t){var e,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,(e=this.getAbsoluteTransform()).invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(n),this},t.prototype._setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache(d),this._clearSelfAndDescendantCache(u)},t.prototype._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(d),this._clearSelfAndDescendantCache(u),t},t.prototype.move=function(t){var e=t.x,n=t.y,i=this.x(),r=this.y();return void 0!==e&&(i+=e),void 0!==n&&(r+=n),this.setPosition({x:i,y:r}),this},t.prototype._eachAncestorReverse=function(t,e){var n,i,r=[],o=this.getParent();if(e&&e._id===this._id)t(this);else{for(r.unshift(this);o&&(!e||o._id!==e._id);)r.unshift(o),o=o.parent;for(n=r.length,i=0;i<n;i++)t(r[i])}},t.prototype.rotate=function(t){return this.rotation(this.rotation()+t),this},t.prototype.moveToTop=function(){if(!this.parent)return i.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},t.prototype.moveUp=function(){if(!this.parent)return i.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveDown=function(){if(!this.parent)return i.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveToBottom=function(){if(!this.parent)return i.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},t.prototype.setZIndex=function(t){if(!this.parent)return i.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&i.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},t.prototype.getAbsoluteOpacity=function(){return this._getCache(c,this._getAbsoluteOpacity)},t.prototype._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},t.prototype.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},t.prototype.toObject=function(){var t,e,n,r,o={},a=this.getAttrs();for(t in o.attrs={},a)e=a[t],i.Util.isObject(e)&&!i.Util._isPlainObject(e)&&!i.Util._isArray(e)||(n="function"==typeof this[t]&&this[t],delete a[t],r=n?n.call(this):null,a[t]=e,r!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),i.Util._prepareToStringify(o)},t.prototype.toJSON=function(){return JSON.stringify(this.toObject())},t.prototype.getParent=function(){return this.parent},t.prototype.findAncestors=function(t,e,n){var i=[];e&&this._isMatch(t)&&i.push(this);for(var r=this.parent;r;){if(r===n)return i;r._isMatch(t)&&i.push(r),r=r.parent}return i},t.prototype.isAncestorOf=function(t){return!1},t.prototype.findAncestor=function(t,e,n){return this.findAncestors(t,e,n)[0]},t.prototype._isMatch=function(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,n,r=t.replace(/ /g,"").split(","),o=r.length;for(e=0;e<o;e++)if(n=r[e],i.Util.isValidSelector(n)||(i.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1},t.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},t.prototype.getStage=function(){return this._getCache("stage",this._getStage)},t.prototype._getStage=function(){var t=this.getParent();return t?t.getStage():void 0},t.prototype.fire=function(t,e,n){return(e=e||{}).target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this},t.prototype.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache(u,this._getAbsoluteTransform)},t.prototype._getAbsoluteTransform=function(t){var e=new i.Transform;return this._eachAncestorReverse((function(t){var n=t.getTransformsEnabled();"all"===n?e.multiply(t.getTransform()):"position"===n&&e.translate(t.getX()-t.getOffsetX(),t.getY()-t.getOffsetY())}),t),e},t.prototype.getAbsoluteScale=function(t){return t?this._getAbsoluteScale(t):this._getCache(h,this._getAbsoluteScale)},t.prototype._getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var n=1,i=1;return this._eachAncestorReverse((function(t){n*=t.scaleX(),i*=t.scaleY()}),t),{x:n,y:i}},t.prototype.getTransform=function(){return this._getCache(d,this._getTransform)},t.prototype._getTransform=function(){var t=new i.Transform,e=this.x(),n=this.y(),r=a.Konva.getAngle(this.rotation()),o=this.scaleX(),s=this.scaleY(),l=this.skewX(),c=this.skewY(),u=this.offsetX(),h=this.offsetY();return 0===e&&0===n||t.translate(e,n),0!==r&&t.rotate(r),0===l&&0===c||t.skew(l,c),1===o&&1===s||t.scale(o,s),0===u&&0===h||t.translate(-1*u,-1*h),t},t.prototype.clone=function(t){var e,n,r,o,a,s=i.Util.cloneObject(this.attrs);for(var l in m){delete s[m[l]]}for(e in t)s[e]=t[e];var c=new this.constructor(s);for(e in this.eventListeners)for(r=(n=this.eventListeners[e]).length,o=0;o<r;o++)(a=n[o]).name.indexOf("konva")<0&&(c.eventListeners[e]||(c.eventListeners[e]=[]),c.eventListeners[e].push(a));return c},t.prototype._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),i=void 0!==t.x?t.x:e.x,r=void 0!==t.y?t.y:e.y,a=t.pixelRatio||1,s=new o.SceneCanvas({width:t.width||e.width||(n?n.width():0),height:t.height||e.height||(n?n.height():0),pixelRatio:a}),l=s.getContext();return l.save(),(i||r)&&l.translate(-1*i,-1*r),this.drawScene(s),l.restore(),s},t.prototype.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},t.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(i),i},t.prototype.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,i.Util._urlToImage(this.toDataURL(t),(function(t){e(t)}))},t.prototype.setSize=function(t){return this.width(t.width),this.height(t.height),this},t.prototype.getSize=function(){return{width:this.width(),height:this.height()}},t.prototype.getClassName=function(){return this.className||this.nodeType},t.prototype.getType=function(){return this.nodeType},t.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance},t.prototype._off=function(t,e,n){var i,r,o,a=this.eventListeners[t];for(i=0;i<a.length;i++)if(r=a[i].name,o=a[i].handler,!("konva"===r&&"konva"!==e||e&&r!==e||n&&n!==o)){if(a.splice(i,1),0===a.length){delete this.eventListeners[t];break}i--}},t.prototype._fireChangeEvent=function(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})},t.prototype.setId=function(t){var n=this.id();return e._removeId(n,this),function(t,n){n&&(e.ids[n]=t)}(this,t),this._setAttr("id",t),this},t.prototype.setName=function(t){var n,i,r=(this.name()||"").split(/\s/g),o=(t||"").split(/\s/g);for(i=0;i<r.length;i++)n=r[i],-1===o.indexOf(n)&&n&&e._removeName(n,this._id);for(i=0;i<o.length;i++)n=o[i],-1===r.indexOf(n)&&n&&e._addName(this,n);return this._setAttr("name",t),this},t.prototype.addName=function(t){if(!this.hasName(t)){var e=this.name(),n=e?e+" "+t:t;this.setName(n)}return this},t.prototype.hasName=function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},t.prototype.removeName=function(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.setName(e.join(" "))),this},t.prototype.setAttr=function(t,e){var n=this["set"+i.Util._capitalize(t)];return i.Util._isFunction(n)?n.call(this,e):this._setAttr(t,e),this},t.prototype._setAttr=function(t,e){var n=this.attrs[t];(n!==e||i.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._fireChangeEvent(t,n,e))},t.prototype._setComponentAttr=function(t,e,n){var i;void 0!==n&&((i=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,i,n))},t.prototype._fireAndBubble=function(t,e,n){if(e&&this.nodeType===f&&(e.target=this),!(("mouseenter"===t||"mouseleave"===t)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(t,e);var i=("mouseenter"===t||"mouseleave"===t)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!i&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n.parent):this._fireAndBubble.call(this.parent,t,e))}},t.prototype._fire=function(t,e){var n,i=this.eventListeners[t];if(i)for((e=e||{}).currentTarget=this,e.type=t,n=0;n<i.length;n++)i[n].handler.call(this,e)},t.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},t.prototype._createDragElement=function(t){var e=t?t.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition(),r=n._getPointerById(e)||n._changedPointerPositions[0]||i;s.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-i.x,y:r.y-i.y},dragStatus:"ready",pointerId:e})},t.prototype.startDrag=function(t){s.DD._dragElements.has(this._id)||this._createDragElement(t),s.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},!0)},t.prototype._setDragPosition=function(t,e){var n=this.getStage()._getPointerById(e.pointerId),i=this.dragBoundFunc();if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y};void 0!==i&&(r=i.call(this,r,t)),this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=r}},t.prototype.stopDrag=function(t){var e=s.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),s.DD._endDragBefore(t),s.DD._endDragAfter(t)},t.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},t.prototype.isDragging=function(){var t=s.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},t.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e=this;if((!(void 0!==t.evt.button)||a.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var n=!1;s.DD._dragElements.forEach((function(t){e.isAncestorOf(t.node)&&(n=!0)})),n||this._createDragElement(t)}}))},t.prototype._dragChange=function(){this.attrs.draggable?this._listenDrag():(this._dragCleanup(),this.getStage()&&s.DD._dragElements.has(this._id)&&this.stopDrag())},t.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},t.create=function(t,e){return i.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)},t._createNode=function(e,n){var r,o,s,l=t.prototype.getClassName.call(e),c=e.children;if(n&&(e.attrs.container=n),a._NODES_REGISTRY[l]||(i.Util.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape"),r=new(0,a._NODES_REGISTRY[l])(e.attrs),c)for(o=c.length,s=0;s<o;s++)r.add(t._createNode(c[s]));return r},t}();e.Node=w,w.prototype.nodeType="Node",w.prototype._attrsAffectingSize=[],r.Factory.addGetterSetter(w,"zIndex"),r.Factory.addGetterSetter(w,"absolutePosition"),r.Factory.addGetterSetter(w,"position"),r.Factory.addGetterSetter(w,"x",0,l.getNumberValidator()),r.Factory.addGetterSetter(w,"y",0,l.getNumberValidator()),r.Factory.addGetterSetter(w,"globalCompositeOperation","source-over",l.getStringValidator()),r.Factory.addGetterSetter(w,"opacity",1,l.getNumberValidator()),r.Factory.addGetterSetter(w,"name","",l.getStringValidator()),r.Factory.addGetterSetter(w,"id","",l.getStringValidator()),r.Factory.addGetterSetter(w,"rotation",0,l.getNumberValidator()),r.Factory.addComponentsGetterSetter(w,"scale",["x","y"]),r.Factory.addGetterSetter(w,"scaleX",1,l.getNumberValidator()),r.Factory.addGetterSetter(w,"scaleY",1,l.getNumberValidator()),r.Factory.addComponentsGetterSetter(w,"skew",["x","y"]),r.Factory.addGetterSetter(w,"skewX",0,l.getNumberValidator()),r.Factory.addGetterSetter(w,"skewY",0,l.getNumberValidator()),r.Factory.addComponentsGetterSetter(w,"offset",["x","y"]),r.Factory.addGetterSetter(w,"offsetX",0,l.getNumberValidator()),r.Factory.addGetterSetter(w,"offsetY",0,l.getNumberValidator()),r.Factory.addGetterSetter(w,"dragDistance",null,l.getNumberValidator()),r.Factory.addGetterSetter(w,"width",0,l.getNumberValidator()),r.Factory.addGetterSetter(w,"height",0,l.getNumberValidator()),r.Factory.addGetterSetter(w,"listening","inherit",(function(t){return!0===t||!1===t||"inherit"===t||i.Util.warn(t+' is a not valid value for "listening" attribute. The value may be true, false or "inherit".'),t})),r.Factory.addGetterSetter(w,"preventDefault",!0,l.getBooleanValidator()),r.Factory.addGetterSetter(w,"filters",null,(function(t){return this._filterUpToDate=!1,t})),r.Factory.addGetterSetter(w,"visible","inherit",(function(t){return!0===t||!1===t||"inherit"===t||i.Util.warn(t+' is a not valid value for "visible" attribute. The value may be true, false or "inherit".'),t})),r.Factory.addGetterSetter(w,"transformsEnabled","all",l.getStringValidator()),r.Factory.addGetterSetter(w,"size"),r.Factory.addGetterSetter(w,"dragBoundFunc"),r.Factory.addGetterSetter(w,"draggable",!1,l.getBooleanValidator()),r.Factory.backCompat(w,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),i.Collection.mapMethods(w)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(3),s=n(0),l=n(4),c=n(2),u=n(1),h=n(15),p="hasShadow",f="shadowRGBA",d="patternImage",y="linearGradient",m="radialGradient";function v(){return o||(o=a.Util.createCanvasElement().getContext("2d"))}function g(){this._clearCache(p)}function b(){this._clearCache(f)}function _(){this._clearCache(d)}function w(){this._clearCache(y)}function x(){this._clearCache(m)}e.shapes={};var S=function(t){function n(n){for(var i,r=t.call(this,n)||this;!(i=a.Util.getRandomColor())||i in e.shapes;);return r.colorKey=i,e.shapes[i]=r,r.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),r.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),r.on("fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",_),r.on("fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",w),r.on("fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",x),r}return r(n,t),n.prototype.getContext=function(){return this.getLayer().getContext()},n.prototype.getCanvas=function(){return this.getLayer().getCanvas()},n.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},n.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},n.prototype.hasShadow=function(){return this._getCache(p,this._hasShadow)},n.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},n.prototype._getFillPattern=function(){return this._getCache(d,this.__getFillPattern)},n.prototype.__getFillPattern=function(){if(this.fillPatternImage())return v().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat")},n.prototype._getLinearGradient=function(){return this._getCache(y,this.__getLinearGradient)},n.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=v(),n=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),r=e.createLinearGradient(n.x,n.y,i.x,i.y),o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}},n.prototype._getRadialGradient=function(){return this._getCache(m,this.__getRadialGradient)},n.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=v(),n=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),r=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}},n.prototype.getShadowRGBA=function(){return this._getCache(f,this._getShadowRGBA)},n.prototype._getShadowRGBA=function(){if(this.hasShadow()){var t=a.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},n.prototype.hasFill=function(){return!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())},n.prototype.hasStroke=function(){return this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())},n.prototype.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0},n.prototype.destroy=function(){return l.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this},n.prototype._useBufferCanvas=function(t){return!(t&&!this.hasShadow()||!this.perfectDrawEnabled()||1===this.getAbsoluteOpacity()||!this.hasFill()||!this.hasStroke()||!this.getStage())},n.prototype.setStrokeHitEnabled=function(t){t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},n.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},n.prototype.getSelfRect=function(){var t=this.size();return{x:this._centroid?Math.round(-t.width/2):0,y:this._centroid?Math.round(-t.height/2):0,width:t.width,height:t.height}},n.prototype.getClientRect=function(t){var e=(t=t||{}).skipTransform,n=t.relativeTo,i=this.getSelfRect(),r=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=i.width+r,a=i.height+r,s=!t.skipShadow&&this.hasShadow(),l=s?this.shadowOffsetX():0,c=s?this.shadowOffsetY():0,u=o+Math.abs(l),h=a+Math.abs(c),p=s&&this.shadowBlur()||0,f=u+2*p,d=h+2*p,y=0;Math.round(r/2)!==r/2&&(y=1);var m={width:f+y,height:d+y,x:-Math.round(r/2+p)+Math.min(l,0)+i.x,y:-Math.round(r/2+p)+Math.min(c,0)+i.y};return e?m:this._transformedRect(m,n)},n.prototype.drawScene=function(t,e,n,i){var r,o,a=this.getLayer(),s=t||a.getCanvas(),l=s.getContext(),c=this._getCanvasCache(),u=this.sceneFunc(),h=this.hasShadow(),p=this.hasStroke();if(!this.isVisible()&&!n)return this;if(c)return l.save(),a._applyTransform(this,l,e),this._drawCachedSceneCanvas(l),l.restore(),this;if(!u)return this;if(l.save(),this._useBufferCanvas(n)&&!i){if((o=(r=this.getStage().bufferCanvas).getContext()).clear(),o.save(),o._applyLineJoin(this),!n)if(a)a._applyTransform(this,o,e);else{var f=this.getAbsoluteTransform(e).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5])}u.call(this,o,this),o.restore();var d=r.pixelRatio;h&&!s.hitCanvas?(l.save(),l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(r._canvas,0,0,r.width/d,r.height/d),l.restore()):(l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(r._canvas,0,0,r.width/d,r.height/d))}else{if(l._applyLineJoin(this),!n)if(a)a._applyTransform(this,l,e);else{var y=this.getAbsoluteTransform(e).getMatrix();l.transform(y[0],y[1],y[2],y[3],y[4],y[5])}h&&p&&!s.hitCanvas?(l.save(),n||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),l._applyShadow(this),u.call(this,l,this),l.restore(),this.hasFill()&&this.shadowForStrokeEnabled()&&u.call(this,l,this)):h&&!s.hitCanvas?(l.save(),n||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),l._applyShadow(this),u.call(this,l,this),l.restore()):(n||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),u.call(this,l,this))}return l.restore(),this},n.prototype.drawHit=function(t,e,n){var i=this.getLayer(),r=t||i.hitCanvas,o=r&&r.getContext(),s=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||(console.log(this),a.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),!this.shouldDrawHit()&&!n)return this;if(c)return o.save(),i._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore(),this;if(!s)return this;if(o.save(),o._applyLineJoin(this),!n)if(i)i._applyTransform(this,o,e);else{var u=this.getAbsoluteTransform(e).getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return s.call(this,o,this),o.restore(),this},n.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,n,i,r,o,s=this._getCanvasCache(),l=this._getCachedSceneCanvas(),c=s.hit,u=c.getContext(),h=c.getWidth(),p=c.getHeight();u.clear(),u.drawImage(l._canvas,0,0,h,p);try{for(i=(n=(e=u.getImageData(0,0,h,p)).data).length,r=a.Util._hexToRgb(this.colorKey),o=0;o<i;o+=4)n[o+3]>t?(n[o]=r.r,n[o+1]=r.g,n[o+2]=r.b,n[o+3]=255):n[o+3]=0;u.putImageData(e,0,0)}catch(t){a.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this},n.prototype.hasPointerCapture=function(t){return h.hasPointerCapture(t,this)},n.prototype.setPointerCapture=function(t){h.setPointerCapture(t,this)},n.prototype.releaseCapture=function(t){h.releaseCapture(t,this)},n}(l.Node);e.Shape=S,S.prototype._fillFunc=function(t){t.fill()},S.prototype._strokeFunc=function(t){t.stroke()},S.prototype._fillFuncHit=function(t){t.fill()},S.prototype._strokeFuncHit=function(t){t.stroke()},S.prototype._centroid=!1,S.prototype.nodeType="Shape",u._registerNode(S),s.Factory.addGetterSetter(S,"stroke",void 0,c.getStringValidator()),s.Factory.addGetterSetter(S,"strokeWidth",2,c.getNumberValidator()),s.Factory.addGetterSetter(S,"hitStrokeWidth","auto",c.getNumberOrAutoValidator()),s.Factory.addGetterSetter(S,"strokeHitEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(S,"perfectDrawEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(S,"shadowForStrokeEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(S,"lineJoin"),s.Factory.addGetterSetter(S,"lineCap"),s.Factory.addGetterSetter(S,"sceneFunc"),s.Factory.addGetterSetter(S,"hitFunc"),s.Factory.addGetterSetter(S,"dash"),s.Factory.addGetterSetter(S,"dashOffset",0,c.getNumberValidator()),s.Factory.addGetterSetter(S,"shadowColor",void 0,c.getStringValidator()),s.Factory.addGetterSetter(S,"shadowBlur",0,c.getNumberValidator()),s.Factory.addGetterSetter(S,"shadowOpacity",1,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(S,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(S,"shadowOffsetX",0,c.getNumberValidator()),s.Factory.addGetterSetter(S,"shadowOffsetY",0,c.getNumberValidator()),s.Factory.addGetterSetter(S,"fillPatternImage"),s.Factory.addGetterSetter(S,"fill",void 0,c.getStringValidator()),s.Factory.addGetterSetter(S,"fillPatternX",0,c.getNumberValidator()),s.Factory.addGetterSetter(S,"fillPatternY",0,c.getNumberValidator()),s.Factory.addGetterSetter(S,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(S,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(S,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(S,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(S,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(S,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(S,"fillEnabled",!0),s.Factory.addGetterSetter(S,"strokeEnabled",!0),s.Factory.addGetterSetter(S,"shadowEnabled",!0),s.Factory.addGetterSetter(S,"dashEnabled",!0),s.Factory.addGetterSetter(S,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(S,"fillPriority","color"),s.Factory.addComponentsGetterSetter(S,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(S,"fillPatternOffsetX",0,c.getNumberValidator()),s.Factory.addGetterSetter(S,"fillPatternOffsetY",0,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(S,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(S,"fillPatternScaleX",1,c.getNumberValidator()),s.Factory.addGetterSetter(S,"fillPatternScaleY",1,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(S,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(S,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(S,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(S,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(S,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(S,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(S,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(S,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(S,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(S,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(S,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(S,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(S,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(S,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(S,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(S,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(S,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(S,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(S,"fillPatternRotation",0),s.Factory.backCompat(S,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),a.Collection.mapMethods(S)},function(t,e,n){var i=n(24).Konva;i._injectGlobal(i),e.default=i,t.exports=e.default},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){t.exports=n(63),t.exports.Collection=n(21)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(4),l=n(11),c=n(2),u=n(1),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new o.Collection,e}return r(e,t),e.prototype.getChildren=function(t){if(!t)return this.children;var e=new o.Collection;return this.children.each((function(n){t(n)&&e.push(n)})),e},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.remove();return this.children=new o.Collection,this},e.prototype.destroyChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.destroy();return this.children=new o.Collection,this},e.prototype.add=function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}if(t.getParent())return t.moveTo(this),this;var n=this.children;return this._validateAdd(t),t.index=n.length,t.parent=this,n.push(t),this._fire("add",{child:t}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),t.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return o.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0},e.prototype._generalFind=function(t,e){var n=[];return this._descendants((function(i){var r=i._isMatch(t);return r&&n.push(i),!(!r||!e)})),o.Collection.toCollection(n)},e.prototype._descendants=function(t){for(var e=0;e<this.children.length;e++){var n=this.children[e];if(t(n))return!0;if(n.hasChildren()&&n._descendants(t))return!0}return!1},e.prototype.toObject=function(){var t=s.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,i=0;i<n;i++){var r=e[i];t.children.push(r.toObject())}return t},e.prototype._getDescendants=function(t){for(var e=[],n=t.length,i=0;i<n;i++){var r=t[i];this.isAncestorOf(r)&&e.push(r)}return e},e.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},e.prototype.clone=function(t){var e=s.Node.prototype.clone.call(this,t);return this.getChildren().each((function(t){e.add(t.clone())})),e},e.prototype.getAllIntersections=function(t){var e=[];return this.find("Shape").each((function(n){n.isVisible()&&n.intersects(t)&&e.push(n)})),e},e.prototype._setChildrenIndices=function(){this.children.each((function(t,e){t.index=e}))},e.prototype.drawScene=function(t,e,n){var i=this.getLayer(),r=t||i&&i.getCanvas(),o=r&&r.getContext(),a=this._getCanvasCache(),s=a&&a.scene;return(this.isVisible()||n)&&(!n&&s?(o.save(),i._applyTransform(this,o,e),this._drawCachedSceneCanvas(o),o.restore()):this._drawChildren(r,"drawScene",e,!1,n,n)),this},e.prototype.drawHit=function(t,e,n){var i=this.getLayer(),r=t||i&&i.hitCanvas,o=r&&r.getContext(),a=this._getCanvasCache(),s=a&&a.hit;return(this.shouldDrawHit(r)||n)&&(!n&&s?(o.save(),i._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore()):this._drawChildren(r,"drawHit",e,!1,n,n)),this},e.prototype._drawChildren=function(t,e,n,i,r,o){var a,s,l=this.getLayer(),c=t&&t.getContext(),u=this.clipWidth(),h=this.clipHeight(),p=this.clipFunc(),f=u&&h||p;if(f&&l){c.save();var d=this.getAbsoluteTransform(n),y=d.getMatrix();c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),c.beginPath(),p?p.call(this,c,this):(a=this.clipX(),s=this.clipY(),c.rect(a,s,u,h)),c.clip(),y=d.copy().invert().getMatrix(),c.transform(y[0],y[1],y[2],y[3],y[4],y[5])}var m="source-over"!==this.globalCompositeOperation()&&!o;m&&l&&(c.save(),c._applyGlobalCompositeOperation(this)),this.children.each((function(o){o[e](t,n,i,r)})),m&&l&&c.restore(),f&&l&&c.restore()},e.prototype.shouldDrawHit=function(t){if(t&&t.isCache)return!0;var e=this.getLayer(),n=!1;l.DD._dragElements.forEach((function(t){"dragging"===t.dragStatus&&t.node.getLayer()===e&&(n=!0)}));var i=!u.Konva.hitOnDragEnabled&&n;return e&&e.hitGraphEnabled()&&this.isVisible()&&!i},e.prototype.getClientRect=function(t){var e,n,i,r,o=(t=t||{}).skipTransform,a=t.relativeTo,s={x:1/0,y:1/0,width:0,height:0},l=this;this.children.each((function(o){if(o.visible()){var a=o.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===a.width&&0===a.height||(void 0===e?(e=a.x,n=a.y,i=a.x+a.width,r=a.y+a.height):(e=Math.min(e,a.x),n=Math.min(n,a.y),i=Math.max(i,a.x+a.width),r=Math.max(r,a.y+a.height)))}}));for(var c=this.find("Shape"),u=!1,h=0;h<c.length;h++){if(c[h]._isVisible(this)){u=!0;break}}return s=u?{x:e,y:n,width:i-e,height:r-n}:{x:0,y:0,width:0,height:0},o?s:this._transformedRect(s,a)},e}(s.Node);e.Container=h,a.Factory.addComponentsGetterSetter(h,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(h,"clipX",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clipY",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clipWidth",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clipHeight",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clipFunc"),o.Collection.mapMethods(h)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(3),s=n(14),l=n(1),c=n(0),u=n(2);var h=function(){function t(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||l.Konva.pixelRatio||function(){if(o)return o;var t=a.Util.createCanvasElement().getContext("2d");return o=(l.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return t.prototype.getContext=function(){return this.context},t.prototype.getPixelRatio=function(){return this.pixelRatio},t.prototype.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},t.prototype.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.setSize=function(t,e){this.setWidth(t),this.setHeight(e)},t.prototype.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return a.Util.error("Unable to get data URL. "+t.message),""}}},t}();e.Canvas=h,c.Factory.addGetterSetter(h,"pixelRatio",void 0,u.getNumberValidator());var p=function(t){function e(e){void 0===e&&(e={width:0,height:0});var n=t.call(this,e)||this;return n.context=new s.SceneContext(n),n.setSize(e.width,e.height),n}return r(e,t),e}(h);e.SceneCanvas=p;var f=function(t){function e(e){void 0===e&&(e={width:0,height:0});var n=t.call(this,e)||this;return n.hitCanvas=!0,n.context=new s.HitContext(n),n.setSize(e.width,e.height),n}return r(e,t),e}(h);e.HitCanvas=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(3);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach((function(e){"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach((function(e){t=e.node})),t},_dragElements:new Map,_drag:function(t){e.DD._dragElements.forEach((function(e,n){var i=e.node,o=i.getStage();o.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=r.Util._getFirstPointerId(t));var a=o._changedPointerPositions.find((function(t){return t.id===e.pointerId}));if(a){if("dragging"!==e.dragStatus){var s=i.dragDistance();if(Math.max(Math.abs(a.x-e.startPointerPos.x),Math.abs(a.y-e.startPointerPos.y))<s)return;if(i.startDrag({evt:t}),!i.isDragging())return}i._setDragPosition(t,e),i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)}}))},_endDragBefore:function(t){e.DD._dragElements.forEach((function(n,r){var o=n.node.getStage();if(t&&o.setPointersPositions(t),o._changedPointerPositions.find((function(t){return t.id===n.pointerId}))){"dragging"===n.dragStatus&&(e.DD.justDragged=!0,i.Konva.listenClickTap=!1,n.dragStatus="stopped");var a=n.node.getLayer()||n.node instanceof i.Konva.Stage&&n.node;a&&a.draw()}}))},_endDragAfter:function(t){e.DD._dragElements.forEach((function(n,i){"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:t},!0),"dragging"!==n.dragStatus&&e.DD._dragElements.delete(i)}))}},i.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(9),s=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to groups.")},e}(a.Container);e.Group=l,l.prototype.nodeType="Group",s._registerNode(l),o.Collection.mapMethods(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return(new Date).getTime()},o=function(){function t(e,n){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=e,this.setLayers(n)}return t.prototype.setLayers=function(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this},t.prototype.getLayers=function(){return this.layers},t.prototype.addLayer=function(t){var e,n=this.layers,i=n.length;for(e=0;e<i;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0},t.prototype.isRunning=function(){var e,n=t.animations,i=n.length;for(e=0;e<i;e++)if(n[e].id===this.id)return!0;return!1},t.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),t._addAnimation(this),this},t.prototype.stop=function(){return t._removeAnimation(this),this},t.prototype._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},t._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t._removeAnimation=function(t){var e,n=t.id,i=this.animations,r=i.length;for(e=0;e<r;e++)if(i[e].id===n){this.animations.splice(e,1);break}},t._runFrames=function(){var t,e,n,i,o,a,s,l,c={},u=this.animations;for(i=0;i<u.length;i++)if(e=(t=u[i]).layers,n=t.func,t._updateFrameObject(r()),a=e.length,!n||!1!==n.call(t,t.frame))for(o=0;o<a;o++)void 0!==(s=e[o])._id&&(c[s._id]=s);for(l in c)c.hasOwnProperty(l)&&c[l].draw()},t._animationLoop=function(){var e=t;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},t._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},t.animations=[],t.animIdCounter=0,t.animRunning=!1,t}();e.Animation=o},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(1),s=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],l=function(){function t(t){this.canvas=t,this._context=t._canvas.getContext("2d"),a.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return t.prototype.fillShape=function(t){t.getFillEnabled()&&this._fill(t)},t.prototype._fill=function(t){},t.prototype.strokeShape=function(t){t.getStrokeEnabled()&&this._stroke(t)},t.prototype._stroke=function(t){},t.prototype.fillStrokeShape=function(t){t.getFillEnabled()&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},t.prototype.getTrace=function(t){var e,n,i,r,a=this.traceArr,s=a.length,l="";for(e=0;e<s;e++)(i=(n=a[e]).method)?(r=n.args,l+=i,t?l+="()":o.Util._isArray(r[0])?l+="(["+r.join(",")+"])":l+="("+r.join(",")+")"):(l+=n.property,t||(l+="="+n.val)),l+=";";return l},t.prototype.clearTrace=function(){this.traceArr=[]},t.prototype._trace=function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()},t.prototype.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},t.prototype._applyLineCap=function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},t.prototype._applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},t.prototype._applyLineJoin=function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},t.prototype.setAttr=function(t,e){this._context[t]=e},t.prototype.arc=function(t,e,n,i,r,o){this._context.arc(t,e,n,i,r,o)},t.prototype.arcTo=function(t,e,n,i,r){this._context.arcTo(t,e,n,i,r)},t.prototype.beginPath=function(){this._context.beginPath()},t.prototype.bezierCurveTo=function(t,e,n,i,r,o){this._context.bezierCurveTo(t,e,n,i,r,o)},t.prototype.clearRect=function(t,e,n,i){this._context.clearRect(t,e,n,i)},t.prototype.clip=function(){this._context.clip()},t.prototype.closePath=function(){this._context.closePath()},t.prototype.createImageData=function(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0},t.prototype.createLinearGradient=function(t,e,n,i){return this._context.createLinearGradient(t,e,n,i)},t.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,n,i,r,o){return this._context.createRadialGradient(t,e,n,i,r,o)},t.prototype.drawImage=function(t,e,n,i,r,o,a,s,l){var c=arguments,u=this._context;3===c.length?u.drawImage(t,e,n):5===c.length?u.drawImage(t,e,n,i,r):9===c.length&&u.drawImage(t,e,n,i,r,o,a,s,l)},t.prototype.ellipse=function(t,e,n,i,r,o,a,s){this._context.ellipse(t,e,n,i,r,o,a,s)},t.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},t.prototype.fill=function(){this._context.fill()},t.prototype.fillRect=function(t,e,n,i){this._context.fillRect(t,e,n,i)},t.prototype.strokeRect=function(t,e,n,i){this._context.strokeRect(t,e,n,i)},t.prototype.fillText=function(t,e,n){this._context.fillText(t,e,n)},t.prototype.measureText=function(t){return this._context.measureText(t)},t.prototype.getImageData=function(t,e,n,i){return this._context.getImageData(t,e,n,i)},t.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},t.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},t.prototype.rect=function(t,e,n,i){this._context.rect(t,e,n,i)},t.prototype.putImageData=function(t,e,n){this._context.putImageData(t,e,n)},t.prototype.quadraticCurveTo=function(t,e,n,i){this._context.quadraticCurveTo(t,e,n,i)},t.prototype.restore=function(){this._context.restore()},t.prototype.rotate=function(t){this._context.rotate(t)},t.prototype.save=function(){this._context.save()},t.prototype.scale=function(t,e){this._context.scale(t,e)},t.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},t.prototype.getLineDash=function(){return this._context.getLineDash()},t.prototype.setTransform=function(t,e,n,i,r,o){this._context.setTransform(t,e,n,i,r,o)},t.prototype.stroke=function(){this._context.stroke()},t.prototype.strokeText=function(t,e,n,i){this._context.strokeText(t,e,n,i)},t.prototype.transform=function(t,e,n,i,r,o){this._context.transform(t,e,n,i,r,o)},t.prototype.translate=function(t,e){this._context.translate(t,e)},t.prototype._enableTrace=function(){var t,e,n=this,i=s.length,r=o.Util._simplifyArray,a=this.setAttr,l=function(t){var i,o=n[t];n[t]=function(){return e=r(Array.prototype.slice.call(arguments,0)),i=o.apply(n,arguments),n._trace({method:t,args:e}),i}};for(t=0;t<i;t++)l(s[t]);n.setAttr=function(){a.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}},t.prototype._applyGlobalCompositeOperation=function(t){var e=t.getGlobalCompositeOperation();"source-over"!==e&&this.setAttr("globalCompositeOperation",e)},t}();e.Context=l,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(l.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}));var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},e.prototype._fillPattern=function(t){var e=t.getFillPatternX(),n=t.getFillPatternY(),i=a.Konva.getAngle(t.getFillPatternRotation()),r=t.getFillPatternOffsetX(),o=t.getFillPatternOffsetY(),s=t.getFillPatternScaleX(),l=t.getFillPatternScaleY();(e||n)&&this.translate(e||0,n||0),i&&this.rotate(i),(s||l)&&this.scale(s,l),(r||o)&&this.translate(-1*r,-1*o),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fill=function(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var i=t.getFillPatternImage();if(i&&"pattern"===n)this._fillPattern(t);else{var r=t.getFillLinearGradientColorStops();if(r&&"linear-gradient"===n)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):r?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}},e.prototype._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i){for(var o=0;o<i.length;o+=2)r.addColorStop(i[o],i[o+1]);this.setAttr("strokeStyle",r)}},e.prototype._stroke=function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}},e.prototype._applyShadow=function(t){var e=o.Util,n=e.get(t.getShadowRGBA(),"black"),i=e.get(t.getShadowBlur(),5),r=e.get(t.getShadowOffset(),{x:0,y:0}),a=t.getAbsoluteScale(),s=this.canvas.getPixelRatio(),l=a.x*s,c=a.y*s;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",i*Math.min(Math.abs(l),Math.abs(c))),this.setAttr("shadowOffsetX",r.x*l),this.setAttr("shadowOffsetY",r.y*c)},e}(l);e.SceneContext=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype._stroke=function(t){if(t.hasStroke()&&t.hitStrokeWidth()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var i=t.hitStrokeWidth(),r="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}},e}(l);e.HitContext=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=new Map,o=void 0!==i.Konva._global.PointerEvent;function a(t){return{evt:t,pointerId:t.pointerId}}function s(t,e){var n=r.get(t);if(n){var i=n.getStage();i&&i.content,r.delete(t),o&&n._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}}e.getCapturedShape=function(t){return r.get(t)},e.createEvent=a,e.hasPointerCapture=function(t,e){return r.get(t)===e},e.setPointerCapture=function(t,e){s(t),e.getStage()&&(r.set(t,e),o&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))},e.releaseCapture=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(9),s=n(4),l=n(0),c=n(10),u=function(t){function e(e){var n=t.call(this,e)||this;return n.canvas=new c.SceneCanvas,n._waitingForDraw=!1,n.on("visibleChange",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange",n._checkSmooth),n._checkSmooth(),n}return r(e,t),e.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this},e.prototype.setZIndex=function(e){t.prototype.setZIndex.call(this,e);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),e<n.getChildren().length-1?n.content.insertBefore(this.getCanvas()._canvas,n.getChildren()[e+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){s.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){if(!s.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!!t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas),!0)},e.prototype.moveDown=function(){if(s.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(s.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.hitGraphEnabled=function(){return!0},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return s.Node.prototype.remove.call(this),t&&t.parentNode&&o.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var e=t.width,n=t.height;return this.canvas.setSize(e,n),this},e.prototype._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),s.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},e.prototype._checkSmooth=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.getIntersection=function(t,e){return null},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this},e.prototype._applyTransform=function(t,e,n){var i=t.getAbsoluteTransform(n).getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},e}(a.Container);e.BaseLayer=u,u.prototype.nodeType="BaseLayer",l.Factory.addGetterSetter(u,"imageSmoothingEnabled",!0),l.Factory.addGetterSetter(u,"clearBeforeDraw",!0),o.Collection.mapMethods(u)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(2),c=n(1),u=function(t){function e(e){var n=t.call(this,e)||this;return n.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),n}return r(e,t),e.prototype._sceneFunc=function(t){var e,n,i,r=this.points(),o=r.length,a=this.tension(),s=this.closed(),l=this.bezier();if(o){if(t.beginPath(),t.moveTo(r[0],r[1]),0!==a&&o>4){for(n=(e=this.getTensionPoints()).length,i=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i<n-2;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);s||t.quadraticCurveTo(e[n-2],e[n-1],r[o-2],r[o-1])}else if(l)for(i=2;i<o;)t.bezierCurveTo(r[i++],r[i++],r[i++],r[i++],r[i++],r[i++]);else for(i=2;i<o;i+=2)t.lineTo(r[i],r[i+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():o.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),e=t.length,n=this.tension(),i=o.Util._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),r=o.Util._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),a=o.Util._expandPoints(t,n);return[i[2],i[3]].concat(a).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],i[0],i[1],t[0],t[1]])},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){for(var t,e,n,i=(t=0!==this.tension()?this._getTensionPoints():this.points())[0],r=t[0],o=t[1],a=t[1],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],i=Math.min(i,e),r=Math.max(r,e),o=Math.min(o,n),a=Math.max(a,n);return{x:Math.round(i),y:Math.round(o),width:Math.round(r-i),height:Math.round(a-o)}},e}(s.Shape);e.Line=u,u.prototype.className="Line",u.prototype._attrsAffectingSize=["points","bezier","tension"],c._registerNode(u),a.Factory.addGetterSetter(u,"closed",!1),a.Factory.addGetterSetter(u,"bezier",!1),a.Factory.addGetterSetter(u,"tension",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"points",[],l.getNumberArrayValidator()),o.Collection.mapMethods(u)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(1),c=function(t){function e(n){var i=t.call(this,n)||this;i.dataArray=[],i.pathLength=0,i.dataArray=e.parsePathData(i.data()),i.pathLength=0;for(var r=0;r<i.dataArray.length;++r)i.pathLength+=i.dataArray[r].pathLength;return i.on("dataChange.konva",(function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})),i}return r(e,t),e.prototype._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var n=0;n<e.length;n++){var i=e[n].command,r=e[n].points;switch(i){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var o=r[0],a=r[1],s=r[2],l=r[3],c=r[4],u=r[5],h=r[6],p=r[7],f=s>l?s:l,d=s>l?1:s/l,y=s>l?l/s:1;t.translate(o,a),t.rotate(h),t.scale(d,y),t.arc(0,0,f,c,c+u,1-p),t.scale(1/d,1/y),t.rotate(-h),t.translate(-o,-a);break;case"z":t.closePath()}}t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach((function(e){t=t.concat(e.points)}));for(var e,n,i=t[0],r=t[0],o=t[1],a=t[1],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],isNaN(e)||(i=Math.min(i,e),r=Math.max(r,e)),isNaN(n)||(o=Math.min(o,n),a=Math.max(a,n));return{x:Math.round(i),y:Math.round(o),width:Math.round(r-i),height:Math.round(a-o)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var n,i=0,r=this.dataArray.length;if(!r)return null;for(;i<r&&t>this.dataArray[i].pathLength;)t-=this.dataArray[i].pathLength,++i;if(i===r)return{x:(n=this.dataArray[i-1].points.slice(-2))[0],y:n[1]};if(t<.01)return{x:(n=this.dataArray[i].points.slice(0,2))[0],y:n[1]};var o=this.dataArray[i],a=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var s=a[0],l=a[1],c=a[2],u=a[3],h=a[4],p=a[5],f=a[6];return h+=p*t/o.pathLength,e.getPointOnEllipticalArc(s,l,c,u,h,f)}return null},e.getLineLength=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},e.getPointOnLine=function(t,e,n,i,r,o,a){void 0===o&&(o=e),void 0===a&&(a=n);var s=(r-n)/(i-e+1e-8),l=Math.sqrt(t*t/(1+s*s));i<e&&(l*=-1);var c,u=s*l;if(i===e)c={x:o,y:a+u};else if((a-n)/(o-e+1e-8)===s)c={x:o+l,y:a+u};else{var h,p,f=this.getLineLength(e,n,i,r);if(f<1e-8)return;var d=(o-e)*(i-e)+(a-n)*(r-n);h=e+(d/=f*f)*(i-e),p=n+d*(r-n);var y=this.getLineLength(o,a,h,p),m=Math.sqrt(t*t-y*y);l=Math.sqrt(m*m/(1+s*s)),i<e&&(l*=-1),c={x:h+l,y:p+(u=s*l)}}return c},e.getPointOnCubicBezier=function(t,e,n,i,r,o,a,s,l){function c(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function p(t){return(1-t)*(1-t)*(1-t)}return{x:s*c(t)+o*u(t)+i*h(t)+e*p(t),y:l*c(t)+a*u(t)+r*h(t)+n*p(t)}},e.getPointOnQuadraticBezier=function(t,e,n,i,r,o,a){function s(t){return t*t}function l(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}return{x:o*s(t)+i*l(t)+e*c(t),y:a*s(t)+r*l(t)+n*c(t)}},e.getPointOnEllipticalArc=function(t,e,n,i,r,o){var a=Math.cos(o),s=Math.sin(o),l=n*Math.cos(r),c=i*Math.sin(r);return{x:t+(l*a-c*s),y:e+(l*s+c*a)}},e.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);var r,o=e.split("|"),a=[],s=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<o.length;i++){var h=o[i],p=h.charAt(0);for(h=h.slice(1),s.length=0;r=u.exec(h);)s.push(r[0]);for(var f=[],d=0,y=s.length;d<y;d++){var m=parseFloat(s[d]);isNaN(m)?f.push(0):f.push(m)}for(;f.length>0&&!isNaN(f[0]);){var v,g,b,_,w,x,S,k,C,E,O=null,P=[],A=l,T=c;switch(p){case"l":l+=f.shift(),c+=f.shift(),O="L",P.push(l,c);break;case"L":l=f.shift(),c=f.shift(),P.push(l,c);break;case"m":var M=f.shift(),j=f.shift();if(l+=M,c+=j,O="M",a.length>2&&"z"===a[a.length-1].command)for(var R=a.length-2;R>=0;R--)if("M"===a[R].command){l=a[R].points[0]+M,c=a[R].points[1]+j;break}P.push(l,c),p="l";break;case"M":l=f.shift(),c=f.shift(),O="M",P.push(l,c),p="L";break;case"h":l+=f.shift(),O="L",P.push(l,c);break;case"H":l=f.shift(),O="L",P.push(l,c);break;case"v":c+=f.shift(),O="L",P.push(l,c);break;case"V":c=f.shift(),O="L",P.push(l,c);break;case"C":P.push(f.shift(),f.shift(),f.shift(),f.shift()),l=f.shift(),c=f.shift(),P.push(l,c);break;case"c":P.push(l+f.shift(),c+f.shift(),l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),O="C",P.push(l,c);break;case"S":g=l,b=c,"C"===(v=a[a.length-1]).command&&(g=l+(l-v.points[2]),b=c+(c-v.points[3])),P.push(g,b,f.shift(),f.shift()),l=f.shift(),c=f.shift(),O="C",P.push(l,c);break;case"s":g=l,b=c,"C"===(v=a[a.length-1]).command&&(g=l+(l-v.points[2]),b=c+(c-v.points[3])),P.push(g,b,l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),O="C",P.push(l,c);break;case"Q":P.push(f.shift(),f.shift()),l=f.shift(),c=f.shift(),P.push(l,c);break;case"q":P.push(l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),O="Q",P.push(l,c);break;case"T":g=l,b=c,"Q"===(v=a[a.length-1]).command&&(g=l+(l-v.points[0]),b=c+(c-v.points[1])),l=f.shift(),c=f.shift(),O="Q",P.push(g,b,l,c);break;case"t":g=l,b=c,"Q"===(v=a[a.length-1]).command&&(g=l+(l-v.points[0]),b=c+(c-v.points[1])),l+=f.shift(),c+=f.shift(),O="Q",P.push(g,b,l,c);break;case"A":_=f.shift(),w=f.shift(),x=f.shift(),S=f.shift(),k=f.shift(),C=l,E=c,l=f.shift(),c=f.shift(),O="A",P=this.convertEndpointToCenterParameterization(C,E,l,c,S,k,_,w,x);break;case"a":_=f.shift(),w=f.shift(),x=f.shift(),S=f.shift(),k=f.shift(),C=l,E=c,l+=f.shift(),c+=f.shift(),O="A",P=this.convertEndpointToCenterParameterization(C,E,l,c,S,k,_,w,x)}a.push({command:O||p,points:P,start:{x:A,y:T},pathLength:this.calcLength(A,T,O||p,P)})}"z"!==p&&"Z"!==p||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},e.calcLength=function(t,n,i,r){var o,a,s,l,c=e;switch(i){case"L":return c.getLineLength(t,n,r[0],r[1]);case"C":for(o=0,a=c.getPointOnCubicBezier(0,t,n,r[0],r[1],r[2],r[3],r[4],r[5]),l=.01;l<=1;l+=.01)s=c.getPointOnCubicBezier(l,t,n,r[0],r[1],r[2],r[3],r[4],r[5]),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return o;case"Q":for(o=0,a=c.getPointOnQuadraticBezier(0,t,n,r[0],r[1],r[2],r[3]),l=.01;l<=1;l+=.01)s=c.getPointOnQuadraticBezier(l,t,n,r[0],r[1],r[2],r[3]),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return o;case"A":o=0;var u=r[4],h=r[5],p=r[4]+h,f=Math.PI/180;if(Math.abs(u-p)<f&&(f=Math.abs(u-p)),a=c.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),h<0)for(l=u-f;l>p;l-=f)s=c.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;else for(l=u+f;l<p;l+=f)s=c.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return s=c.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],p,0),o+=c.getLineLength(a.x,a.y,s.x,s.y)}return 0},e.convertEndpointToCenterParameterization=function(t,e,n,i,r,o,a,s,l){var c=l*(Math.PI/180),u=Math.cos(c)*(t-n)/2+Math.sin(c)*(e-i)/2,h=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(e-i)/2,p=u*u/(a*a)+h*h/(s*s);p>1&&(a*=Math.sqrt(p),s*=Math.sqrt(p));var f=Math.sqrt((a*a*(s*s)-a*a*(h*h)-s*s*(u*u))/(a*a*(h*h)+s*s*(u*u)));r===o&&(f*=-1),isNaN(f)&&(f=0);var d=f*a*h/s,y=f*-s*u/a,m=(t+n)/2+Math.cos(c)*d-Math.sin(c)*y,v=(e+i)/2+Math.sin(c)*d+Math.cos(c)*y,g=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},w=_([1,0],[(u-d)/a,(h-y)/s]),x=[(u-d)/a,(h-y)/s],S=[(-1*u-d)/a,(-1*h-y)/s],k=_(x,S);return b(x,S)<=-1&&(k=Math.PI),b(x,S)>=1&&(k=0),0===o&&k>0&&(k-=2*Math.PI),1===o&&k<0&&(k+=2*Math.PI),[m,v,a,s,w,k,c,o]},e}(s.Shape);e.Path=c,c.prototype.className="Path",c.prototype._attrsAffectingSize=["data"],l._registerNode(c),a.Factory.addGetterSetter(c,"data"),o.Collection.mapMethods(c)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(1),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){var e=this.cornerRadius(),n=this.width(),i=this.height();if(t.beginPath(),e){var r=0,o=0,a=0,s=0;"number"==typeof e?r=o=a=s=Math.min(e,n/2,i/2):(r=Math.min(e[0],n/2,i/2),o=Math.min(e[1],n/2,i/2),s=Math.min(e[2],n/2,i/2),a=Math.min(e[3],n/2,i/2)),t.moveTo(r,0),t.lineTo(n-o,0),t.arc(n-o,o,o,3*Math.PI/2,0,!1),t.lineTo(n,i-s),t.arc(n-s,i-s,s,0,Math.PI/2,!1),t.lineTo(a,i),t.arc(a,i-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,r),t.arc(r,r,r,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,n,i);t.closePath(),t.fillStrokeShape(this)},e}(s.Shape);e.Rect=c,c.prototype.className="Rect",l._registerNode(c),a.Factory.addGetterSetter(c,"cornerRadius",0),o.Collection.mapMethods(c)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(3),s=n(0),l=n(5),c=n(1),u=n(2),h=n(1),p="Change.konva",f="2d",d=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],y=d.length;function m(){return o||(o=a.Util.createCanvasElement().getContext(f))}var v=function(t){function e(e){var n=t.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(e))||this;n._partialTextX=0,n._partialTextY=0;for(var i=0;i<y;i++)n.on(d[i]+p,n._setTextData);return n._setTextData(),n}return r(e,t),e.prototype._sceneFunc=function(t){var e,n=this.padding(),i=this.fontSize(),r=this.lineHeight()*i,o=this.textArr,a=o.length,s=this.verticalAlign(),l=0,c=this.align(),u=this.getWidth(),h=this.letterSpacing(),p=this.fill(),f=this.textDecoration(),d=-1!==f.indexOf("underline"),y=-1!==f.indexOf("line-through"),m=0,v=(m=r/2,0),g=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),"middle"===s?l=(this.getHeight()-a*r-2*n)/2:"bottom"===s&&(l=this.getHeight()-a*r-2*n),t.translate(n,l+n),e=0;e<a;e++){v=0,g=0;var b,_,w,x=o[e],S=x.text,k=x.width,C=e!==a-1;if(t.save(),"right"===c?v+=u-k-2*n:"center"===c&&(v+=(u-k-2*n)/2),d&&(t.save(),t.beginPath(),t.moveTo(v,m+g+Math.round(i/2)),_=0===(b=S.split(" ").length-1),w="justify"===c&&C&&!_?u-2*n:k,t.lineTo(v+Math.round(w),m+g+Math.round(i/2)),t.lineWidth=i/15,t.strokeStyle=p,t.stroke(),t.restore()),y&&(t.save(),t.beginPath(),t.moveTo(v,m+g),_=0===(b=S.split(" ").length-1),w="justify"===c&&C&&!_?u-2*n:k,t.lineTo(v+Math.round(w),m+g),t.lineWidth=i/15,t.strokeStyle=p,t.stroke(),t.restore()),0!==h||"justify"===c){b=S.split(" ").length-1;for(var E=0;E<S.length;E++){var O=S[E];" "===O&&e!==a-1&&"justify"===c&&(v+=Math.floor((u-2*n-k)/b)),this._partialTextX=v,this._partialTextY=m+g,this._partialText=O,t.fillStrokeShape(this),v+=Math.round(this.measureSize(O).width)+h}}else this._partialTextX=v,this._partialTextY=m+g,this._partialText=S,t.fillStrokeShape(this);t.restore(),a>1&&(m+=r)}},e.prototype._hitFunc=function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var e=a.Util._isString(t)?t:(t||"").toString();return this._setAttr("text",e),this},e.prototype.getWidth=function(){return"auto"===this.attrs.width||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},e.prototype.getHeight=function(){return"auto"===this.attrs.height||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var e,n=m(),i=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:i}},e.prototype._getContextFont=function(){return c.Konva.UA.isIE?this.fontStyle()+" "+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily()},e.prototype._addTextLine=function(t){"justify"===this.align()&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},e.prototype._getTextWidth=function(t){var e=this.letterSpacing(),n=t.length;return m().measureText(t).width+(n?e*(n-1):0)},e.prototype._setTextData=function(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,i=this.lineHeight()*e,r=this.attrs.width,o=this.attrs.height,a="auto"!==r&&void 0!==r,s="auto"!==o&&void 0!==o,l=this.padding(),c=r-2*l,u=o-2*l,h=0,p=this.wrap(),f="none"!==p,d="char"!==p&&f,y=this.ellipsis()&&!f;this.textArr=[],m().font=this._getContextFont();for(var v=y?this._getTextWidth("…"):0,g=0,b=t.length;g<b;++g){var _=t[g],w=this._getTextWidth(_);if(a&&w>c)for(;_.length>0;){for(var x=0,S=_.length,k="",C=0;x<S;){var E=x+S>>>1,O=_.slice(0,E+1),P=this._getTextWidth(O)+v;P<=c?(x=E+1,k=O+(y?"…":""),C=P):S=E}if(!k)break;if(d){var A,T=_[k.length];(A=(" "===T||"-"===T)&&C<=c?k.length:Math.max(k.lastIndexOf(" "),k.lastIndexOf("-"))+1)>0&&(x=A,k=k.slice(0,x),C=this._getTextWidth(k))}if(k=k.trimRight(),this._addTextLine(k),n=Math.max(n,C),h+=i,!f||s&&h+i>u)break;if((_=(_=_.slice(x)).trimLeft()).length>0&&(w=this._getTextWidth(_))<=c){this._addTextLine(_),h+=i,n=Math.max(n,w);break}}else this._addTextLine(_),h+=i,n=Math.max(n,w);if(s&&h+i>u)break}this.textHeight=e,this.textWidth=n},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(l.Shape);e.Text=v,v.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},v.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},v.prototype.className="Text",v.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight"],h._registerNode(v),s.Factory.overWriteSetter(v,"width",u.getNumberOrAutoValidator()),s.Factory.overWriteSetter(v,"height",u.getNumberOrAutoValidator()),s.Factory.addGetterSetter(v,"fontFamily","Arial"),s.Factory.addGetterSetter(v,"fontSize",12,u.getNumberValidator()),s.Factory.addGetterSetter(v,"fontStyle","normal"),s.Factory.addGetterSetter(v,"fontVariant","normal"),s.Factory.addGetterSetter(v,"padding",0,u.getNumberValidator()),s.Factory.addGetterSetter(v,"align","left"),s.Factory.addGetterSetter(v,"verticalAlign","top"),s.Factory.addGetterSetter(v,"lineHeight",1,u.getNumberValidator()),s.Factory.addGetterSetter(v,"wrap","word"),s.Factory.addGetterSetter(v,"ellipsis",!1),s.Factory.addGetterSetter(v,"letterSpacing",0,u.getNumberValidator()),s.Factory.addGetterSetter(v,"text","",u.getStringValidator()),s.Factory.addGetterSetter(v,"textDecoration",""),a.Collection.mapMethods(v)},function(t,e,n){"use strict";t.exports.extend=function(t,e,n,i){var r=n.inverse;return Object.defineProperty(t,"remove",{value:function(t){var n=this.indexOf(t);return-1!==n&&(this.splice(n,1),e.unset(t,r,i)),t}}),Object.defineProperty(t,"contains",{value:function(t){return-1!==this.indexOf(t)}}),Object.defineProperty(t,"add",{value:function(t,n){var o=this.indexOf(t);if(void 0===n){if(-1!==o)return;n=this.length}-1!==o&&this.splice(o,1),this.splice(n,0,t),-1===o&&e.set(t,r,i)}}),Object.defineProperty(t,"__refs_collection",{value:!0}),t},t.exports.isExtended=function(t){return!0===t.__refs_collection}},function(t,e,n){"use strict";var i="hasOwnProperty",r=/,?([a-z]),?/gi,o=parseFloat,a=Math,s=a.PI,l=a.min,c=a.max,u=a.pow,h=a.abs,p=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,f=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi;function d(t,e){return"finite"==(e=String.prototype.toLowerCase.call(e))?isFinite(t):!("array"!=e||!(t instanceof Array||Array.isArray&&Array.isArray(t)))||("null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||Object.prototype.toString.call(t).slice(8,-1).toLowerCase()==e)}function y(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[i](n)&&(e[n]=y(t[n]));return e}function m(t){var e=m.ps=m.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout((function(){for(var n in e)e[i](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])})),e[t]}function v(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:a.min(n,i)/2,r2:a.max(n,i)/2,r0:a.sqrt(n*n+i*i)/2,path:O(t,e,n,i),vb:[t,e,n,i].join(" ")}}function g(){return this.join(",").replace(r,"$1")}function b(t){var e=y(t);return e.toString=g,e}function _(t,e,n,i,r,o,l,c,h){var p=1-h,f=u(p,3),d=u(p,2),y=h*h,m=y*h,v=t+2*h*(n-t)+y*(r-2*n+t),g=e+2*h*(i-e)+y*(o-2*i+e),b=n+2*h*(r-n)+y*(l-2*r+n),_=i+2*h*(o-i)+y*(c-2*o+i);return{x:f*t+3*d*h*n+3*p*h*h*r+m*l,y:f*e+3*d*h*i+3*p*h*h*o+m*c,m:{x:v,y:g},n:{x:b,y:_},start:{x:p*t+h*n,y:p*e+h*i},end:{x:p*r+h*l,y:p*o+h*c},alpha:90-180*a.atan2(v-b,g-_)/s}}function w(t,e,n,i,r,o,a,s){d(t,"array")||(t=[t,e,n,i,r,o,a,s]);var l=D.apply(null,t);return v(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)}function x(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function S(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n}function k(t,e,n,i,r,o,s,l,c){null==c&&(c=1);for(var u=(c=c>1?1:c<0?0:c)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,d=0;d<12;d++){var y=u*h[d]+u,m=S(y,t,n,r,s),v=S(y,e,i,o,l),g=m*m+v*v;f+=p[d]*a.sqrt(g)}return u*f}function C(t,e,n,i,r,o,a,s){if(!(c(t,n)<l(r,a)||l(t,n)>c(r,a)||c(e,i)<l(o,s)||l(e,i)>c(o,s))){var u=(t-n)*(o-s)-(e-i)*(r-a);if(u){var h=((t*i-e*n)*(r-a)-(t-n)*(r*s-o*a))/u,p=((t*i-e*n)*(o-s)-(e-i)*(r*s-o*a))/u,f=+h.toFixed(2),d=+p.toFixed(2);if(!(f<+l(t,n).toFixed(2)||f>+c(t,n).toFixed(2)||f<+l(r,a).toFixed(2)||f>+c(r,a).toFixed(2)||d<+l(e,i).toFixed(2)||d>+c(e,i).toFixed(2)||d<+l(o,s).toFixed(2)||d>+c(o,s).toFixed(2)))return{x:h,y:p}}}}function E(t,e,n){if(!function(t,e){return t=v(t),x(e=v(e),t.x,t.y)||x(e,t.x2,t.y)||x(e,t.x,t.y2)||x(e,t.x2,t.y2)||x(t,e.x,e.y)||x(t,e.x2,e.y)||x(t,e.x,e.y2)||x(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(w(t),w(e)))return n?0:[];for(var i=~~(k.apply(0,t)/5),r=~~(k.apply(0,e)/5),o=[],a=[],s={},l=n?0:[],c=0;c<i+1;c++){var u=_.apply(0,t.concat(c/i));o.push({x:u.x,y:u.y,t:c/i})}for(c=0;c<r+1;c++)u=_.apply(0,e.concat(c/r)),a.push({x:u.x,y:u.y,t:c/r});for(c=0;c<i;c++)for(var p=0;p<r;p++){var f=o[c],d=o[c+1],y=a[p],m=a[p+1],g=h(d.x-f.x)<.01?"y":"x",b=h(m.x-y.x)<.01?"y":"x",S=C(f.x,f.y,d.x,d.y,y.x,y.y,m.x,m.y);if(S){if(s[S.x.toFixed(0)]==S.y.toFixed(0))continue;s[S.x.toFixed(0)]=S.y.toFixed(0);var E=f.t+h((S[g]-f[g])/(d[g]-f[g]))*(d.t-f.t),O=y.t+h((S[b]-y[b])/(m[b]-y[b]))*(m.t-y.t);E>=0&&E<=1&&O>=0&&O<=1&&(n?l++:l.push({x:S.x,y:S.y,t1:E,t2:O}))}}return l}function O(t,e,n,i,r){if(r)return[["M",+t+ +r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var o=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.toString=g,o}function P(t,e,n,i,r){if(null==r&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=r)var o=Math.PI/180,a=t+n*Math.cos(-i*o),s=t+n*Math.cos(-r*o),l=[["M",a,e+n*Math.sin(-i*o)],["A",n,n,0,+(r-i>180),0,s,e+n*Math.sin(-r*o)]];else l=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return l.toString=g,l}function A(t){var e=m(t);if(e.abs)return b(e.abs);if(d(t,"array")&&d(t&&t[0],"array")||(t=function(t){if(!t)return null;var e=m(t);if(e.arr)return y(e.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},i=[];return d(t,"array")&&d(t[0],"array")&&(i=y(t)),i.length||String(t).replace(p,(function(t,e,r){var o=[],a=e.toLowerCase();if(r.replace(f,(function(t,e){e&&o.push(+e)})),"m"==a&&o.length>2&&(i.push([e].concat(o.splice(0,2))),a="l",e="m"==e?"l":"L"),"o"==a&&1==o.length&&i.push([e,o[0]]),"r"==a)i.push([e].concat(o));else for(;o.length>=n[a]&&(i.push([e].concat(o.splice(0,n[a]))),n[a]););})),i.toString=m.toString,e.arr=y(i),i}(t)),!t||!t.length)return[["M",0,0]];var n,i=[],r=0,o=0,a=0,s=0,l=0;"M"==t[0][0]&&(a=r=+t[0][1],s=o=+t[0][2],l++,i[0]=["M",r,o]);for(var c,u,h=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),v=l,_=t.length;v<_;v++){if(i.push(c=[]),(n=(u=t[v])[0])!=n.toUpperCase())switch(c[0]=n.toUpperCase(),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+u[6]+r,c[7]=+u[7]+o;break;case"V":c[1]=+u[1]+o;break;case"H":c[1]=+u[1]+r;break;case"R":for(var w=[r,o].concat(u.slice(1)),x=2,S=w.length;x<S;x++)w[x]=+w[x]+r,w[++x]=+w[x]+o;i.pop(),i=i.concat(R(w,h));break;case"O":i.pop(),(w=P(r,o,u[1],u[2])).push(w[0]),i=i.concat(w);break;case"U":i.pop(),i=i.concat(P(r,o,u[1],u[2],u[3])),c=["U"].concat(i[i.length-1].slice(-2));break;case"M":a=+u[1]+r,s=+u[2]+o;default:for(x=1,S=u.length;x<S;x++)c[x]=+u[x]+(x%2?r:o)}else if("R"==n)w=[r,o].concat(u.slice(1)),i.pop(),i=i.concat(R(w,h)),c=["R"].concat(u.slice(-2));else if("O"==n)i.pop(),(w=P(r,o,u[1],u[2])).push(w[0]),i=i.concat(w);else if("U"==n)i.pop(),i=i.concat(P(r,o,u[1],u[2],u[3])),c=["U"].concat(i[i.length-1].slice(-2));else for(var k=0,C=u.length;k<C;k++)c[k]=u[k];if("O"!=(n=n.toUpperCase()))switch(c[0]){case"Z":r=+a,o=+s;break;case"H":r=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];default:r=c[c.length-2],o=c[c.length-1]}}return i.toString=g,e.abs=b(i),i}function T(t,e,n,i){return[t,e,n,i,n,i]}function M(t,e,n,i,r,o){return[1/3*t+2/3*n,1/3*e+2/3*i,1/3*r+2/3*n,1/3*o+2/3*i,r,o]}function j(t,e,n,r,o,l,c,u,p,f){var d,y,m,v,g=120*s/180,b=s/180*(+o||0),_=[],w=(y=function(t,e,n){return{x:t*a.cos(n)-e*a.sin(n),y:t*a.sin(n)+e*a.cos(n)}},function t(){var e=Array.prototype.slice.call(arguments,0),n=e.join("␀"),r=t.cache=t.cache||{},o=t.count=t.count||[];return r[i](n)?(function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}(o,n),v?v(r[n]):r[n]):(o.length>=1e3&&delete r[o.shift()],o.push(n),r[n]=y.apply(m,e),v?v(r[n]):r[n])});if(f)T=f[0],M=f[1],P=f[2],A=f[3];else{t=(d=w(t,e,-b)).x,e=d.y;var x=(t-(u=(d=w(u,p,-b)).x))/2,S=(e-(p=d.y))/2,k=x*x/(n*n)+S*S/(r*r);k>1&&(n*=k=a.sqrt(k),r*=k);var C=n*n,E=r*r,O=(l==c?-1:1)*a.sqrt(h((C*E-C*S*S-E*x*x)/(C*S*S+E*x*x))),P=O*n*S/r+(t+u)/2,A=O*-r*x/n+(e+p)/2,T=a.asin(((e-A)/r).toFixed(9)),M=a.asin(((p-A)/r).toFixed(9));(T=t<P?s-T:T)<0&&(T=2*s+T),(M=u<P?s-M:M)<0&&(M=2*s+M),c&&T>M&&(T-=2*s),!c&&M>T&&(M-=2*s)}var R=M-T;if(h(R)>g){var D=M,F=u,I=p;M=T+g*(c&&M>T?1:-1),_=j(u=P+n*a.cos(M),p=A+r*a.sin(M),n,r,o,0,c,F,I,[M,D,P,A])}R=M-T;var L=a.cos(T),N=a.sin(T),B=a.cos(M),V=a.sin(M),G=a.tan(R/4),z=4/3*n*G,U=4/3*r*G,W=[t,e],H=[t+z*N,e-U*L],K=[u+z*V,p-U*B],q=[u,p];if(H[0]=2*W[0]-H[0],H[1]=2*W[1]-H[1],f)return[H,K,q].concat(_);for(var Y=[],X=0,$=(_=[H,K,q].concat(_).join().split(",")).length;X<$;X++)Y[X]=X%2?w(_[X-1],_[X],b).y:w(_[X],_[X+1],b).x;return Y}function R(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var o=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?o[3]={x:+t[0],y:+t[1]}:r-2==i&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function D(t,e,n,i,r,o,s,u){for(var p,f,d,y,m,v,g,b,_=[],w=[[],[]],x=0;x<2;++x)if(0==x?(f=6*t-12*n+6*r,p=-3*t+9*n-9*r+3*s,d=3*n-3*t):(f=6*e-12*i+6*o,p=-3*e+9*i-9*o+3*u,d=3*i-3*e),h(p)<1e-12){if(h(f)<1e-12)continue;0<(y=-d/f)&&y<1&&_.push(y)}else g=f*f-4*d*p,b=a.sqrt(g),g<0||(0<(m=(-f+b)/(2*p))&&m<1&&_.push(m),0<(v=(-f-b)/(2*p))&&v<1&&_.push(v));for(var S,k=_.length,C=k;k--;)S=1-(y=_[k]),w[0][k]=S*S*S*t+3*S*S*y*n+3*S*y*y*r+y*y*y*s,w[1][k]=S*S*S*e+3*S*S*y*i+3*S*y*y*o+y*y*y*u;return w[0][C]=t,w[1][C]=e,w[0][C+1]=s,w[1][C+1]=u,w[0].length=w[1].length=C+2,{min:{x:l.apply(0,w[0]),y:l.apply(0,w[1])},max:{x:c.apply(0,w[0]),y:c.apply(0,w[1])}}}function F(t,e){var n=!e&&m(t);if(!e&&n.curve)return b(n.curve);for(var i=A(t),r=e&&A(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(j.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(M(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(M(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(T(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(T(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(T(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(T(e.x,e.y,e.X,e.Y))}return t},u=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)p[e]="A",r&&(f[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),g=c(i.length,r&&r.length||0)}},h=function(t,e,n,o,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=t[a][1],n.y=t[a][2],g=c(i.length,r&&r.length||0))},p=[],f=[],d="",y="",v=0,g=c(i.length,r&&r.length||0);v<g;v++){i[v]&&(d=i[v][0]),"C"!=d&&(p[v]=d,v&&(y=p[v-1])),i[v]=l(i[v],a,y),"A"!=p[v]&&"C"==d&&(p[v]="C"),u(i,v),r&&(r[v]&&(d=r[v][0]),"C"!=d&&(f[v]=d,v&&(y=f[v-1])),r[v]=l(r[v],s,y),"A"!=f[v]&&"C"==d&&(f[v]="C"),u(r,v)),h(i,r,a,s,v),h(r,i,s,a,v);var _=i[v],w=r&&r[v],x=_.length,S=r&&w.length;a.x=_[x-2],a.y=_[x-1],a.bx=o(_[x-4])||a.x,a.by=o(_[x-3])||a.y,s.bx=r&&(o(w[S-4])||s.x),s.by=r&&(o(w[S-3])||s.y),s.x=r&&w[S-2],s.y=r&&w[S-1]}return r||(n.curve=b(i)),r?[i,r]:i}t.exports=function(t,e,n){t=F(t),e=F(e);for(var i,r,o,a,s,l,c,u,h,p,f=n?0:[],d=0,y=t.length;d<y;d++){var m=t[d];if("M"==m[0])i=s=m[1],r=l=m[2];else{"C"==m[0]?(h=[i,r].concat(m.slice(1)),i=h[6],r=h[7]):(h=[i,r,i,r,s,l,s,l],i=s,r=l);for(var v=0,g=e.length;v<g;v++){var b=e[v];if("M"==b[0])o=c=b[1],a=u=b[2];else{"C"==b[0]?(p=[o,a].concat(b.slice(1)),o=p[6],a=p[7]):(p=[o,a,o,a,c,u,c,u],o=c,a=u);var _=E(h,p,n);if(n)f+=_;else{for(var w=0,x=_.length;w<x;w++)_[w].segment1=d,_[w].segment2=v,_[w].bez1=h,_[w].bez2=p;f=f.concat(_)}}}}}return f}},function(t,e,n){var i;"undefined"!=typeof self&&self,i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/main/js/index.ts")}({"./node_modules/css-loader/lib/css-base.js":
/*!*************************************************!*\
  !*** ./node_modules/css-loader/lib/css-base.js ***!
  \*************************************************/
/*! no static exports found */function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map((function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"}));return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},"./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!u){var t=s(p);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||u||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"./src/main/js/api/button.ts":
/*!***********************************!*\
  !*** ./src/main/js/api/button.ts ***!
  \***********************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.controller=t}return t.prototype.dispose=function(){this.controller.dispose()},t.prototype.on=function(t,e){this.controller.button.emitter.on(t,e)},t}();e.default=i},"./src/main/js/api/folder.ts":
/*!***********************************!*\
  !*** ./src/main/js/api/folder.ts ***!
  \***********************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../controller/binding-creators/input */"./src/main/js/controller/binding-creators/input.ts"),r=n(/*! ../controller/binding-creators/monitor */"./src/main/js/controller/binding-creators/monitor.ts"),o=n(/*! ../controller/button */"./src/main/js/controller/button.ts"),a=n(/*! ../controller/separator */"./src/main/js/controller/separator.ts"),s=n(/*! ../model/target */"./src/main/js/model/target.ts"),l=n(/*! ./button */"./src/main/js/api/button.ts"),c=n(/*! ./input-binding */"./src/main/js/api/input-binding.ts"),u=n(/*! ./monitor-binding */"./src/main/js/api/monitor-binding.ts"),h={change:"inputchange",fold:"fold",update:"monitorupdate"},p=function(){function t(t){this.controller=t}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this.controller.folder.expanded},set:function(t){this.controller.folder.expanded=t},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.controller.dispose()},t.prototype.addInput=function(t,e,n){var r=n||{},o=i.create(this.controller.document,new s.default(t,e,r.presetKey),r);return this.controller.uiControllerList.append(o),new c.default(o)},t.prototype.addMonitor=function(t,e,n){var i=n||{},o=r.create(this.controller.document,new s.default(t,e),i);return this.controller.uiControllerList.append(o),new u.default(o)},t.prototype.addButton=function(t){var e=new o.default(this.controller.document,t);return this.controller.uiControllerList.append(e),new l.default(e)},t.prototype.addSeparator=function(){var t=new a.default(this.controller.document);this.controller.uiControllerList.append(t)},t.prototype.on=function(t,e){var n=h[t];return n&&this.controller.emitter.on(n,e),this},t}();e.default=p},"./src/main/js/api/input-binding.ts":
/*!******************************************!*\
  !*** ./src/main/js/api/input-binding.ts ***!
  \******************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.controller=t}return t.prototype.dispose=function(){this.controller.dispose()},t.prototype.on=function(t,e){return this.controller.binding.value.emitter.on(t,e),this},t.prototype.refresh=function(){this.controller.binding.read()},t}();e.default=i},"./src/main/js/api/monitor-binding.ts":
/*!********************************************!*\
  !*** ./src/main/js/api/monitor-binding.ts ***!
  \********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.controller=t}return t.prototype.dispose=function(){this.controller.dispose()},t.prototype.on=function(t,e){return this.controller.binding.value.emitter.on(t,e),this},t.prototype.refresh=function(){this.controller.binding.read()},t}();e.default=i},"./src/main/js/api/preset.ts":
/*!***********************************!*\
  !*** ./src/main/js/api/preset.ts ***!
  \***********************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exportJson=function(t){return t.reduce((function(t,e){var n;return Object.assign(t,((n={})[e.presetKey]=e.read(),n))}),{})},e.importJson=function(t,e){t.forEach((function(t){var n=e[t.presetKey];void 0!==n&&t.write(n)}))}},"./src/main/js/api/root.ts":
/*!*********************************!*\
  !*** ./src/main/js/api/root.ts ***!
  \*********************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../controller/binding-creators/input */"./src/main/js/controller/binding-creators/input.ts"),r=n(/*! ../controller/binding-creators/monitor */"./src/main/js/controller/binding-creators/monitor.ts"),o=n(/*! ../controller/button */"./src/main/js/controller/button.ts"),a=n(/*! ../controller/folder */"./src/main/js/controller/folder.ts"),s=n(/*! ../controller/input-binding */"./src/main/js/controller/input-binding.ts"),l=n(/*! ../controller/monitor-binding */"./src/main/js/controller/monitor-binding.ts"),c=n(/*! ../controller/separator */"./src/main/js/controller/separator.ts"),u=n(/*! ../controller/ui-util */"./src/main/js/controller/ui-util.ts"),h=n(/*! ../model/target */"./src/main/js/model/target.ts"),p=n(/*! ./button */"./src/main/js/api/button.ts"),f=n(/*! ./folder */"./src/main/js/api/folder.ts"),d=n(/*! ./input-binding */"./src/main/js/api/input-binding.ts"),y=n(/*! ./monitor-binding */"./src/main/js/api/monitor-binding.ts"),m=n(/*! ./preset */"./src/main/js/api/preset.ts"),v={change:"inputchange",fold:"fold",update:"monitorupdate"},g=function(){function t(t){this.controller=t}return Object.defineProperty(t.prototype,"element",{get:function(){return this.controller.view.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expanded",{get:function(){var t=this.controller.folder;return!t||t.expanded},set:function(t){var e=this.controller.folder;e&&(e.expanded=t)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.controller.dispose()},t.prototype.addInput=function(t,e,n){var r=n||{},o=i.create(this.controller.document,new h.default(t,e,r.presetKey),r);return this.controller.uiControllerList.append(o),new d.default(o)},t.prototype.addMonitor=function(t,e,n){var i=n||{},o=r.create(this.controller.document,new h.default(t,e),i);return this.controller.uiControllerList.append(o),new y.default(o)},t.prototype.addButton=function(t){var e=new o.default(this.controller.document,t);return this.controller.uiControllerList.append(e),new p.default(e)},t.prototype.addFolder=function(t){var e=new a.default(this.controller.document,t);return this.controller.uiControllerList.append(e),new f.default(e)},t.prototype.addSeparator=function(){var t=new c.default(this.controller.document);this.controller.uiControllerList.append(t)},t.prototype.importPreset=function(t){var e=u.findControllers(this.controller.uiControllerList.items,s.default).map((function(t){return t.binding.target}));m.importJson(e,t),this.refresh()},t.prototype.exportPreset=function(){var t=u.findControllers(this.controller.uiControllerList.items,s.default).map((function(t){return t.binding.target}));return m.exportJson(t)},t.prototype.on=function(t,e){var n=v[t];return n&&this.controller.emitter.on(n,e),this},t.prototype.refresh=function(){u.findControllers(this.controller.uiControllerList.items,s.default).forEach((function(t){t.binding.read()})),u.findControllers(this.controller.uiControllerList.items,l.default).forEach((function(t){t.binding.read()}))},t}();e.default=g},"./src/main/js/binding/input.ts":
/*!**************************************!*\
  !*** ./src/main/js/binding/input.ts ***!
  \**************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader_=t.reader,this.writer_=t.writer,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}return t.prototype.read=function(){var t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader_(t))},t.prototype.write_=function(t){var e=this.writer_(t);this.target.write(e)},t.prototype.onValueChange_=function(t){this.write_(t)},t}();e.default=i},"./src/main/js/binding/monitor.ts":
/*!****************************************!*\
  !*** ./src/main/js/binding/monitor.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return t.prototype.dispose=function(){this.ticker.dispose()},t.prototype.read=function(){var t=this.target.read();void 0!==t&&this.value.append(this.reader_(t))},t.prototype.onTick_=function(){this.read()},t}();e.default=i},"./src/main/js/constraint/composite.ts":
/*!*********************************************!*\
  !*** ./src/main/js/constraint/composite.ts ***!
  \*********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.constraints_=t.constraints}return Object.defineProperty(t.prototype,"constraints",{get:function(){return this.constraints_},enumerable:!0,configurable:!0}),t.prototype.constrain=function(t){return this.constraints_.reduce((function(t,e){return e.constrain(t)}),t)},t}();e.default=i},"./src/main/js/constraint/list.ts":
/*!****************************************!*\
  !*** ./src/main/js/constraint/list.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.opts_=t.options}return Object.defineProperty(t.prototype,"options",{get:function(){return this.opts_},enumerable:!0,configurable:!0}),t.prototype.constrain=function(t){var e=this.opts_;return 0===e.length?t:e.filter((function(e){return e.value===t})).length>0?t:e[0].value},t}();e.default=i},"./src/main/js/constraint/range.ts":
/*!*****************************************!*\
  !*** ./src/main/js/constraint/range.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.max_=t.max,this.min_=t.min}return Object.defineProperty(t.prototype,"minValue",{get:function(){return this.min_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.max_},enumerable:!0,configurable:!0}),t.prototype.constrain=function(t){var e=t;return null!==this.min_&&void 0!==this.min_&&(e=Math.max(e,this.min_)),null!==this.max_&&void 0!==this.max_&&(e=Math.min(e,this.max_)),e},t}();e.default=i},"./src/main/js/constraint/step.ts":
/*!****************************************!*\
  !*** ./src/main/js/constraint/step.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.step=t.step}return t.prototype.constrain=function(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step},t}();e.default=i},"./src/main/js/constraint/util.ts":
/*!****************************************!*\
  !*** ./src/main/js/constraint/util.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ./composite */"./src/main/js/constraint/composite.ts"),r={findConstraint:function(t,e){if(t instanceof e)return t;if(t instanceof i.default){var n=t.constraints.reduce((function(t,n){return t||(n instanceof e?n:null)}),null);if(n)return n}return null}};e.default=r},"./src/main/js/controller/binding-creators/boolean-input.ts":
/*!******************************************************************!*\
  !*** ./src/main/js/controller/binding-creators/boolean-input.ts ***!
  \******************************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../binding/input */"./src/main/js/binding/input.ts"),r=n(/*! ../../constraint/composite */"./src/main/js/constraint/composite.ts"),o=n(/*! ../../constraint/list */"./src/main/js/constraint/list.ts"),a=n(/*! ../../constraint/util */"./src/main/js/constraint/util.ts"),s=n(/*! ../../converter/boolean */"./src/main/js/converter/boolean.ts"),l=n(/*! ../../model/input-value */"./src/main/js/model/input-value.ts"),c=n(/*! ../input-binding */"./src/main/js/controller/input-binding.ts"),u=n(/*! ../input/checkbox */"./src/main/js/controller/input/checkbox.ts"),h=n(/*! ../input/list */"./src/main/js/controller/input/list.ts");function p(t,e){var n=e.constraint;return n&&a.default.findConstraint(n,o.default)?new h.default(t,{stringifyValue:s.toString,value:e}):new u.default(t,{value:e})}e.create=function(t,e,n){var a=new l.default(!1,function(t){var e=[];return t.options&&e.push(new o.default({options:t.options})),new r.default({constraints:e})}(n)),u=new i.default({reader:s.fromMixed,target:e,value:a,writer:function(t){return t}});return new c.default(t,{binding:u,controller:p(t,a),label:n.label||e.key})}},"./src/main/js/controller/binding-creators/boolean-monitor.ts":
/*!********************************************************************!*\
  !*** ./src/main/js/controller/binding-creators/boolean-monitor.ts ***!
  \********************************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../binding/monitor */"./src/main/js/binding/monitor.ts"),r=n(/*! ../../converter/boolean */"./src/main/js/converter/boolean.ts"),o=n(/*! ../../formatter/boolean */"./src/main/js/formatter/boolean.ts"),a=n(/*! ../../misc/ticker/interval */"./src/main/js/misc/ticker/interval.ts"),s=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),l=n(/*! ../../model/monitor-value */"./src/main/js/model/monitor-value.ts"),c=n(/*! ../monitor-binding */"./src/main/js/controller/monitor-binding.ts"),u=n(/*! ../monitor/multi-log */"./src/main/js/controller/monitor/multi-log.ts"),h=n(/*! ../monitor/single-log */"./src/main/js/controller/monitor/single-log.ts");e.createTextMonitor=function(t,e,n){var p=new l.default(s.default.getOrDefault(n.count,1)),f=1===p.totalCount?new h.default(t,{formatter:new o.default,value:p}):new u.default(t,{formatter:new o.default,value:p}),d=new a.default(t,s.default.getOrDefault(n.interval,200));return new c.default(t,{binding:new i.default({reader:r.fromMixed,target:e,ticker:d,value:p}),controller:f,label:n.label||e.key})}},"./src/main/js/controller/binding-creators/color-input.ts":
/*!****************************************************************!*\
  !*** ./src/main/js/controller/binding-creators/color-input.ts ***!
  \****************************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../binding/input */"./src/main/js/binding/input.ts"),r=n(/*! ../../converter/color */"./src/main/js/converter/color.ts"),o=n(/*! ../../formatter/color */"./src/main/js/formatter/color.ts"),a=n(/*! ../../model/input-value */"./src/main/js/model/input-value.ts"),s=n(/*! ../../parser/color */"./src/main/js/parser/color.ts"),l=n(/*! ../input-binding */"./src/main/js/controller/input-binding.ts"),c=n(/*! ../input/color-swatch-text */"./src/main/js/controller/input/color-swatch-text.ts");e.create=function(t,e,n,u){var h=new a.default(n);return new l.default(t,{binding:new i.default({reader:r.fromMixed,target:e,value:h,writer:r.toString}),controller:new c.default(t,{formatter:new o.default,parser:s.default,value:h}),label:u.label||e.key})}},"./src/main/js/controller/binding-creators/input.ts":
/*!**********************************************************!*\
  !*** ./src/main/js/controller/binding-creators/input.ts ***!
  \**********************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../converter/boolean */"./src/main/js/converter/boolean.ts"),r=n(/*! ../../converter/number */"./src/main/js/converter/number.ts"),o=n(/*! ../../converter/string */"./src/main/js/converter/string.ts"),a=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),s=n(/*! ../../parser/color */"./src/main/js/parser/color.ts"),l=n(/*! ./boolean-input */"./src/main/js/controller/binding-creators/boolean-input.ts"),c=n(/*! ./color-input */"./src/main/js/controller/binding-creators/color-input.ts"),u=n(/*! ./number-input */"./src/main/js/controller/binding-creators/number-input.ts"),h=n(/*! ./string-input */"./src/main/js/controller/binding-creators/string-input.ts");function p(t,e){var n={label:t.label,max:t.max,min:t.min,step:t.step};if(t.options)if(Array.isArray(t.options))n.options=t.options.map((function(t){return{text:t.text,value:e(t.value)}}));else{var i=t.options,r=Object.keys(i);n.options=r.reduce((function(t,n){return t.concat({text:n,value:e(i[n])})}),[])}return n}e.create=function(t,e,n){var f=e.read();if(null==f)throw new a.default({context:{key:e.key},type:"emptyvalue"});if("boolean"==typeof f)return l.create(t,e,p(n,i.fromMixed));if("number"==typeof f)return u.create(t,e,p(n,r.fromMixed));if("string"==typeof f){var d=s.default(f);return d?c.create(t,e,d,n):h.create(t,e,p(n,o.fromMixed))}throw new a.default({context:{key:e.key},type:"nomatchingcontroller"})}},"./src/main/js/controller/binding-creators/monitor.ts":
/*!************************************************************!*\
  !*** ./src/main/js/controller/binding-creators/monitor.ts ***!
  \************************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),r=n(/*! ./boolean-monitor */"./src/main/js/controller/binding-creators/boolean-monitor.ts"),o=n(/*! ./number-monitor */"./src/main/js/controller/binding-creators/number-monitor.ts"),a=n(/*! ./string-monitor */"./src/main/js/controller/binding-creators/string-monitor.ts");e.create=function(t,e,n){var s=e.read();if(null==s)throw new i.default({context:{key:e.key},type:"emptyvalue"});if("number"==typeof s)return"graph"===n.type?o.createGraphMonitor(t,e,n):o.createTextMonitor(t,e,n);if("string"==typeof s)return a.createTextMonitor(t,e,n);if("boolean"==typeof s)return r.createTextMonitor(t,e,n);throw new i.default({context:{key:e.key},type:"nomatchingcontroller"})}},"./src/main/js/controller/binding-creators/number-input.ts":
/*!*****************************************************************!*\
  !*** ./src/main/js/controller/binding-creators/number-input.ts ***!
  \*****************************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../binding/input */"./src/main/js/binding/input.ts"),r=n(/*! ../../constraint/composite */"./src/main/js/constraint/composite.ts"),o=n(/*! ../../constraint/list */"./src/main/js/constraint/list.ts"),a=n(/*! ../../constraint/range */"./src/main/js/constraint/range.ts"),s=n(/*! ../../constraint/step */"./src/main/js/constraint/step.ts"),l=n(/*! ../../constraint/util */"./src/main/js/constraint/util.ts"),c=n(/*! ../../converter/number */"./src/main/js/converter/number.ts"),u=n(/*! ../../formatter/number */"./src/main/js/formatter/number.ts"),h=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),p=n(/*! ../../model/input-value */"./src/main/js/model/input-value.ts"),f=n(/*! ../../parser/number */"./src/main/js/parser/number.ts"),d=n(/*! ../input-binding */"./src/main/js/controller/input-binding.ts"),y=n(/*! ../input/list */"./src/main/js/controller/input/list.ts"),m=n(/*! ../input/number-text */"./src/main/js/controller/input/number-text.ts"),v=n(/*! ../input/slider-text */"./src/main/js/controller/input/slider-text.ts");function g(t){var e=t.constraint,n=e&&l.default.findConstraint(e,s.default);return n?h.default.getDecimalDigits(n.step):Math.max(h.default.getDecimalDigits(t.rawValue),2)}function b(t,e){var n=e.constraint;return n&&l.default.findConstraint(n,o.default)?new y.default(t,{stringifyValue:c.toString,value:e}):n&&l.default.findConstraint(n,a.default)?new v.default(t,{formatter:new u.default(g(e)),parser:f.default,value:e}):new m.default(t,{formatter:new u.default(g(e)),parser:f.default,value:e})}e.create=function(t,e,n){var l=new p.default(0,function(t){var e=[];return null!==t.step&&void 0!==t.step&&e.push(new s.default({step:t.step})),(null!==t.max&&void 0!==t.max||null!==t.min&&void 0!==t.min)&&e.push(new a.default({max:t.max,min:t.min})),t.options&&e.push(new o.default({options:t.options})),new r.default({constraints:e})}(n)),u=new i.default({reader:c.fromMixed,target:e,value:l,writer:function(t){return t}});return new d.default(t,{binding:u,controller:b(t,l),label:n.label||e.key})}},"./src/main/js/controller/binding-creators/number-monitor.ts":
/*!*******************************************************************!*\
  !*** ./src/main/js/controller/binding-creators/number-monitor.ts ***!
  \*******************************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../binding/monitor */"./src/main/js/binding/monitor.ts"),r=n(/*! ../../converter/number */"./src/main/js/converter/number.ts"),o=n(/*! ../../formatter/number */"./src/main/js/formatter/number.ts"),a=n(/*! ../../misc/ticker/interval */"./src/main/js/misc/ticker/interval.ts"),s=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),l=n(/*! ../../model/monitor-value */"./src/main/js/model/monitor-value.ts"),c=n(/*! ../monitor-binding */"./src/main/js/controller/monitor-binding.ts"),u=n(/*! ../monitor/graph */"./src/main/js/controller/monitor/graph.ts"),h=n(/*! ../monitor/multi-log */"./src/main/js/controller/monitor/multi-log.ts"),p=n(/*! ../monitor/single-log */"./src/main/js/controller/monitor/single-log.ts");function f(){return new o.default(2)}e.createTextMonitor=function(t,e,n){var o=new l.default(s.default.getOrDefault(n.count,1)),u=1===o.totalCount?new p.default(t,{formatter:f(),value:o}):new h.default(t,{formatter:f(),value:o}),d=new a.default(t,s.default.getOrDefault(n.interval,200));return new c.default(t,{binding:new i.default({reader:r.fromMixed,target:e,ticker:d,value:o}),controller:u,label:n.label||e.key})},e.createGraphMonitor=function(t,e,n){var o=new l.default(s.default.getOrDefault(n.count,64)),h=new a.default(t,s.default.getOrDefault(n.interval,200));return new c.default(t,{binding:new i.default({reader:r.fromMixed,target:e,ticker:h,value:o}),controller:new u.default(t,{formatter:f(),maxValue:s.default.getOrDefault(n.max,100),minValue:s.default.getOrDefault(n.min,0),value:o}),label:n.label||e.key})}},"./src/main/js/controller/binding-creators/string-input.ts":
/*!*****************************************************************!*\
  !*** ./src/main/js/controller/binding-creators/string-input.ts ***!
  \*****************************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../binding/input */"./src/main/js/binding/input.ts"),r=n(/*! ../../constraint/composite */"./src/main/js/constraint/composite.ts"),o=n(/*! ../../constraint/list */"./src/main/js/constraint/list.ts"),a=n(/*! ../../constraint/util */"./src/main/js/constraint/util.ts"),s=n(/*! ../../converter/string */"./src/main/js/converter/string.ts"),l=n(/*! ../../formatter/string */"./src/main/js/formatter/string.ts"),c=n(/*! ../../model/input-value */"./src/main/js/model/input-value.ts"),u=n(/*! ../input-binding */"./src/main/js/controller/input-binding.ts"),h=n(/*! ../input/list */"./src/main/js/controller/input/list.ts"),p=n(/*! ../input/text */"./src/main/js/controller/input/text.ts");function f(t,e){var n=e.constraint;return n&&a.default.findConstraint(n,o.default)?new h.default(t,{stringifyValue:s.toString,value:e}):new p.default(t,{formatter:new l.default,parser:s.toString,value:e})}e.create=function(t,e,n){var a=new c.default("",function(t){var e=[];return t.options&&e.push(new o.default({options:t.options})),new r.default({constraints:e})}(n)),l=new i.default({reader:s.fromMixed,target:e,value:a,writer:function(t){return t}});return new u.default(t,{binding:l,controller:f(t,a),label:n.label||e.key})}},"./src/main/js/controller/binding-creators/string-monitor.ts":
/*!*******************************************************************!*\
  !*** ./src/main/js/controller/binding-creators/string-monitor.ts ***!
  \*******************************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../binding/monitor */"./src/main/js/binding/monitor.ts"),r=n(/*! ../../converter/string */"./src/main/js/converter/string.ts"),o=n(/*! ../../formatter/string */"./src/main/js/formatter/string.ts"),a=n(/*! ../../misc/ticker/interval */"./src/main/js/misc/ticker/interval.ts"),s=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),l=n(/*! ../../model/monitor-value */"./src/main/js/model/monitor-value.ts"),c=n(/*! ../monitor-binding */"./src/main/js/controller/monitor-binding.ts"),u=n(/*! ../monitor/multi-log */"./src/main/js/controller/monitor/multi-log.ts"),h=n(/*! ../monitor/single-log */"./src/main/js/controller/monitor/single-log.ts");e.createTextMonitor=function(t,e,n){var p=new l.default(s.default.getOrDefault(n.count,1)),f=p.totalCount>1||n.multiline?new u.default(t,{formatter:new o.default,value:p}):new h.default(t,{formatter:new o.default,value:p}),d=new a.default(t,s.default.getOrDefault(n.interval,200));return new c.default(t,{binding:new i.default({reader:r.fromMixed,target:e,ticker:d,value:p}),controller:f,label:n.label||e.key})}},"./src/main/js/controller/button.ts":
/*!******************************************!*\
  !*** ./src/main/js/controller/button.ts ***!
  \******************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../model/button */"./src/main/js/model/button.ts"),r=n(/*! ../view/button */"./src/main/js/view/button.ts"),o=function(){function t(t,e){this.onButtonClick_=this.onButtonClick_.bind(this),this.button=new i.default(e.title),this.view=new r.default(t,{button:this.button}),this.view.buttonElement.addEventListener("click",this.onButtonClick_)}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.onButtonClick_=function(){this.button.click()},t}();e.default=o},"./src/main/js/controller/folder.ts":
/*!******************************************!*\
  !*** ./src/main/js/controller/folder.ts ***!
  \******************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/dom-util */"./src/main/js/misc/dom-util.ts"),r=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),o=n(/*! ../misc/type-util */"./src/main/js/misc/type-util.ts"),a=n(/*! ../model/folder */"./src/main/js/model/folder.ts"),s=n(/*! ../model/list */"./src/main/js/model/list.ts"),l=n(/*! ../view/folder */"./src/main/js/view/folder.ts"),c=n(/*! ./input-binding */"./src/main/js/controller/input-binding.ts"),u=n(/*! ./monitor-binding */"./src/main/js/controller/monitor-binding.ts"),h=function(){function t(t,e){this.onFolderChange_=this.onFolderChange_.bind(this),this.onInputChange_=this.onInputChange_.bind(this),this.onMonitorUpdate_=this.onMonitorUpdate_.bind(this),this.onTitleClick_=this.onTitleClick_.bind(this),this.onUiControllerListAppend_=this.onUiControllerListAppend_.bind(this),this.emitter=new r.default,this.folder=new a.default(e.title,o.default.getOrDefault(e.expanded,!0)),this.folder.emitter.on("change",this.onFolderChange_),this.ucList_=new s.default,this.ucList_.emitter.on("append",this.onUiControllerListAppend_),this.doc_=t,this.view=new l.default(this.doc_,{folder:this.folder}),this.view.titleElement.addEventListener("click",this.onTitleClick_)}return Object.defineProperty(t.prototype,"document",{get:function(){return this.doc_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uiControllerList",{get:function(){return this.ucList_},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.view.dispose()},t.prototype.computeExpandedHeight_=function(){var t=this,e=this.view.containerElement,n=0;return i.disableTransitionTemporarily(e,(function(){var r=t.folder.expanded;t.folder.expandedHeight=null,t.folder.expanded=!0,i.forceReflow(e),n=e.getBoundingClientRect().height,t.folder.expanded=r,i.forceReflow(e)})),n},t.prototype.onTitleClick_=function(){this.folder.expanded=!this.folder.expanded},t.prototype.onUiControllerListAppend_=function(t){t instanceof c.default?t.binding.value.emitter.on("change",this.onInputChange_):t instanceof u.default&&t.binding.value.emitter.on("update",this.onMonitorUpdate_),this.view.containerElement.appendChild(t.view.element),this.folder.expandedHeight=this.computeExpandedHeight_()},t.prototype.onInputChange_=function(t){this.emitter.emit("inputchange",[t])},t.prototype.onMonitorUpdate_=function(t){this.emitter.emit("monitorupdate",[t])},t.prototype.onFolderChange_=function(){this.emitter.emit("fold")},t}();e.default=h},"./src/main/js/controller/input-binding.ts":
/*!*************************************************!*\
  !*** ./src/main/js/controller/input-binding.ts ***!
  \*************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../view/labeled */"./src/main/js/view/labeled.ts"),r=function(){function t(t,e){this.binding=e.binding,this.controller=e.controller,this.view=new i.default(t,{label:e.label,view:this.controller.view})}return t.prototype.dispose=function(){this.controller.dispose(),this.view.dispose()},t}();e.default=r},"./src/main/js/controller/input/checkbox.ts":
/*!**************************************************!*\
  !*** ./src/main/js/controller/input/checkbox.ts ***!
  \**************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),r=n(/*! ../../view/input/checkbox */"./src/main/js/view/input/checkbox.ts"),o=function(){function t(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.view=new r.default(t,{value:this.value}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.onInputChange_=function(t){var e=i.default.forceCast(t.currentTarget);this.value.rawValue=e.checked,this.view.update()},t}();e.default=o},"./src/main/js/controller/input/color-picker.ts":
/*!******************************************************!*\
  !*** ./src/main/js/controller/input/color-picker.ts ***!
  \******************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../constraint/composite */"./src/main/js/constraint/composite.ts"),r=n(/*! ../../constraint/range */"./src/main/js/constraint/range.ts"),o=n(/*! ../../constraint/step */"./src/main/js/constraint/step.ts"),a=n(/*! ../../formatter/number */"./src/main/js/formatter/number.ts"),s=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),l=n(/*! ../../model/color */"./src/main/js/model/color.ts"),c=n(/*! ../../model/foldable */"./src/main/js/model/foldable.ts"),u=n(/*! ../../model/input-value */"./src/main/js/model/input-value.ts"),h=n(/*! ../../parser/number */"./src/main/js/parser/number.ts"),p=n(/*! ../../view/input/color-picker */"./src/main/js/view/input/color-picker.ts"),f=n(/*! ./h-palette */"./src/main/js/controller/input/h-palette.ts"),d=n(/*! ./number-text */"./src/main/js/controller/input/number-text.ts"),y=n(/*! ./sv-palette */"./src/main/js/controller/input/sv-palette.ts"),m=new i.default({constraints:[new r.default({max:255,min:0}),new o.default({step:1})]}),v=function(){function t(t,e){var n=this;this.onInputBlur_=this.onInputBlur_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.foldable=new c.default,this.hPaletteIc_=new f.default(t,{value:this.value}),this.svPaletteIc_=new y.default(t,{value:this.value});var i=this.value.rawValue.getComponents(),r=[0,1,2].map((function(t){return new u.default(i[t],m)}));r.forEach((function(t,e){t.emitter.on("change",(function(t){var i=n.value.rawValue.getComponents();0!==e&&1!==e&&2!==e||(i[e]=t),n.value.rawValue=new(l.default.bind.apply(l.default,[void 0].concat(i)))}))})),this.rgbIcs_=r.map((function(e){return new d.default(t,{formatter:new a.default(0),parser:h.default,value:e})})),this.view=new p.default(t,{foldable:this.foldable,hPaletteInputView:this.hPaletteIc_.view,rgbInputViews:this.rgbIcs_.map((function(t){return t.view})),svPaletteInputView:this.svPaletteIc_.view,value:this.value}),this.view.allFocusableElements.forEach((function(t){t.addEventListener("blur",n.onInputBlur_)}))}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.onInputBlur_=function(t){var e=this.view.element,n=s.default.forceCast(t.relatedTarget);n&&e.contains(n)||(this.foldable.expanded=!1)},t.prototype.onValueChange_=function(){var t=this.value.rawValue.getComponents();this.rgbIcs_.forEach((function(e,n){e.value.rawValue=t[n]}))},t}();e.default=v},"./src/main/js/controller/input/color-swatch-text.ts":
/*!***********************************************************!*\
  !*** ./src/main/js/controller/input/color-swatch-text.ts ***!
  \***********************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../view/input/color-swatch-text */"./src/main/js/view/input/color-swatch-text.ts"),r=n(/*! ../input/color-swatch */"./src/main/js/controller/input/color-swatch.ts"),o=n(/*! ./text */"./src/main/js/controller/input/text.ts"),a=function(){function t(t,e){this.value=e.value,this.swatchIc_=new r.default(t,{value:this.value}),this.textIc_=new o.default(t,{formatter:e.formatter,parser:e.parser,value:this.value}),this.view=new i.default(t,{swatchInputView:this.swatchIc_.view,textInputView:this.textIc_.view})}return t.prototype.dispose=function(){this.view.dispose()},t}();e.default=a},"./src/main/js/controller/input/color-swatch.ts":
/*!******************************************************!*\
  !*** ./src/main/js/controller/input/color-swatch.ts ***!
  \******************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),r=n(/*! ../../view/input/color-swatch */"./src/main/js/view/input/color-swatch.ts"),o=n(/*! ./color-picker */"./src/main/js/controller/input/color-picker.ts"),a=function(){function t(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.value=e.value,this.pickerIc_=new o.default(t,{value:this.value}),this.view=new r.default(t,{pickerInputView:this.pickerIc_.view,value:this.value}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_)}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.onButtonBlur_=function(t){var e=this.view.element,n=i.default.forceCast(t.relatedTarget);n&&e.contains(n)||(this.pickerIc_.foldable.expanded=!1)},t.prototype.onButtonClick_=function(){this.pickerIc_.foldable.expanded=!this.pickerIc_.foldable.expanded},t}();e.default=a},"./src/main/js/controller/input/h-palette.ts":
/*!***************************************************!*\
  !*** ./src/main/js/controller/input/h-palette.ts ***!
  \***************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../misc/color-model */"./src/main/js/misc/color-model.ts"),r=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),o=n(/*! ../../misc/pointer-handler */"./src/main/js/misc/pointer-handler.ts"),a=n(/*! ../../model/color */"./src/main/js/model/color.ts"),s=n(/*! ../../view/input/h-palette */"./src/main/js/view/input/h-palette.ts"),l=function(){function t(t,e){this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.view=new s.default(t,{value:this.value}),this.ptHandler_=new o.default(t,this.view.canvasElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_)}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.handlePointerEvent_=function(t){var e=r.default.map(t.py,0,1,0,360),n=this.value.rawValue,o=i.rgbToHsv.apply(i,n.getComponents()),s=o[1],l=o[2];this.value.rawValue=new(a.default.bind.apply(a.default,[void 0].concat(i.hsvToRgb(e,s,l)))),this.view.update()},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t)},t}();e.default=l},"./src/main/js/controller/input/list.ts":
/*!**********************************************!*\
  !*** ./src/main/js/controller/input/list.ts ***!
  \**********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../constraint/list */"./src/main/js/constraint/list.ts"),r=n(/*! ../../constraint/util */"./src/main/js/constraint/util.ts"),o=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),a=n(/*! ../../view/input/list */"./src/main/js/view/input/list.ts"),s=function(){function t(t,e){var n,o;this.onSelectChange_=this.onSelectChange_.bind(this),this.value_=e.value,this.listItems_=(n=this.value_,((o=n.constraint?r.default.findConstraint(n.constraint,i.default):null)?o.options:null)||[]),this.view_=new a.default(t,{options:this.listItems_,stringifyValue:e.stringifyValue,value:this.value_}),this.view_.selectElement.addEventListener("change",this.onSelectChange_)}return Object.defineProperty(t.prototype,"value",{get:function(){return this.value_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this.view_},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.view.dispose()},t.prototype.onSelectChange_=function(t){var e=o.default.forceCast(t.currentTarget).selectedOptions.item(0);if(e){var n=Number(e.dataset.index);this.value_.rawValue=this.listItems_[n].value,this.view_.update()}},t}();e.default=s},"./src/main/js/controller/input/number-text.ts":
/*!*****************************************************!*\
  !*** ./src/main/js/controller/input/number-text.ts ***!
  \*****************************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../constraint/step */"./src/main/js/constraint/step.ts"),a=n(/*! ../../constraint/util */"./src/main/js/constraint/util.ts"),s=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts");function l(t){var e=function(t){var e=t.constraint?a.default.findConstraint(t.constraint,o.default):null;return e?e.step:null}(t);return s.default.getOrDefault(e,1)}var c=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.onInputKeyDown_=i.onInputKeyDown_.bind(i),i.step_=l(i.value),i.view.inputElement.addEventListener("keydown",i.onInputKeyDown_),i}return r(e,t),e.prototype.dispose=function(){this.view.dispose()},e.prototype.onInputKeyDown_=function(t){var e=this.step_*(t.altKey?.1:1)*(t.shiftKey?10:1);38===t.keyCode?(this.value.rawValue+=e,this.view.update()):40===t.keyCode&&(this.value.rawValue-=e,this.view.update())},e}(n(/*! ./text */"./src/main/js/controller/input/text.ts").default);e.default=c},"./src/main/js/controller/input/slider-text.ts":
/*!*****************************************************!*\
  !*** ./src/main/js/controller/input/slider-text.ts ***!
  \*****************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../view/input/slider-text */"./src/main/js/view/input/slider-text.ts"),r=n(/*! ./number-text */"./src/main/js/controller/input/number-text.ts"),o=n(/*! ./slider */"./src/main/js/controller/input/slider.ts"),a=function(){function t(t,e){this.value_=e.value,this.sliderIc_=new o.default(t,{value:e.value}),this.textIc_=new r.default(t,{formatter:e.formatter,parser:e.parser,value:e.value}),this.view_=new i.default(t,{sliderInputView:this.sliderIc_.view,textInputView:this.textIc_.view})}return Object.defineProperty(t.prototype,"value",{get:function(){return this.value_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this.view_},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.view.dispose()},t}();e.default=a},"./src/main/js/controller/input/slider.ts":
/*!************************************************!*\
  !*** ./src/main/js/controller/input/slider.ts ***!
  \************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../constraint/range */"./src/main/js/constraint/range.ts"),r=n(/*! ../../constraint/util */"./src/main/js/constraint/util.ts"),o=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),a=n(/*! ../../misc/pointer-handler */"./src/main/js/misc/pointer-handler.ts"),s=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),l=n(/*! ../../view/input/slider */"./src/main/js/view/input/slider.ts");function c(t){var e=function(t){var e=t.constraint?r.default.findConstraint(t.constraint,i.default):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}(t),n=e[0],o=e[1];return[s.default.getOrDefault(n,0),s.default.getOrDefault(o,100)]}var u=function(){function t(t,e){this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value;var n=c(this.value),i=n[0],r=n[1];this.minValue_=i,this.maxValue_=r,this.view=new l.default(t,{maxValue:this.maxValue_,minValue:this.minValue_,value:this.value}),this.ptHandler_=new a.default(t,this.view.outerElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_)}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.onPointerDown_=function(t){this.value.rawValue=o.default.map(t.px,0,1,this.minValue_,this.maxValue_),this.view.update()},t.prototype.onPointerMove_=function(t){this.value.rawValue=o.default.map(t.px,0,1,this.minValue_,this.maxValue_),this.view.update()},t.prototype.onPointerUp_=function(t){this.value.rawValue=o.default.map(t.px,0,1,this.minValue_,this.maxValue_),this.view.update()},t}();e.default=u},"./src/main/js/controller/input/sv-palette.ts":
/*!****************************************************!*\
  !*** ./src/main/js/controller/input/sv-palette.ts ***!
  \****************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../misc/color-model */"./src/main/js/misc/color-model.ts"),r=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),o=n(/*! ../../misc/pointer-handler */"./src/main/js/misc/pointer-handler.ts"),a=n(/*! ../../model/color */"./src/main/js/model/color.ts"),s=n(/*! ../../view/input/sv-palette */"./src/main/js/view/input/sv-palette.ts"),l=function(){function t(t,e){this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.view=new s.default(t,{value:this.value}),this.ptHandler_=new o.default(t,this.view.canvasElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_)}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.handlePointerEvent_=function(t){var e=r.default.map(t.px,0,1,0,100),n=r.default.map(t.py,0,1,100,0),o=this.value.rawValue,s=i.rgbToHsv.apply(i,o.getComponents())[0];this.value.rawValue=new(a.default.bind.apply(a.default,[void 0].concat(i.hsvToRgb(s,e,n)))),this.view.update()},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t)},t}();e.default=l},"./src/main/js/controller/input/text.ts":
/*!**********************************************!*\
  !*** ./src/main/js/controller/input/text.ts ***!
  \**********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../misc/type-util */"./src/main/js/misc/type-util.ts"),r=n(/*! ../../view/input/text */"./src/main/js/view/input/text.ts"),o=function(){function t(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.view=new r.default(t,{formatter:e.formatter,value:this.value}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.onInputChange_=function(t){var e=this,n=i.default.forceCast(t.currentTarget).value;i.default.ifNotEmpty(this.parser_(n),(function(t){e.value.rawValue=t})),this.view.update()},t}();e.default=o},"./src/main/js/controller/monitor-binding.ts":
/*!***************************************************!*\
  !*** ./src/main/js/controller/monitor-binding.ts ***!
  \***************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../view/labeled */"./src/main/js/view/labeled.ts"),r=function(){function t(t,e){this.binding=e.binding,this.controller=e.controller,this.view=new i.default(t,{label:e.label,view:this.controller.view})}return t.prototype.dispose=function(){this.binding.dispose(),this.controller.dispose(),this.view.dispose()},t}();e.default=r},"./src/main/js/controller/monitor/graph.ts":
/*!*************************************************!*\
  !*** ./src/main/js/controller/monitor/graph.ts ***!
  \*************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),r=n(/*! ../../model/graph-cursor */"./src/main/js/model/graph-cursor.ts"),o=n(/*! ../../view/monitor/graph */"./src/main/js/view/monitor/graph.ts"),a=function(){function t(t,e){this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.value=e.value,this.cursor_=new r.default,this.view=new o.default(t,{cursor:this.cursor_,formatter:e.formatter,maxValue:e.maxValue,minValue:e.minValue,value:this.value}),this.view.graphElement.addEventListener("mouseleave",this.onGraphMouseLeave_),this.view.graphElement.addEventListener("mousemove",this.onGraphMouseMove_)}return t.prototype.dispose=function(){this.view.dispose()},t.prototype.onGraphMouseLeave_=function(){this.cursor_.index=-1},t.prototype.onGraphMouseMove_=function(t){var e=this.view.graphElement.getBoundingClientRect(),n=t.offsetX;this.cursor_.index=Math.floor(i.default.map(n,0,e.width,0,this.value.totalCount))},t}();e.default=a},"./src/main/js/controller/monitor/multi-log.ts":
/*!*****************************************************!*\
  !*** ./src/main/js/controller/monitor/multi-log.ts ***!
  \*****************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../view/monitor/multi-log */"./src/main/js/view/monitor/multi-log.ts"),r=function(){function t(t,e){this.value=e.value,this.view=new i.default(t,{formatter:e.formatter,value:this.value})}return t.prototype.dispose=function(){this.view.dispose()},t}();e.default=r},"./src/main/js/controller/monitor/single-log.ts":
/*!******************************************************!*\
  !*** ./src/main/js/controller/monitor/single-log.ts ***!
  \******************************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../../view/monitor/single-log */"./src/main/js/view/monitor/single-log.ts"),r=function(){function t(t,e){this.value=e.value,this.view=new i.default(t,{formatter:e.formatter,value:this.value})}return t.prototype.dispose=function(){this.view.dispose()},t}();e.default=r},"./src/main/js/controller/root.ts":
/*!****************************************!*\
  !*** ./src/main/js/controller/root.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=n(/*! ../misc/type-util */"./src/main/js/misc/type-util.ts"),o=n(/*! ../model/folder */"./src/main/js/model/folder.ts"),a=n(/*! ../model/list */"./src/main/js/model/list.ts"),s=n(/*! ../view/root */"./src/main/js/view/root.ts"),l=n(/*! ./folder */"./src/main/js/controller/folder.ts"),c=n(/*! ./input-binding */"./src/main/js/controller/input-binding.ts"),u=n(/*! ./monitor-binding */"./src/main/js/controller/monitor-binding.ts"),h=function(){function t(t,e){this.onFolderChange_=this.onFolderChange_.bind(this),this.onRootFolderChange_=this.onRootFolderChange_.bind(this),this.onTitleClick_=this.onTitleClick_.bind(this),this.onUiControllerListAppend_=this.onUiControllerListAppend_.bind(this),this.onInputChange_=this.onInputChange_.bind(this),this.onMonitorUpdate_=this.onMonitorUpdate_.bind(this),this.emitter=new i.default,this.folder=function(t){return t.title?new o.default(t.title,r.default.getOrDefault(t.expanded,!0)):null}(e),this.ucList_=new a.default,this.ucList_.emitter.on("append",this.onUiControllerListAppend_),this.doc_=t,this.view=new s.default(this.doc_,{folder:this.folder}),this.view.titleElement&&this.view.titleElement.addEventListener("click",this.onTitleClick_),this.folder&&this.folder.emitter.on("change",this.onRootFolderChange_)}return Object.defineProperty(t.prototype,"document",{get:function(){return this.doc_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uiControllerList",{get:function(){return this.ucList_},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.view.dispose()},t.prototype.onUiControllerListAppend_=function(t){if(t instanceof c.default)(e=t.binding.value.emitter).on("change",this.onInputChange_);else if(t instanceof u.default)(e=t.binding.value.emitter).on("update",this.onMonitorUpdate_);else if(t instanceof l.default){var e;(e=t.emitter).on("fold",this.onFolderChange_),e.on("inputchange",this.onInputChange_),e.on("monitorupdate",this.onMonitorUpdate_)}this.view.containerElement.appendChild(t.view.element)},t.prototype.onTitleClick_=function(){this.folder&&(this.folder.expanded=!this.folder.expanded)},t.prototype.onInputChange_=function(t){this.emitter.emit("inputchange",[t])},t.prototype.onMonitorUpdate_=function(t){this.emitter.emit("monitorupdate",[t])},t.prototype.onFolderChange_=function(){this.emitter.emit("fold")},t.prototype.onRootFolderChange_=function(){this.emitter.emit("fold")},t}();e.default=h},"./src/main/js/controller/separator.ts":
/*!*********************************************!*\
  !*** ./src/main/js/controller/separator.ts ***!
  \*********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../view/separator */"./src/main/js/view/separator.ts"),r=function(){function t(t){this.view=new i.default(t)}return t.prototype.dispose=function(){this.view.dispose()},t}();e.default=r},"./src/main/js/controller/ui-util.ts":
/*!*******************************************!*\
  !*** ./src/main/js/controller/ui-util.ts ***!
  \*******************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ./folder */"./src/main/js/controller/folder.ts");e.findControllers=function t(e,n){return e.reduce((function(e,r){return r instanceof i.default&&e.push.apply(e,t(r.uiControllerList.items,n)),r instanceof n&&e.push(r),e}),[])}},"./src/main/js/converter/boolean.ts":
/*!******************************************!*\
  !*** ./src/main/js/converter/boolean.ts ***!
  \******************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromMixed=function(t){return"false"!==t&&!!t},e.toString=function(t){return String(t)}},"./src/main/js/converter/color.ts":
/*!****************************************!*\
  !*** ./src/main/js/converter/color.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/number-util */"./src/main/js/misc/number-util.ts"),r=n(/*! ../model/color */"./src/main/js/model/color.ts"),o=n(/*! ../parser/color */"./src/main/js/parser/color.ts");e.fromMixed=function(t){if("string"==typeof t){var e=o.default(t);if(e)return e}return new r.default(0,0,0)},e.toString=function(t){return"#"+t.getComponents().map((function(t){var e=i.default.constrain(Math.floor(t),0,255).toString(16);return 1===e.length?"0"+e:e})).join("")}},"./src/main/js/converter/number.ts":
/*!*****************************************!*\
  !*** ./src/main/js/converter/number.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../parser/number */"./src/main/js/parser/number.ts");e.fromMixed=function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=i.default(t);if(null!=e)return e}return 0},e.toString=function(t){return String(t)}},"./src/main/js/converter/string.ts":
/*!*****************************************!*\
  !*** ./src/main/js/converter/string.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromMixed=function(t){return String(t)},e.toString=function(t){return t}},"./src/main/js/formatter/boolean.ts":
/*!******************************************!*\
  !*** ./src/main/js/formatter/boolean.ts ***!
  \******************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../converter/boolean */"./src/main/js/converter/boolean.ts"),r=function(){function t(){}return t.prototype.format=function(t){return i.toString(t)},t}();e.default=r},"./src/main/js/formatter/color.ts":
/*!****************************************!*\
  !*** ./src/main/js/formatter/color.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../converter/color */"./src/main/js/converter/color.ts"),r=n(/*! ../misc/number-util */"./src/main/js/misc/number-util.ts"),o=function(){function t(){}return t.rgb=function(t,e,n){return"rgb("+[r.default.constrain(Math.floor(t),0,255),r.default.constrain(Math.floor(e),0,255),r.default.constrain(Math.floor(n),0,255)].join(", ")+")"},t.hsl=function(t,e,n){return"hsl("+[(Math.floor(t)%360+360)%360,r.default.constrain(Math.floor(e),0,100)+"%",r.default.constrain(Math.floor(n),0,100)+"%"].join(", ")+")"},t.prototype.format=function(t){return i.toString(t)},t}();e.default=o},"./src/main/js/formatter/number.ts":
/*!*****************************************!*\
  !*** ./src/main/js/formatter/number.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.digits_=t}return Object.defineProperty(t.prototype,"digits",{get:function(){return this.digits_},enumerable:!0,configurable:!0}),t.prototype.format=function(t){return t.toFixed(this.digits_)},t}();e.default=i},"./src/main/js/formatter/string.ts":
/*!*****************************************!*\
  !*** ./src/main/js/formatter/string.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.format=function(t){return t},t}();e.default=i},"./src/main/js/index.ts":
/*!******************************!*\
  !*** ./src/main/js/index.ts ***!
  \******************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../sass/bundle.scss */"./src/main/sass/bundle.scss"),a=function(t){function e(e){var n=t.call(this,e)||this;return function(t){if(!t.querySelector("style[data-for=tweakpane]")){var e=t.createElement("style");e.dataset.for="tweakpane",e.textContent=o.toString(),t.head&&t.head.appendChild(e)}}(n.document),n}return r(e,t),e}(n(/*! ./tweakpane-without-style */"./src/main/js/tweakpane-without-style.ts").default);e.default=a},"./src/main/js/misc/class-name.ts":
/*!****************************************!*\
  !*** ./src/main/js/misc/class-name.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="tp",r={"":"v",input:"iv",monitor:"mv"};e.default=function(t,e){var n=r[e||""];return function(e,r){return[i,"-",t,n,e?"_"+e:"",r?"-"+r:""].join("")}}},"./src/main/js/misc/color-model.ts":
/*!*****************************************!*\
  !*** ./src/main/js/misc/color-model.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ./number-util */"./src/main/js/misc/number-util.ts");e.rgbToHsl=function(t,e,n){var r=i.default.constrain(t/255,0,1),o=i.default.constrain(e/255,0,1),a=i.default.constrain(n/255,0,1),s=Math.max(r,o,a),l=Math.min(r,o,a),c=s-l,u=0,h=0,p=(l+s)/2;return 0!==c&&(h=p>.5?c/(2-l-s):c/(s+l),u=(u=r===s?(o-a)/c:o===s?2+(a-r)/c:4+(r-o)/c)/6+(u<0?1:0)),[360*u,100*h,100*p]},e.hslToRgb=function(t,e,n){var r,o,a,s,l,c,u,h,p,f=(t%360+360)%360,d=i.default.constrain(e/100,0,1),y=i.default.constrain(n/100,0,1),m=(1-Math.abs(2*y-1))*d,v=m*(1-Math.abs(f/60%2-1)),g=y-m/2;return f>=0&&f<60?(u=(r=[m,v,0])[0],h=r[1],p=r[2]):f>=60&&f<120?(u=(o=[v,m,0])[0],h=o[1],p=o[2]):f>=120&&f<180?(u=(a=[0,m,v])[0],h=a[1],p=a[2]):f>=180&&f<240?(u=(s=[0,v,m])[0],h=s[1],p=s[2]):f>=240&&f<300?(u=(l=[v,0,m])[0],h=l[1],p=l[2]):(u=(c=[m,0,v])[0],h=c[1],p=c[2]),[255*(u+g),255*(h+g),255*(p+g)]},e.rgbToHsv=function(t,e,n){var r=i.default.constrain(t/255,0,1),o=i.default.constrain(e/255,0,1),a=i.default.constrain(n/255,0,1),s=Math.max(r,o,a),l=s-Math.min(r,o,a);return[0===l?0:s===r?((o-a)/l%6+6)%6*60:s===o?60*((a-r)/l+2):60*((r-o)/l+4),100*(0===s?0:l/s),100*s]},e.hsvToRgb=function(t,e,n){var r,o,a,s,l,c,u,h,p,f=(t%360+360)%360,d=i.default.constrain(e/100,0,1),y=i.default.constrain(n/100,0,1),m=y*d,v=m*(1-Math.abs(f/60%2-1)),g=y-m;return f>=0&&f<60?(u=(r=[m,v,0])[0],h=r[1],p=r[2]):f>=60&&f<120?(u=(o=[v,m,0])[0],h=o[1],p=o[2]):f>=120&&f<180?(u=(a=[0,m,v])[0],h=a[1],p=a[2]):f>=180&&f<240?(u=(s=[0,v,m])[0],h=s[1],p=s[2]):f>=240&&f<300?(u=(l=[v,0,m])[0],h=l[1],p=l[2]):(u=(c=[m,0,v])[0],h=c[1],p=c[2]),[255*(u+g),255*(h+g),255*(p+g)]}},"./src/main/js/misc/disposing-util.ts":
/*!********************************************!*\
  !*** ./src/main/js/misc/disposing-util.ts ***!
  \********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.disposeElement=function(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}},"./src/main/js/misc/dom-util.ts":
/*!**************************************!*\
  !*** ./src/main/js/misc/dom-util.ts ***!
  \**************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ./type-util */"./src/main/js/misc/type-util.ts");e.forceReflow=function(t){t.offsetHeight},e.disableTransitionTemporarily=function(t,e){var n=t.style.transition;t.style.transition="none",e(),t.style.transition=n},e.supportsTouch=function(t){return void 0!==t.ontouchstart},e.getWindowDocument=function(){return i.default.forceCast(new Function("return this")()).document},e.getCanvasContext=function(e){return t.browser?e.getContext("2d"):null}}).call(this,n(/*! ./../../../../node_modules/process/browser.js */"./node_modules/process/browser.js"))},"./src/main/js/misc/emitter.ts":
/*!*************************************!*\
  !*** ./src/main/js/misc/emitter.ts ***!
  \*************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.observers_={}}return t.prototype.on=function(t,e){var n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this},t.prototype.off=function(t,e){var n=this.observers_[t];return n&&(this.observers_[t]=n.filter((function(t){return t.handler!==e}))),this},t.prototype.emit=function(t,e){var n=this.observers_[t];n&&n.forEach((function(t){var n=e||[];t.handler.apply(t,n)}))},t}();e.default=i},"./src/main/js/misc/number-util.ts":
/*!*****************************************!*\
  !*** ./src/main/js/misc/number-util.ts ***!
  \*****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={map:function(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)},getDecimalDigits:function(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length},constrain:function(t,e,n){return Math.min(Math.max(t,e),n)}};e.default=i},"./src/main/js/misc/pane-error.ts":
/*!****************************************!*\
  !*** ./src/main/js/misc/pane-error.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.message=function(t){return"alreadydisposed"===t.type?"View has been already disposed":"emptyvalue"===t.type?"Value is empty for "+t.context.key:"invalidparams"===t.type?"Invalid parameters for "+t.context.name:"nomatchingcontroller"===t.type?"No matching controller for "+t.context.key:"shouldneverhappen"===t.type?"This error should never happen":"Unexpected error"}(t),this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}return t.alreadyDisposed=function(){return new t({type:"alreadydisposed"})},t.shouldNeverHappen=function(){return new t({type:"shouldneverhappen"})},t}();e.default=i,i.prototype=Object.create(Error.prototype),i.prototype.constructor=i},"./src/main/js/misc/pointer-handler.ts":
/*!*********************************************!*\
  !*** ./src/main/js/misc/pointer-handler.ts ***!
  \*********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ./dom-util */"./src/main/js/misc/dom-util.ts"),r=n(/*! ./emitter */"./src/main/js/misc/emitter.ts"),o=function(){function t(t,e){this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.document=t,this.element=e,this.emitter=new r.default,this.pressed_=!1,i.supportsTouch(this.document)?(e.addEventListener("touchstart",this.onTouchStart_),e.addEventListener("touchmove",this.onTouchMove_)):(e.addEventListener("mousedown",this.onMouseDown_),this.document.addEventListener("mousemove",this.onDocumentMouseMove_),this.document.addEventListener("mouseup",this.onDocumentMouseUp_))}return t.prototype.computePosition_=function(t,e){var n=this.element.getBoundingClientRect();return{px:t/n.width,py:e/n.height}},t.prototype.onMouseDown_=function(t){t.preventDefault(),this.pressed_=!0,this.emitter.emit("down",[this.computePosition_(t.offsetX,t.offsetY)])},t.prototype.onDocumentMouseMove_=function(t){if(this.pressed_){var e=this.document.defaultView,n=this.element.getBoundingClientRect();this.emitter.emit("move",[this.computePosition_(t.pageX-((e&&e.scrollX||0)+n.left),t.pageY-((e&&e.scrollY||0)+n.top))])}},t.prototype.onDocumentMouseUp_=function(t){if(this.pressed_){this.pressed_=!1;var e=this.document.defaultView,n=this.element.getBoundingClientRect();this.emitter.emit("up",[this.computePosition_(t.pageX-((e&&e.scrollX||0)+n.left),t.pageY-((e&&e.scrollY||0)+n.top))])}},t.prototype.onTouchStart_=function(t){t.preventDefault();var e=t.targetTouches[0],n=this.element.getBoundingClientRect();this.emitter.emit("down",[this.computePosition_(e.clientX-n.left,e.clientY-n.top)])},t.prototype.onTouchMove_=function(t){var e=t.targetTouches[0],n=this.element.getBoundingClientRect();this.emitter.emit("move",[this.computePosition_(e.clientX-n.left,e.clientY-n.top)])},t}();e.default=o},"./src/main/js/misc/ticker/interval.ts":
/*!*********************************************!*\
  !*** ./src/main/js/misc/ticker/interval.ts ***!
  \*********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../emitter */"./src/main/js/misc/emitter.ts"),r=function(){function t(t,e){var n=this;if(this.onTick_=this.onTick_.bind(this),this.onWindowBlur_=this.onWindowBlur_.bind(this),this.onWindowFocus_=this.onWindowFocus_.bind(this),this.active_=!0,this.doc_=t,this.emitter=new i.default,e<=0)this.id_=null;else{var r=this.doc_.defaultView;r&&(this.id_=r.setInterval((function(){n.active_&&n.onTick_()}),e))}}return t.prototype.dispose=function(){if(null!==this.id_){var t=this.doc_.defaultView;t&&t.clearInterval(this.id_)}this.id_=null},t.prototype.onTick_=function(){this.emitter.emit("tick")},t.prototype.onWindowBlur_=function(){this.active_=!1},t.prototype.onWindowFocus_=function(){this.active_=!0},t}();e.default=r},"./src/main/js/misc/type-util.ts":
/*!***************************************!*\
  !*** ./src/main/js/misc/type-util.ts ***!
  \***************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={forceCast:function(t){return t},getOrDefault:function(t,e){return null!=t?t:e},ifNotEmpty:function(t,e,n){null!=t?e(t):n&&n()}};e.default=i},"./src/main/js/model/button.ts":
/*!*************************************!*\
  !*** ./src/main/js/model/button.ts ***!
  \*************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=function(){function t(t){this.emitter=new i.default,this.title=t}return t.prototype.click=function(){this.emitter.emit("click")},t}();e.default=r},"./src/main/js/model/color.ts":
/*!************************************!*\
  !*** ./src/main/js/model/color.ts ***!
  \************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=n(/*! ../misc/number-util */"./src/main/js/misc/number-util.ts");function o(t){return r.default.constrain(t,0,255)}var a=function(){function t(t,e,n){this.emitter=new i.default,this.comps_=[o(t),o(e),o(n)]}return t.prototype.getComponents=function(){return this.comps_},t.prototype.toObject=function(){return{r:this.comps_[0],g:this.comps_[1],b:this.comps_[2]}},t}();e.default=a},"./src/main/js/model/foldable.ts":
/*!***************************************!*\
  !*** ./src/main/js/model/foldable.ts ***!
  \***************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=function(){function t(){this.emitter=new i.default,this.expanded_=!1}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this.expanded_},set:function(t){this.expanded_!==t&&(this.expanded_=t,this.emitter.emit("change"))},enumerable:!0,configurable:!0}),t}();e.default=r},"./src/main/js/model/folder.ts":
/*!*************************************!*\
  !*** ./src/main/js/model/folder.ts ***!
  \*************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=function(){function t(t,e){this.emitter=new i.default,this.expanded_=e,this.expandedHeight_=null,this.title=t}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this.expanded_},set:function(t){this.expanded_!==t&&(this.expanded_=t,this.emitter.emit("change"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandedHeight",{get:function(){return this.expandedHeight_},set:function(t){this.expandedHeight_!==t&&(this.expandedHeight_=t,this.emitter.emit("change"))},enumerable:!0,configurable:!0}),t}();e.default=r},"./src/main/js/model/graph-cursor.ts":
/*!*******************************************!*\
  !*** ./src/main/js/model/graph-cursor.ts ***!
  \*******************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=function(){function t(){this.emitter=new i.default,this.index_=-1}return Object.defineProperty(t.prototype,"index",{get:function(){return this.index_},set:function(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",[t]))},enumerable:!0,configurable:!0}),t}();e.default=r},"./src/main/js/model/input-value.ts":
/*!******************************************!*\
  !*** ./src/main/js/model/input-value.ts ***!
  \******************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=function(){function t(t,e){this.constraint_=e,this.emitter=new i.default,this.rawValue_=t}return t.equalsValue=function(t,e){return t===e},Object.defineProperty(t.prototype,"constraint",{get:function(){return this.constraint_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawValue",{get:function(){return this.rawValue_},set:function(e){var n=this.constraint_?this.constraint_.constrain(e):e;!t.equalsValue(this.rawValue_,n)&&(this.rawValue_=n,this.emitter.emit("change",[n]))},enumerable:!0,configurable:!0}),t}();e.default=r},"./src/main/js/model/list.ts":
/*!***********************************!*\
  !*** ./src/main/js/model/list.ts ***!
  \***********************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=function(){function t(){this.emitter=new i.default,this.items_=[]}return Object.defineProperty(t.prototype,"items",{get:function(){return this.items_},enumerable:!0,configurable:!0}),t.prototype.append=function(t){this.items_.push(t),this.emitter.emit("append",[t])},t}();e.default=r},"./src/main/js/model/monitor-value.ts":
/*!********************************************!*\
  !*** ./src/main/js/model/monitor-value.ts ***!
  \********************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/emitter */"./src/main/js/misc/emitter.ts"),r=function(){function t(t){this.emitter=new i.default,this.rawValues_=[],this.totalCount_=t}return Object.defineProperty(t.prototype,"rawValues",{get:function(){return this.rawValues_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalCount",{get:function(){return this.totalCount_},enumerable:!0,configurable:!0}),t.prototype.append=function(t){this.rawValues_.push(t),this.rawValues_.length>this.totalCount_&&this.rawValues_.splice(0,this.rawValues_.length-this.totalCount_),this.emitter.emit("update",[t])},t}();e.default=r},"./src/main/js/model/target.ts":
/*!*************************************!*\
  !*** ./src/main/js/model/target.ts ***!
  \*************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/type-util */"./src/main/js/misc/type-util.ts"),r=function(){function t(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=i.default.getOrDefault(n,e)}return Object.defineProperty(t.prototype,"key",{get:function(){return this.key_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"presetKey",{get:function(){return this.presetKey_},enumerable:!0,configurable:!0}),t.prototype.read=function(){return this.obj_[this.key_]},t.prototype.write=function(t){this.obj_[this.key_]=t},t}();e.default=r},"./src/main/js/parser/color.ts":
/*!*************************************!*\
  !*** ./src/main/js/parser/color.ts ***!
  \*************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../model/color */"./src/main/js/model/color.ts"),r=[function(t){var e=t.match(/^#?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?new i.default(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):null},function(t){var e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);return e?new i.default(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)):null}];e.default=function(t){return r.reduce((function(e,n){return e||n(t)}),null)}},"./src/main/js/parser/number.ts":
/*!**************************************!*\
  !*** ./src/main/js/parser/number.ts ***!
  \**************************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=parseFloat(t);return isNaN(e)?null:e}},"./src/main/js/tweakpane-without-style.ts":
/*!************************************************!*\
  !*** ./src/main/js/tweakpane-without-style.ts ***!
  \************************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ./api/root */"./src/main/js/api/root.ts"),a=n(/*! ./controller/root */"./src/main/js/controller/root.ts"),s=n(/*! ./misc/class-name */"./src/main/js/misc/class-name.ts"),l=n(/*! ./misc/dom-util */"./src/main/js/misc/dom-util.ts"),c=n(/*! ./misc/pane-error */"./src/main/js/misc/pane-error.ts"),u=n(/*! ./misc/type-util */"./src/main/js/misc/type-util.ts"),h=function(t){function e(e){var n=this,i=e||{},r=u.default.getOrDefault(i.document,l.getWindowDocument()),o=new a.default(r,{title:i.title});return(n=t.call(this,o)||this).containerElem_=i.container||function(t){var e=t.createElement("div");return e.classList.add(s.default("dfw")()),t.body&&t.body.appendChild(e),e}(r),n.containerElem_.appendChild(n.element),n.doc_=r,n.usesDefaultWrapper_=!i.container,n}return r(e,t),e.prototype.dispose=function(){var e=this.containerElem_;if(!e)throw c.default.alreadyDisposed();if(this.usesDefaultWrapper_){var n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"document",{get:function(){if(!this.doc_)throw c.default.alreadyDisposed();return this.doc_},enumerable:!0,configurable:!0}),e}(o.default);e.default=h},"./src/main/js/view/button.ts":
/*!************************************!*\
  !*** ./src/main/js/view/button.ts ***!
  \************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../misc/pane-error */"./src/main/js/misc/pane-error.ts"),l=n(/*! ./view */"./src/main/js/view/view.ts"),c=o.default("btn"),u=function(t){function e(e,n){var i=t.call(this,e)||this;i.button=n.button,i.element.classList.add(c());var r=e.createElement("button");return r.classList.add(c("b")),r.textContent=i.button.title,i.element.appendChild(r),i.buttonElem_=r,i}return r(e,t),Object.defineProperty(e.prototype,"buttonElement",{get:function(){if(!this.buttonElem_)throw s.default.alreadyDisposed();return this.buttonElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.buttonElem_=a.disposeElement(this.buttonElem_),t.prototype.dispose.call(this)},e}(l.default);e.default=u},"./src/main/js/view/folder.ts":
/*!************************************!*\
  !*** ./src/main/js/view/folder.ts ***!
  \************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../misc/pane-error */"./src/main/js/misc/pane-error.ts"),l=n(/*! ../misc/type-util */"./src/main/js/misc/type-util.ts"),c=n(/*! ./view */"./src/main/js/view/view.ts"),u=o.default("fld"),h=function(t){function e(e,n){var i=t.call(this,e)||this;i.onFolderChange_=i.onFolderChange_.bind(i),i.folder_=n.folder,i.folder_.emitter.on("change",i.onFolderChange_),i.element.classList.add(u());var r=e.createElement("button");r.classList.add(u("t")),r.textContent=i.folder_.title,i.element.appendChild(r),i.titleElem_=r;var o=e.createElement("div");o.classList.add(u("m")),i.titleElem_.appendChild(o);var a=e.createElement("div");return a.classList.add(u("c")),i.element.appendChild(a),i.containerElem_=a,i.applyModel_(),i}return r(e,t),Object.defineProperty(e.prototype,"titleElement",{get:function(){if(!this.titleElem_)throw s.default.alreadyDisposed();return this.titleElem_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerElement",{get:function(){if(!this.containerElem_)throw s.default.alreadyDisposed();return this.containerElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.containerElem_=a.disposeElement(this.containerElem_),this.titleElem_=a.disposeElement(this.titleElem_),t.prototype.dispose.call(this)},e.prototype.applyModel_=function(){var t=this.containerElem_;if(!t)throw s.default.alreadyDisposed();var e=this.folder_.expanded,n=u(void 0,"expanded");e?this.element.classList.add(n):this.element.classList.remove(n),l.default.ifNotEmpty(this.folder_.expandedHeight,(function(n){var i=e?n:0;t.style.height=i+"px"}),(function(){t.style.height=e?"auto":"0px"}))},e.prototype.onFolderChange_=function(){this.applyModel_()},e}(c.default);e.default=h},"./src/main/js/view/input/checkbox.ts":
/*!********************************************!*\
  !*** ./src/main/js/view/input/checkbox.ts ***!
  \********************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),l=n(/*! ../view */"./src/main/js/view/view.ts"),c=o.default("ckb","input"),u=function(t){function e(e,n){var i=t.call(this,e)||this;i.onValueChange_=i.onValueChange_.bind(i),i.element.classList.add(c());var r=e.createElement("label");r.classList.add(c("l")),i.element.appendChild(r);var o=e.createElement("input");o.classList.add(c("i")),o.type="checkbox",r.appendChild(o),i.inputElem_=o;var a=e.createElement("div");return a.classList.add(c("m")),r.appendChild(a),n.value.emitter.on("change",i.onValueChange_),i.value=n.value,i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"inputElement",{get:function(){if(!this.inputElem_)throw s.default.alreadyDisposed();return this.inputElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.inputElem_=a.disposeElement(this.inputElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){if(!this.inputElem_)throw s.default.alreadyDisposed();this.inputElem_.checked=this.value.rawValue},e.prototype.onValueChange_=function(){this.update()},e}(l.default);e.default=u},"./src/main/js/view/input/color-picker.ts":
/*!************************************************!*\
  !*** ./src/main/js/view/input/color-picker.ts ***!
  \************************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../view */"./src/main/js/view/view.ts"),s=o.default("clp","input"),l=function(t){function e(e,n){var i=t.call(this,e)||this;i.onFoldableChange_=i.onFoldableChange_.bind(i),i.onValueChange_=i.onValueChange_.bind(i),i.value=n.value,i.value.emitter.on("change",i.onValueChange_),i.foldable=n.foldable,i.foldable.emitter.on("change",i.onFoldableChange_),i.element.classList.add(s());var r=e.createElement("div");r.classList.add(s("pl"));var o=e.createElement("div");o.classList.add(s("sv")),i.svPaletteView_=n.svPaletteInputView,o.appendChild(i.svPaletteView_.element),r.appendChild(o);var a=e.createElement("div");a.classList.add(s("h")),i.hPaletteView_=n.hPaletteInputView,a.appendChild(i.hPaletteView_.element),r.appendChild(a),i.element.appendChild(r);var l=e.createElement("div");return l.classList.add(s("is")),i.rgbInputViews_=n.rgbInputViews,i.rgbInputViews_.forEach((function(t,n){var i=e.createElement("div");i.classList.add(s("iw"));var r=e.createElement("label");r.classList.add(s("il")),r.textContent=["R","G","B"][n],i.appendChild(r),i.appendChild(t.element),l.appendChild(i)})),i.element.appendChild(l),i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"allFocusableElements",{get:function(){return[].concat(this.hPaletteView_.canvasElement,this.svPaletteView_.canvasElement,this.rgbInputViews_.map((function(t){return t.inputElement})))},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.hPaletteView_.dispose(),this.rgbInputViews_=[],this.svPaletteView_.dispose(),t.prototype.dispose.call(this)},e.prototype.update=function(){this.foldable.expanded?this.element.classList.add(s(void 0,"expanded")):this.element.classList.remove(s(void 0,"expanded")),this.rgbInputViews_.forEach((function(t){t.update()}))},e.prototype.onValueChange_=function(){this.update()},e.prototype.onFoldableChange_=function(){this.update()},e}(a.default);e.default=l},"./src/main/js/view/input/color-swatch-text.ts":
/*!*****************************************************!*\
  !*** ./src/main/js/view/input/color-swatch-text.ts ***!
  \*****************************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../view */"./src/main/js/view/view.ts"),s=o.default("cswtxt","input"),l=function(t){function e(e,n){var i=t.call(this,e)||this;i.element.classList.add(s());var r=e.createElement("div");r.classList.add(s("s")),i.swatchInputView_=n.swatchInputView,r.appendChild(i.swatchInputView_.element),i.element.appendChild(r);var o=e.createElement("div");return o.classList.add(s("t")),i.textInputView_=n.textInputView,o.appendChild(i.textInputView_.element),i.element.appendChild(o),i}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.textInputView_.value},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.swatchInputView_.dispose(),this.textInputView_.dispose(),t.prototype.dispose.call(this)},e.prototype.update=function(){this.swatchInputView_.update(),this.textInputView_.update()},e}(a.default);e.default=l},"./src/main/js/view/input/color-swatch.ts":
/*!************************************************!*\
  !*** ./src/main/js/view/input/color-swatch.ts ***!
  \************************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../converter/color */"./src/main/js/converter/color.ts"),a=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),s=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),l=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),c=n(/*! ../view */"./src/main/js/view/view.ts"),u=a.default("csw","input"),h=function(t){function e(e,n){var i=t.call(this,e)||this;if(null===i.element)throw l.default.alreadyDisposed();i.onValueChange_=i.onValueChange_.bind(i),n.value.emitter.on("change",i.onValueChange_),i.value=n.value,i.element.classList.add(u());var r=e.createElement("div");r.classList.add(u("sw")),i.element.appendChild(r),i.swatchElem_=r;var o=e.createElement("button");o.classList.add(u("b")),i.element.appendChild(o),i.buttonElem_=o;var a=e.createElement("div");return a.classList.add(u("p")),i.pickerView_=n.pickerInputView,a.appendChild(i.pickerView_.element),i.element.appendChild(a),i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"buttonElement",{get:function(){if(null===this.buttonElem_)throw l.default.alreadyDisposed();return this.buttonElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.pickerView_.dispose(),this.buttonElem_=s.disposeElement(this.buttonElem_),this.swatchElem_=s.disposeElement(this.swatchElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){if(!this.swatchElem_)throw l.default.alreadyDisposed();var t=this.value.rawValue;this.swatchElem_.style.backgroundColor=o.toString(t)},e.prototype.onValueChange_=function(){this.update()},e}(c.default);e.default=h},"./src/main/js/view/input/h-palette.ts":
/*!*********************************************!*\
  !*** ./src/main/js/view/input/h-palette.ts ***!
  \*********************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../formatter/color */"./src/main/js/formatter/color.ts"),a=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),s=n(/*! ../../misc/color-model */"./src/main/js/misc/color-model.ts"),l=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),c=n(/*! ../../misc/dom-util */"./src/main/js/misc/dom-util.ts"),u=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),h=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),p=n(/*! ../view */"./src/main/js/view/view.ts"),f=a.default("hpl","input"),d=function(t){function e(e,n){var i=t.call(this,e)||this;i.onValueChange_=i.onValueChange_.bind(i),i.value=n.value,i.value.emitter.on("change",i.onValueChange_),i.element.classList.add(f());var r=e.createElement("canvas");r.classList.add(f("c")),r.tabIndex=-1,i.element.appendChild(r),i.canvasElem_=r;var o=e.createElement("div");return o.classList.add(f("m")),i.element.appendChild(o),i.markerElem_=o,i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"canvasElement",{get:function(){if(!this.canvasElem_)throw h.default.alreadyDisposed();return this.canvasElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.canvasElem_=l.disposeElement(this.canvasElem_),this.markerElem_=l.disposeElement(this.markerElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){if(!this.markerElem_)throw h.default.alreadyDisposed();var t=c.getCanvasContext(this.canvasElement);if(t){for(var e=this.canvasElement.width,n=this.canvasElement.height,i=Math.ceil(n/64),r=0;r<64;r++){var a=u.default.map(r,0,63,0,360),l=s.hsvToRgb(a,100,100);t.fillStyle=o.default.rgb.apply(o.default,l);var p=Math.floor(u.default.map(r,0,63,0,n-i));t.fillRect(0,p,e,i)}var f=this.value.rawValue,d=s.rgbToHsv.apply(s,f.getComponents()),y=u.default.map(d[0],0,360,0,100);this.markerElem_.style.top=y+"%"}},e.prototype.onValueChange_=function(){this.update()},e}(p.default);e.default=d},"./src/main/js/view/input/list.ts":
/*!****************************************!*\
  !*** ./src/main/js/view/input/list.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),l=n(/*! ../view */"./src/main/js/view/view.ts"),c=o.default("lst","input"),u=function(t){function e(e,n){var i=t.call(this,e)||this;i.onValueChange_=i.onValueChange_.bind(i),i.element.classList.add(c()),i.stringifyValue_=n.stringifyValue;var r=e.createElement("select");r.classList.add(c("s")),n.options.forEach((function(t,n){var o=e.createElement("option");o.dataset.index=String(n),o.textContent=t.text,o.value=i.stringifyValue_(t.value),r.appendChild(o)})),i.element.appendChild(r),i.selectElem_=r;var o=e.createElement("div");return o.classList.add(c("m")),i.element.appendChild(o),n.value.emitter.on("change",i.onValueChange_),i.value=n.value,i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"selectElement",{get:function(){if(!this.selectElem_)throw s.default.alreadyDisposed();return this.selectElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.selectElem_=a.disposeElement(this.selectElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){if(!this.selectElem_)throw s.default.alreadyDisposed();this.selectElem_.value=this.stringifyValue_(this.value.rawValue)},e.prototype.onValueChange_=function(){this.update()},e}(l.default);e.default=u},"./src/main/js/view/input/slider-text.ts":
/*!***********************************************!*\
  !*** ./src/main/js/view/input/slider-text.ts ***!
  \***********************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../view */"./src/main/js/view/view.ts"),s=o.default("sldtxt","input"),l=function(t){function e(e,n){var i=t.call(this,e)||this;i.element.classList.add(s());var r=e.createElement("div");r.classList.add(s("s")),i.sliderInputView_=n.sliderInputView,r.appendChild(i.sliderInputView_.element),i.element.appendChild(r);var o=e.createElement("div");return o.classList.add(s("t")),i.textInputView_=n.textInputView,o.appendChild(i.textInputView_.element),i.element.appendChild(o),i}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.sliderInputView_.value},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.sliderInputView_.dispose(),this.textInputView_.dispose(),t.prototype.dispose.call(this)},e.prototype.update=function(){this.sliderInputView_.update(),this.textInputView_.update()},e}(a.default);e.default=l},"./src/main/js/view/input/slider.ts":
/*!******************************************!*\
  !*** ./src/main/js/view/input/slider.ts ***!
  \******************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),l=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),c=n(/*! ../view */"./src/main/js/view/view.ts"),u=o.default("sld","input"),h=function(t){function e(e,n){var i=t.call(this,e)||this;i.onValueChange_=i.onValueChange_.bind(i),i.minValue_=n.minValue,i.maxValue_=n.maxValue,i.element.classList.add(u());var r=e.createElement("div");r.classList.add(u("o")),i.element.appendChild(r),i.outerElem_=r;var o=e.createElement("div");return o.classList.add(u("i")),i.outerElem_.appendChild(o),i.innerElem_=o,n.value.emitter.on("change",i.onValueChange_),i.value=n.value,i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"outerElement",{get:function(){if(!this.outerElem_)throw l.default.alreadyDisposed();return this.outerElem_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerElement",{get:function(){if(!this.innerElem_)throw l.default.alreadyDisposed();return this.innerElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.innerElem_=a.disposeElement(this.innerElem_),this.outerElem_=a.disposeElement(this.outerElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){if(!this.innerElem_)throw l.default.alreadyDisposed();var t=s.default.map(this.value.rawValue,this.minValue_,this.maxValue_,0,100);this.innerElem_.style.width=t+"%"},e.prototype.onValueChange_=function(){this.update()},e}(c.default);e.default=h},"./src/main/js/view/input/sv-palette.ts":
/*!**********************************************!*\
  !*** ./src/main/js/view/input/sv-palette.ts ***!
  \**********************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../formatter/color */"./src/main/js/formatter/color.ts"),a=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),s=n(/*! ../../misc/color-model */"./src/main/js/misc/color-model.ts"),l=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),c=n(/*! ../../misc/dom-util */"./src/main/js/misc/dom-util.ts"),u=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),h=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),p=n(/*! ../view */"./src/main/js/view/view.ts"),f=a.default("svp","input"),d=function(t){function e(e,n){var i=t.call(this,e)||this;i.onValueChange_=i.onValueChange_.bind(i),i.value=n.value,i.value.emitter.on("change",i.onValueChange_),i.element.classList.add(f());var r=e.createElement("canvas");r.classList.add(f("c")),r.tabIndex=-1,i.element.appendChild(r),i.canvasElem_=r;var o=e.createElement("div");return o.classList.add(f("m")),i.element.appendChild(o),i.markerElem_=o,i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"canvasElement",{get:function(){if(!this.canvasElem_)throw h.default.alreadyDisposed();return this.canvasElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.canvasElem_=l.disposeElement(this.canvasElem_),this.markerElem_=l.disposeElement(this.markerElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){if(!this.markerElem_)throw h.default.alreadyDisposed();var t=c.getCanvasContext(this.canvasElement);if(t){for(var e=this.value.rawValue,n=s.rgbToHsv.apply(s,e.getComponents()),i=this.canvasElement.width,r=this.canvasElement.height,a=Math.ceil(i/64),l=Math.ceil(r/64),p=0;p<64;p++)for(var f=0;f<64;f++){var d=u.default.map(f,0,63,0,100),y=u.default.map(p,0,63,100,0),m=s.hsvToRgb(n[0],d,y);t.fillStyle=o.default.rgb.apply(o.default,m);var v=Math.floor(u.default.map(f,0,63,0,i-a)),g=Math.floor(u.default.map(p,0,63,0,r-l));t.fillRect(v,g,a,l)}var b=u.default.map(n[1],0,100,0,100);this.markerElem_.style.left=b+"%";var _=u.default.map(n[2],0,100,100,0);this.markerElem_.style.top=_+"%"}},e.prototype.onValueChange_=function(){this.update()},e}(p.default);e.default=d},"./src/main/js/view/input/text.ts":
/*!****************************************!*\
  !*** ./src/main/js/view/input/text.ts ***!
  \****************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),l=n(/*! ../view */"./src/main/js/view/view.ts"),c=o.default("txt","input"),u=function(t){function e(e,n){var i=t.call(this,e)||this;i.onValueChange_=i.onValueChange_.bind(i),i.formatter_=n.formatter,i.element.classList.add(c());var r=e.createElement("input");return r.classList.add(c("i")),r.type="text",i.element.appendChild(r),i.inputElem_=r,n.value.emitter.on("change",i.onValueChange_),i.value=n.value,i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"inputElement",{get:function(){if(!this.inputElem_)throw s.default.alreadyDisposed();return this.inputElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.inputElem_=a.disposeElement(this.inputElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){if(!this.inputElem_)throw s.default.alreadyDisposed();this.inputElem_.value=this.formatter_.format(this.value.rawValue)},e.prototype.onValueChange_=function(){this.update()},e}(l.default);e.default=u},"./src/main/js/view/labeled.ts":
/*!*************************************!*\
  !*** ./src/main/js/view/labeled.ts ***!
  \*************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ./view */"./src/main/js/view/view.ts"),s=o.default("lbl"),l=function(t){function e(e,n){var i=t.call(this,e)||this;i.label=n.label,i.element.classList.add(s());var r=e.createElement("div");r.classList.add(s("l")),r.textContent=i.label,i.element.appendChild(r);var o=e.createElement("div");return o.classList.add(s("v")),o.appendChild(n.view.element),i.element.appendChild(o),i}return r(e,t),e}(a.default);e.default=l},"./src/main/js/view/monitor/graph.ts":
/*!*******************************************!*\
  !*** ./src/main/js/view/monitor/graph.ts ***!
  \*******************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../../misc/number-util */"./src/main/js/misc/number-util.ts"),l=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),c=n(/*! ../view */"./src/main/js/view/view.ts"),u="http://www.w3.org/2000/svg",h=o.default("grp","monitor"),p=function(t){function e(e,n){var i=t.call(this,e)||this;i.onCursorChange_=i.onCursorChange_.bind(i),i.onValueUpdate_=i.onValueUpdate_.bind(i),i.element.classList.add(h()),i.formatter_=n.formatter,i.minValue_=n.minValue,i.maxValue_=n.maxValue,i.cursor_=n.cursor,i.cursor_.emitter.on("change",i.onCursorChange_);var r=e.createElementNS(u,"svg");r.classList.add(h("g")),i.element.appendChild(r),i.svgElem_=r;var o=e.createElementNS(u,"polyline");i.svgElem_.appendChild(o),i.lineElem_=o;var a=e.createElement("div");return a.classList.add(h("t")),i.element.appendChild(a),i.tooltipElem_=a,n.value.emitter.on("update",i.onValueUpdate_),i.value=n.value,i.update(),i}return r(e,t),Object.defineProperty(e.prototype,"graphElement",{get:function(){if(!this.svgElem_)throw l.default.alreadyDisposed();return this.svgElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.lineElem_=a.disposeElement(this.lineElem_),this.svgElem_=a.disposeElement(this.svgElem_),this.tooltipElem_=a.disposeElement(this.tooltipElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){var t=this.tooltipElem_;if(!this.lineElem_||!this.svgElem_||!t)throw l.default.alreadyDisposed();var e=this.svgElem_.getBoundingClientRect(),n=this.value.totalCount-1,i=this.minValue_,r=this.maxValue_;this.lineElem_.setAttributeNS(null,"points",this.value.rawValues.map((function(t,o){return[s.default.map(o,0,n,0,e.width),s.default.map(t,i,r,e.height,0)].join(",")})).join(" "));var o=this.value.rawValues[this.cursor_.index];if(void 0!==o){t.classList.add(h("t","valid"));var a=s.default.map(this.cursor_.index,0,n,0,e.width),c=s.default.map(o,i,r,e.height,0);t.style.left=a+"px",t.style.top=c+"px",t.textContent=""+this.formatter_.format(o)}else t.classList.remove(h("t","valid"))},e.prototype.onValueUpdate_=function(){this.update()},e.prototype.onCursorChange_=function(){this.update()},e}(c.default);e.default=p},"./src/main/js/view/monitor/multi-log.ts":
/*!***********************************************!*\
  !*** ./src/main/js/view/monitor/multi-log.ts ***!
  \***********************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),l=n(/*! ../view */"./src/main/js/view/view.ts"),c=o.default("mll","monitor"),u=function(t){function e(e,n){var i=t.call(this,e)||this;i.onValueUpdate_=i.onValueUpdate_.bind(i),i.formatter_=n.formatter,i.element.classList.add(c());var r=e.createElement("textarea");return r.classList.add(c("i")),r.readOnly=!0,i.element.appendChild(r),i.textareaElem_=r,n.value.emitter.on("update",i.onValueUpdate_),i.value=n.value,i.update(),i}return r(e,t),e.prototype.dispose=function(){this.textareaElem_=a.disposeElement(this.textareaElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){var t=this,e=this.textareaElem_;if(!e)throw s.default.alreadyDisposed();var n=e.scrollTop===e.scrollHeight-e.clientHeight;e.textContent=this.value.rawValues.map((function(e){return t.formatter_.format(e)})).join("\n"),n&&(e.scrollTop=e.scrollHeight)},e.prototype.onValueUpdate_=function(){this.update()},e}(l.default);e.default=u},"./src/main/js/view/monitor/single-log.ts":
/*!************************************************!*\
  !*** ./src/main/js/view/monitor/single-log.ts ***!
  \************************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../../misc/pane-error */"./src/main/js/misc/pane-error.ts"),l=n(/*! ../view */"./src/main/js/view/view.ts"),c=o.default("sgl","monitor"),u=function(t){function e(e,n){var i=t.call(this,e)||this;i.onValueUpdate_=i.onValueUpdate_.bind(i),i.formatter_=n.formatter,i.element.classList.add(c());var r=e.createElement("input");return r.classList.add(c("i")),r.readOnly=!0,r.type="text",i.element.appendChild(r),i.inputElem_=r,n.value.emitter.on("update",i.onValueUpdate_),i.value=n.value,i.update(),i}return r(e,t),e.prototype.dispose=function(){this.inputElem_=a.disposeElement(this.inputElem_),t.prototype.dispose.call(this)},e.prototype.update=function(){if(!this.inputElem_)throw s.default.alreadyDisposed();var t=this.value.rawValues;this.inputElem_.value=t.length>0?this.formatter_.format(t[t.length-1]):""},e.prototype.onValueUpdate_=function(){this.update()},e}(l.default);e.default=u},"./src/main/js/view/root.ts":
/*!**********************************!*\
  !*** ./src/main/js/view/root.ts ***!
  \**********************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),s=n(/*! ../misc/pane-error */"./src/main/js/misc/pane-error.ts"),l=n(/*! ./view */"./src/main/js/view/view.ts"),c=o.default("rot"),u=function(t){function e(e,n){var i=t.call(this,e)||this;i.onFolderChange_=i.onFolderChange_.bind(i),i.folder_=n.folder,i.folder_&&i.folder_.emitter.on("change",i.onFolderChange_),i.element.classList.add(c());var r=i.folder_;if(r){var o=e.createElement("button");o.classList.add(c("t")),o.textContent=r.title,i.element.appendChild(o);var a=e.createElement("div");a.classList.add(c("m")),o.appendChild(a),i.titleElem_=o}var s=e.createElement("div");return s.classList.add(c("c")),i.element.appendChild(s),i.containerElem_=s,i.applyModel_(),i}return r(e,t),Object.defineProperty(e.prototype,"titleElement",{get:function(){return this.titleElem_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerElement",{get:function(){if(!this.containerElem_)throw s.default.alreadyDisposed();return this.containerElem_},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.containerElem_=a.disposeElement(this.containerElem_),this.folder_=null,this.titleElem_=a.disposeElement(this.titleElem_),t.prototype.dispose.call(this)},e.prototype.applyModel_=function(){var t=!this.folder_||this.folder_.expanded,e=c(void 0,"expanded");t?this.element.classList.add(e):this.element.classList.remove(e)},e.prototype.onFolderChange_=function(){this.applyModel_()},e}(l.default);e.default=u},"./src/main/js/view/separator.ts":
/*!***************************************!*\
  !*** ./src/main/js/view/separator.ts ***!
  \***************************************/
/*! no static exports found */function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(/*! ../misc/class-name */"./src/main/js/misc/class-name.ts"),a=n(/*! ./view */"./src/main/js/view/view.ts"),s=o.default("spt"),l=function(t){function e(e){var n=t.call(this,e)||this;n.element.classList.add(s());var i=e.createElement("hr");return i.classList.add(s("r")),n.element.appendChild(i),n}return r(e,t),e}(a.default);e.default=l},"./src/main/js/view/view.ts":
/*!**********************************!*\
  !*** ./src/main/js/view/view.ts ***!
  \**********************************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(/*! ../misc/disposing-util */"./src/main/js/misc/disposing-util.ts"),r=n(/*! ../misc/pane-error */"./src/main/js/misc/pane-error.ts"),o=function(){function t(t){this.disposed_=!1,this.doc_=t,this.elem_=this.doc_.createElement("div")}return Object.defineProperty(t.prototype,"disposed",{get:function(){return this.disposed_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){if(!this.doc_)throw r.default.alreadyDisposed();return this.doc_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){if(!this.elem_)throw r.default.alreadyDisposed();return this.elem_},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.doc_=null,this.elem_=i.disposeElement(this.elem_),this.disposed_=!0},t}();e.default=o},"./src/main/sass/bundle.scss":
/*!***********************************!*\
  !*** ./src/main/sass/bundle.scss ***!
  \***********************************/
/*! no static exports found */function(t,e,n){(t.exports=n(/*! ../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1)).push([t.i,".tp-fldv_t,.tp-rotv_t{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:rgba(200,202,208,0.1);color:#c8cad0;cursor:pointer;display:block;height:24px;line-height:24px;overflow:hidden;padding-left:30px;position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.tp-fldv_t:hover,.tp-rotv_t:hover{background-color:rgba(200,202,208,0.15)}.tp-fldv_t:focus,.tp-rotv_t:focus{background-color:rgba(200,202,208,0.2)}.tp-fldv_t:active,.tp-rotv_t:active{background-color:rgba(200,202,208,0.25)}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, #c8cad0, #c8cad0 2px, transparent 2px, transparent 4px, #c8cad0 4px, #c8cad0);border-radius:2px;bottom:0;content:'';display:block;height:6px;left:12px;margin:auto;position:absolute;top:0;-webkit-transform:rotate(90deg);transform:rotate(90deg);transition:-webkit-transform 0.2s ease-in-out;transition:transform 0.2s ease-in-out;transition:transform 0.2s ease-in-out, -webkit-transform 0.2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded .tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{-webkit-transform:none;transform:none}.tp-fldv_c>.tp-fldv:first-child,.tp-rotv_c>.tp-fldv:first-child{margin-top:-4px}.tp-fldv_c>.tp-fldv:last-child,.tp-rotv_c>.tp-fldv:last-child{margin-bottom:-4px}.tp-fldv_c>*+*,.tp-rotv_c>*+*{margin-top:4px}.tp-fldv_c>.tp-fldv+.tp-fldv,.tp-rotv_c>.tp-fldv+.tp-fldv{margin-top:0}.tp-fldv_c>.tp-sptv+.tp-sptv,.tp-rotv_c>.tp-sptv+.tp-sptv{margin-top:0}.tp-btnv{padding:0 4px}.tp-btnv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:#adafb8;border-radius:2px;color:#2f3137;cursor:pointer;display:block;font-weight:bold;height:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.tp-btnv_b:hover{background-color:#bbbcc4}.tp-btnv_b:focus{background-color:#c8cad0}.tp-btnv_b:active{background-color:#d6d7db}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv_c{border-left:rgba(200,202,208,0.1) solid 4px;box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height 0.2s ease-in-out, opacity 0.2s linear, padding 0.2s ease-in-out}.tp-fldv_t:hover+.tp-fldv_c{border-left-color:rgba(200,202,208,0.15)}.tp-fldv_t:focus+.tp-fldv_c{border-left-color:rgba(200,202,208,0.2)}.tp-fldv_t:active+.tp-fldv_c{border-left-color:rgba(200,202,208,0.25)}.tp-fldv.tp-fldv-expanded .tp-fldv_c{opacity:1;overflow:visible;padding-bottom:4px;padding-top:4px;-webkit-transform:none;transform:none;transition:height 0.2s ease-in-out, opacity 0.2s linear 0.2s, padding 0.2s ease-in-out}.tp-ckbiv_l{display:block;position:relative}.tp-ckbiv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background:red;left:0;opacity:0;position:absolute;top:0}.tp-ckbiv_m{background-color:rgba(200,202,208,0.15);border-radius:2px;cursor:pointer;display:block;height:20px;position:relative;width:20px}.tp-ckbiv_m::before{background-color:#c8cad0;border-radius:2px;bottom:4px;content:'';display:block;left:4px;opacity:0;position:absolute;right:4px;top:4px}.tp-ckbiv_i:hover+.tp-ckbiv_m{background-color:rgba(200,202,208,0.15)}.tp-ckbiv_i:focus+.tp-ckbiv_m{background-color:rgba(200,202,208,0.25)}.tp-ckbiv_i:active+.tp-ckbiv_m{background-color:rgba(200,202,208,0.35)}.tp-ckbiv_i:checked+.tp-ckbiv_m::before{opacity:1}.tp-clpiv{background-color:#2f3137;border-radius:6px;box-shadow:0 2px 4px rgba(0,0,0,0.2);display:none;padding:4px;position:relative;visibility:hidden;z-index:1000}.tp-clpiv.tp-clpiv-expanded{display:block;visibility:visible}.tp-clpiv_pl{display:flex}.tp-clpiv_h{margin-left:4px}.tp-clpiv_is{display:flex;margin-top:4px}.tp-clpiv_iw{align-items:center;display:flex}.tp-clpiv_iw+.tp-clpiv_iw{margin-left:4px}.tp-clpiv_il{color:rgba(200,202,208,0.8);margin-left:4px;margin-right:8px}.tp-clpiv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:rgba(200,202,208,0.15);border-radius:2px;box-sizing:border-box;color:#c8cad0;font-family:inherit;height:20px;line-height:20px;width:100%;padding:0 4px;width:100%}.tp-clpiv_i:hover{background-color:rgba(200,202,208,0.15)}.tp-clpiv_i:focus{background-color:rgba(200,202,208,0.25)}.tp-clpiv_i:active{background-color:rgba(200,202,208,0.35)}.tp-hpliv{border-radius:2px;overflow:hidden;position:relative}.tp-hpliv_c{cursor:crosshair;display:block;height:80px;width:20px}.tp-hpliv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 1px;box-shadow:0 1px 2px rgba(0,0,0,0.1);height:4px;left:50%;margin-left:-3px;margin-top:-3px;pointer-events:none;position:absolute;width:4px}.tp-svpiv{border-radius:2px;overflow:hidden;position:relative}.tp-svpiv_c{cursor:crosshair;display:block;height:80px;width:100%}.tp-svpiv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 1px;box-shadow:0 1px 2px rgba(0,0,0,0.1);height:4px;margin-left:-3px;margin-top:-3px;pointer-events:none;position:absolute;width:4px}.tp-lstiv{color:#c8cad0;display:block;padding:0;position:relative}.tp-lstiv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:#adafb8;border-radius:2px;color:#2f3137;cursor:pointer;display:block;height:20px;line-height:20px;padding:0 4px;width:100%}.tp-lstiv_s:hover{background-color:#bbbcc4}.tp-lstiv_s:focus{background-color:#c8cad0}.tp-lstiv_s:active{background-color:#d6d7db}.tp-lstiv_m{border-color:#2f3137 transparent transparent;border-style:solid;border-width:3px;bottom:0;box-sizing:border-box;height:6px;margin:auto;pointer-events:none;position:absolute;right:6px;top:3px;width:6px}.tp-sldiv{color:#c8cad0;display:block;padding:0}.tp-sldiv_o{box-sizing:border-box;cursor:pointer;height:20px;margin:0 6px;position:relative}.tp-sldiv_o::before{background-color:rgba(200,202,208,0.2);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldiv_i{height:100%;left:0;position:absolute;top:0}.tp-sldiv_i::before{background-color:#adafb8;border-radius:2px;bottom:0;content:'';display:block;height:12px;margin:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldiv_o:hover .tp-sldiv_i::before{background-color:#bbbcc4}.tp-sldiv_o:focus .tp-sldiv_i::before{background-color:#c8cad0}.tp-sldiv_o:active .tp-sldiv_i::before{background-color:#d6d7db}.tp-txtiv{color:#c8cad0;display:block;padding:0}.tp-txtiv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:rgba(200,202,208,0.15);border-radius:2px;box-sizing:border-box;color:#c8cad0;font-family:inherit;height:20px;line-height:20px;width:100%;padding:0 4px}.tp-txtiv_i:hover{background-color:rgba(200,202,208,0.15)}.tp-txtiv_i:focus{background-color:rgba(200,202,208,0.25)}.tp-txtiv_i:active{background-color:rgba(200,202,208,0.35)}.tp-cswiv_sw{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:rgba(200,202,208,0.15);border-radius:2px;box-sizing:border-box;color:#c8cad0;font-family:inherit;height:20px;line-height:20px;width:100%}.tp-cswiv_sw:hover{background-color:rgba(200,202,208,0.15)}.tp-cswiv_sw:focus{background-color:rgba(200,202,208,0.25)}.tp-cswiv_sw:active{background-color:rgba(200,202,208,0.35)}.tp-cswiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:20px;left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:20px}.tp-cswiv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:2px;bottom:0;content:'';display:block;left:0;position:absolute;right:0;top:0}.tp-cswiv_p{left:-4px;position:absolute;right:-4px;top:20px}.tp-cswtxtiv{display:flex;position:relative}.tp-cswtxtiv_s{flex-grow:0;flex-shrink:0;width:20px}.tp-cswtxtiv_t{flex:1;margin-left:4px}.tp-sldtxtiv{display:flex}.tp-sldtxtiv_s{flex:2}.tp-sldtxtiv_t{flex:1;margin-left:4px}.tp-lblv{align-items:center;display:flex;padding-left:4px;padding-right:4px}.tp-lblv_l{color:rgba(200,202,208,0.8);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;padding-left:4px;padding-right:16px}.tp-lblv_v{flex-grow:0;flex-shrink:0;width:160px}.tp-grpmv{color:#c8cad0;display:block;padding:0;position:relative}.tp-grpmv_g{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:rgba(24,24,27,0.5);border-radius:2px;box-sizing:border-box;color:rgba(200,202,208,0.7);height:20px;width:100%;display:block;height:60px}.tp-grpmv_g polyline{fill:none;stroke:rgba(200,202,208,0.7);stroke-linejoin:round}.tp-grpmv_t{font-size:0.9em;left:0;pointer-events:none;position:absolute;text-indent:4px;top:0;visibility:hidden}.tp-grpmv_t.tp-grpmv_t-valid{visibility:visible}.tp-grpmv_t::before{background-color:rgba(200,202,208,0.7);border-radius:100%;content:'';display:block;height:4px;left:-2px;position:absolute;top:-2px;width:4px}.tp-sglmv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:rgba(24,24,27,0.5);border-radius:2px;box-sizing:border-box;color:rgba(200,202,208,0.7);height:20px;width:100%;padding:0 4px}.tp-mllmv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:rgba(24,24,27,0.5);border-radius:2px;box-sizing:border-box;color:rgba(200,202,208,0.7);height:20px;width:100%;display:block;height:60px;line-height:20px;padding:0 4px;resize:none;white-space:pre}.tp-cswmv_sw{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:rgba(24,24,27,0.5);border-radius:2px;box-sizing:border-box;color:rgba(200,202,208,0.7);height:20px;width:100%}.tp-rotv{background-color:#2f3137;border-radius:6px;box-shadow:0 2px 4px rgba(0,0,0,0.2);font-family:\"Roboto Mono\",\"Source Code Pro\",Menlo,Courier,monospace;font-size:11px;font-weight:500;text-align:left}.tp-rotv_t{border-top-left-radius:6px;border-top-right-radius:6px}.tp-rotv_m{transition:none}.tp-rotv_c{box-sizing:border-box;height:0;overflow:hidden;padding-bottom:0;padding-top:0}.tp-rotv_c>.tp-fldv:first-child .tp-fldv_t{border-top-left-radius:6px;border-top-right-radius:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_c{height:auto;overflow:visible;padding-bottom:4px;padding-top:4px}.tp-sptv_r{background-color:rgba(24,24,27,0.3);border-width:0;display:block;height:4px;margin:0;width:100%}\n",""])}}).default},t.exports=i()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(31),o=n(32),a=n(33),s=n(34),l=n(35),c=n(36),u=n(17),h=n(18),p=n(19),f=n(37),d=n(38),y=n(39),m=n(40),v=n(20),g=n(41),b=n(42),_=n(43),w=n(44),x=n(45),S=n(46),k=n(47),C=n(48),E=n(49),O=n(50),P=n(51),A=n(52),T=n(53),M=n(54),j=n(55),R=n(56),D=n(57),F=n(58),I=n(59),L=n(60),N=n(61),B=n(62);e.Konva=i.Konva.Util._assign(i.Konva,{Arc:r.Arc,Arrow:o.Arrow,Circle:a.Circle,Ellipse:s.Ellipse,Image:l.Image,Label:c.Label,Tag:c.Tag,Line:u.Line,Path:h.Path,Rect:p.Rect,RegularPolygon:f.RegularPolygon,Ring:d.Ring,Sprite:y.Sprite,Star:m.Star,Text:v.Text,TextPath:g.TextPath,Transformer:b.Transformer,Wedge:_.Wedge,Filters:{Blur:w.Blur,Brighten:x.Brighten,Contrast:S.Contrast,Emboss:k.Emboss,Enhance:C.Enhance,Grayscale:E.Grayscale,HSL:O.HSL,HSV:P.HSV,Invert:A.Invert,Kaleidoscope:T.Kaleidoscope,Mask:M.Mask,Noise:j.Noise,Pixelate:R.Pixelate,Posterize:D.Posterize,RGB:F.RGB,RGBA:I.RGBA,Sepia:L.Sepia,Solarize:N.Solarize,Threshold:B.Threshold}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(3),o=n(4),a=n(9),s=n(27),l=n(28),c=n(29),u=n(12),h=n(11),p=n(5),f=n(13),d=n(30),y=n(14),m=n(10);e.Konva=r.Util._assign(i.Konva,{Collection:r.Collection,Util:r.Util,Node:o.Node,ids:o.ids,names:o.names,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:l.Layer,FastLayer:c.FastLayer,Group:u.Group,DD:h.DD,Shape:p.Shape,shapes:p.shapes,Animation:f.Animation,Tween:d.Tween,Easings:d.Easings,Context:y.Context,Canvas:m.Canvas})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(9),l=n(1),c=n(10),u=n(11),h=n(1),p=n(15),f="_",d=["mouseenter","mousedown","mousemove","mouseup","mouseout","touchstart","touchmove","touchend","mouseover","wheel","contextmenu","pointerdown","pointermove","pointerup","pointercancel","lostpointercapture"],y=d.length;function m(t,e){t.content.addEventListener(e,(function(n){t[f+e](n)}),!1)}function v(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&o.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var g=function(t){function n(n){var i=t.call(this,v(n))||this;return i._pointerPositions=[],i._changedPointerPositions=[],i._buildDOM(),i._bindContentEvents(),e.stages.push(i),i.on("widthChange.konva heightChange.konva",i._resizeDOM),i.on("visibleChange.konva",i._checkVisibility),i.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){v(i.attrs)})),i._checkVisibility(),i}return r(n,t),n.prototype._validateAdd=function(t){var e="Layer"===t.getType(),n="FastLayer"===t.getType();e||n||o.Util.throw("You may only add layers to the stage.")},n.prototype._checkVisibility=function(){var t=this.visible()?"":"none";this.content.style.display=t},n.prototype.setContainer=function(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},n.prototype.shouldDrawHit=function(){return!0},n.prototype.clear=function(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this},n.prototype.clone=function(t){return t||(t={}),t.container=document.createElement("div"),s.Container.prototype.clone.call(this,t)},n.prototype.destroy=function(){t.prototype.destroy.call(this);var n=this.content;n&&o.Util._isInDocument(n)&&this.container().removeChild(n);var i=e.stages.indexOf(this);return i>-1&&e.stages.splice(i,1),this},n.prototype.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(o.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},n.prototype._getPointerById=function(t){return this._pointerPositions.find((function(e){return e.id===t}))},n.prototype.getPointersPositions=function(){return this._pointerPositions},n.prototype.getStage=function(){return this},n.prototype.getContent=function(){return this.content},n.prototype._toKonvaCanvas=function(t){var e=(t=t||{}).x||0,n=t.y||0,i=new c.SceneCanvas({width:t.width||this.width(),height:t.height||this.height(),pixelRatio:t.pixelRatio||1}),r=i.getContext()._context,o=this.children;return(e||n)&&r.translate(-1*e,-1*n),o.each((function(i){if(i.isVisible()){var o=i._toKonvaCanvas(t);r.drawImage(o._canvas,e,n,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}})),i},n.prototype.getIntersection=function(t,e){if(!t)return null;var n,i,r=this.children;for(n=r.length-1;n>=0;n--)if(i=r[n].getIntersection(t,e))return i;return null},n.prototype._resizeDOM=function(){if(this.content){var t,e,n=this.width(),i=this.height(),r=this.getChildren(),o=r.length;for(this.content.style.width=n+"px",this.content.style.height=i+"px",this.bufferCanvas.setSize(n,i),this.bufferHitCanvas.setSize(n,i),t=0;t<o;t++)(e=r[t]).setSize({width:n,height:i}),e.draw()}},n.prototype.add=function(e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}t.prototype.add.call(this,e);var i=this.children.length;return i>5&&o.Util.warn("The stage has "+i+" layers. Recommended maximin number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e._setCanvasSize(this.width(),this.height()),e.draw(),l.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this},n.prototype.getParent=function(){return null},n.prototype.getLayer=function(){return null},n.prototype.hasPointerCapture=function(t){return p.hasPointerCapture(t,this)},n.prototype.setPointerCapture=function(t){p.setPointerCapture(t,this)},n.prototype.releaseCapture=function(t){p.releaseCapture(t,this)},n.prototype.getLayers=function(){return this.getChildren()},n.prototype._bindContentEvents=function(){if(l.Konva.isBrowser)for(var t=0;t<y;t++)m(this,d[t])},n.prototype._mouseenter=function(t){this.setPointersPositions(t),this._fire("mouseenter",{evt:t,target:this,currentTarget:this})},n.prototype._mouseover=function(t){this.setPointersPositions(t),this._fire("contentMouseover",{evt:t}),this._fire("mouseover",{evt:t,target:this,currentTarget:this})},n.prototype._mouseout=function(t){this.setPointersPositions(t);var e=this.targetShape,n=!u.DD.isDragging||l.Konva.hitOnDragEnabled;e&&n?(e._fireAndBubble("mouseout",{evt:t}),e._fireAndBubble("mouseleave",{evt:t}),this.targetShape=null):n&&(this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this._fire("mouseout",{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire("contentMouseout",{evt:t})},n.prototype._mousemove=function(t){if(l.Konva.UA.ieMobile)return this._touchmove(t);this.setPointersPositions(t);var e,n=o.Util._getFirstPointerId(t),i=!u.DD.isDragging||l.Konva.hitOnDragEnabled;if(i){if((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()){var r=!this.targetShape||this.targetShape!==e;i&&r?(this.targetShape&&(this.targetShape._fireAndBubble("mouseout",{evt:t,pointerId:n},e),this.targetShape._fireAndBubble("mouseleave",{evt:t,pointerId:n},e)),e._fireAndBubble("mouseover",{evt:t,pointerId:n},this.targetShape),e._fireAndBubble("mouseenter",{evt:t,pointerId:n},this.targetShape),e._fireAndBubble("mousemove",{evt:t,pointerId:n}),this.targetShape=e):e._fireAndBubble("mousemove",{evt:t,pointerId:n})}else this.targetShape&&i&&(this.targetShape._fireAndBubble("mouseout",{evt:t,pointerId:n}),this.targetShape._fireAndBubble("mouseleave",{evt:t,pointerId:n}),this._fire("mouseover",{evt:t,target:this,currentTarget:this,pointerId:n}),this.targetShape=null),this._fire("mousemove",{evt:t,target:this,currentTarget:this,pointerId:n});this._fire("contentMousemove",{evt:t})}t.cancelable&&t.preventDefault()},n.prototype._mousedown=function(t){if(l.Konva.UA.ieMobile)return this._touchstart(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),n=this.getIntersection(this.getPointerPosition());l.Konva.listenClickTap=!0,n&&n.isListening()?(this.clickStartShape=n,n._fireAndBubble("mousedown",{evt:t,pointerId:e})):this._fire("mousedown",{evt:t,target:this,currentTarget:this,pointerId:e}),this._fire("contentMousedown",{evt:t})},n.prototype._mouseup=function(t){if(l.Konva.UA.ieMobile)return this._touchend(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),n=this.getIntersection(this.getPointerPosition()),i=this.clickStartShape,r=this.clickEndShape,a=!1;l.Konva.inDblClickWindow?(a=!0,clearTimeout(this.dblTimeout)):u.DD.justDragged?u.DD&&(u.DD.justDragged=!1):(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){l.Konva.inDblClickWindow=!1}),l.Konva.dblClickWindow),n&&n.isListening()?(this.clickEndShape=n,n._fireAndBubble("mouseup",{evt:t,pointerId:e}),l.Konva.listenClickTap&&i&&i._id===n._id&&(n._fireAndBubble("click",{evt:t,pointerId:e}),a&&r&&r===n&&n._fireAndBubble("dblclick",{evt:t,pointerId:e}))):(this._fire("mouseup",{evt:t,target:this,currentTarget:this,pointerId:e}),l.Konva.listenClickTap&&this._fire("click",{evt:t,target:this,currentTarget:this,pointerId:e}),a&&this._fire("dblclick",{evt:t,target:this,currentTarget:this,pointerId:e})),this._fire("contentMouseup",{evt:t}),l.Konva.listenClickTap&&(this._fire("contentClick",{evt:t}),a&&this._fire("contentDblclick",{evt:t})),l.Konva.listenClickTap=!1,t.cancelable&&t.preventDefault()},n.prototype._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("contextmenu",{evt:t}):this._fire("contextmenu",{evt:t,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:t})},n.prototype._touchstart=function(t){var e=this;this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach((function(i){var r=e.getIntersection(i);l.Konva.listenClickTap=!0,r&&r.isListening()&&(l.Konva.captureTouchEventsEnabled&&r.setPointerCapture(i.id),e.tapStartShape=r,r._fireAndBubble("touchstart",{evt:t,pointerId:i.id},e),n=!0,r.isListening()&&r.preventDefault()&&t.cancelable&&t.preventDefault())})),n||this._fire("touchstart",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchstart",{evt:t})},n.prototype._touchmove=function(t){var e=this;if(this.setPointersPositions(t),!u.DD.isDragging||l.Konva.hitOnDragEnabled){var n=!1,i={};this._changedPointerPositions.forEach((function(r){var o=p.getCapturedShape(r.id)||e.getIntersection(r);o&&o.isListening()&&(i[o._id]||(i[o._id]=!0,o._fireAndBubble("touchmove",{evt:t,pointerId:r.id}),n=!0,o.isListening()&&o.preventDefault()&&t.cancelable&&t.preventDefault()))})),n||this._fire("touchmove",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchmove",{evt:t})}u.DD.isDragging&&u.DD.node.preventDefault()&&t.cancelable&&t.preventDefault()},n.prototype._touchend=function(t){var e=this;this.setPointersPositions(t);var n=this.clickEndShape,i=!1;l.Konva.inDblClickWindow?(i=!0,clearTimeout(this.dblTimeout)):u.DD.justDragged||(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){l.Konva.inDblClickWindow=!1}),l.Konva.dblClickWindow);var r=!1,o={},a=!1,s=!1;this._changedPointerPositions.forEach((function(c){var u=p.getCapturedShape(c.id)||e.getIntersection(c);u&&u.releaseCapture(c.id),u&&u.isListening()&&(o[u._id]||(o[u._id]=!0,e.clickEndShape=u,u._fireAndBubble("touchend",{evt:t,pointerId:c.id}),r=!0,l.Konva.listenClickTap&&u===e.tapStartShape&&(a=!0,u._fireAndBubble("tap",{evt:t,pointerId:c.id}),i&&n&&n===u&&(s=!0,u._fireAndBubble("dbltap",{evt:t,pointerId:c.id}))),u.isListening()&&u.preventDefault()&&t.cancelable&&t.preventDefault()))})),r||this._fire("touchend",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),l.Konva.listenClickTap&&!a&&this._fire("tap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i&&!s&&this._fire("dbltap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchend",{evt:t}),l.Konva.listenClickTap&&(this._fire("contentTap",{evt:t}),i&&this._fire("contentDbltap",{evt:t})),l.Konva.listenClickTap=!1},n.prototype._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("wheel",{evt:t}):this._fire("wheel",{evt:t,target:this,currentTarget:this}),this._fire("contentWheel",{evt:t})},n.prototype._pointerdown=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=p.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerdown",p.createEvent(t))}},n.prototype._pointermove=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=p.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointermove",p.createEvent(t))}},n.prototype._pointerup=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=p.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",p.createEvent(t)),p.releaseCapture(t.pointerId)}},n.prototype._pointercancel=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=p.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",p.createEvent(t)),p.releaseCapture(t.pointerId)}},n.prototype._lostpointercapture=function(t){p.releaseCapture(t.pointerId)},n.prototype.setPointersPositions=function(t){var e=this,n=this._getContentPosition(),i=null,r=null;if(void 0!==(t=t||window.event).touches){if(this._pointerPositions=[],this._changedPointerPositions=[],o.Collection.prototype.each.call(t.touches,(function(t){e._pointerPositions.push({id:t.identifier,x:t.clientX-n.left,y:t.clientY-n.top})})),o.Collection.prototype.each.call(t.changedTouches||t.touches,(function(t){e._changedPointerPositions.push({id:t.identifier,x:t.clientX-n.left,y:t.clientY-n.top})})),t.touches.length>0){var a=t.touches[0];i=a.clientX-n.left,r=a.clientY-n.top}}else i=t.clientX-n.left,r=t.clientY-n.top,this.pointerPos={x:i,y:r},this._pointerPositions=[{x:i,y:r,id:o.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:r,id:o.Util._getFirstPointerId(t)}]},n.prototype._setPointerPosition=function(t){o.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},n.prototype._getContentPosition=function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},n.prototype._buildDOM=function(){if(this.bufferCanvas=new c.SceneCanvas,this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1}),l.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},n.prototype.cache=function(){return o.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},n.prototype.clearCache=function(){return this},n.prototype.batchDraw=function(){return this.children.each((function(t){t.batchDraw()})),this},n}(s.Container);e.Stage=g,g.prototype.nodeType="Stage",h._registerNode(g),a.Factory.addGetterSetter(g,"container")},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(9),s=n(0),l=n(16),c=n(10),u=n(5),h=n(2),p=n(1),f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],d=f.length,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hitCanvas=new c.HitCanvas({pixelRatio:1}),e}return r(e,t),e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._checkSmooth()},e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to a layer.")},e.prototype.getIntersection=function(t,e){var n,i,r,o;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var a=1,s=!1;;){for(i=0;i<d;i++){if(r=f[i],(o=(n=this._getIntersection({x:t.x+r.x*a,y:t.y+r.y*a})).shape)&&e)return o.findAncestor(e,!0);if(o)return o;if(s=!!n.antialiased,!n.antialiased)break}if(!s)return null;a+=1}},e.prototype._getIntersection=function(t){var e,n,i=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,a=r[3];return 255===a?(e=o.Util._rgbToHex(r[0],r[1],r[2]),(n=u.shapes["#"+e])?{shape:n}:{antialiased:!0}):a>0?{antialiased:!0}:{}},e.prototype.drawScene=function(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),a.Container.prototype.drawScene.call(this,i,e),this._fire("draw",{node:this}),this},e.prototype.drawHit=function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),a.Container.prototype.drawHit.call(this,i,e),this},e.prototype.clear=function(t){return l.BaseLayer.prototype.clear.call(this,t),this.getHitCanvas().getContext().clear(t),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e.prototype.setSize=function(e){var n=e.width,i=e.height;return t.prototype.setSize.call(this,{width:n,height:i}),this.hitCanvas.setSize(n,i),this},e}(l.BaseLayer);e.Layer=y,y.prototype.nodeType="Layer",p._registerNode(y),s.Factory.addGetterSetter(y,"hitGraphEnabled",!0,h.getBooleanValidator()),o.Collection.mapMethods(y)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(9),s=n(16),l=n(1),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._validateAdd=function(t){"Shape"!==t.getType()&&o.Util.throw("You may only add shapes to a fast layer.")},e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this._checkSmooth()},e.prototype.hitGraphEnabled=function(){return!1},e.prototype.drawScene=function(t){var e=this.getLayer(),n=t||e&&e.getCanvas();return this.clearBeforeDraw()&&n.getContext().clear(),a.Container.prototype.drawScene.call(this,n),this},e.prototype.draw=function(){return this.drawScene(),this},e}(s.BaseLayer);e.FastLayer=c,c.prototype.nodeType="FastLayer",l._registerNode(c),o.Collection.mapMethods(c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(13),o=n(4),a=n(1),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=0,c=["fill","stroke","shadowColor"],u=function(){function t(t,e,n,i,r,o,a){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}return t.prototype.fire=function(t){var e=this[t];e&&e()},t.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},t.prototype.getTime=function(){return this._time},t.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},t.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},t.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},t.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},t.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},t.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},t.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},t.prototype.update=function(){this.setPosition(this.getPosition(this._time))},t.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},t.prototype.pause=function(){this.state=1,this.fire("onPause")},t.prototype.getTimer=function(){return(new Date).getTime()},t}(),h=function(){function t(n){var o,c,h=this,p=n.node,f=p._id,d=n.easing||e.Easings.Linear,y=!!n.yoyo;o=void 0===n.duration?.3:0===n.duration?.001:n.duration,this.node=p,this._id=l++;var m=p.getLayer()||(p instanceof a.Konva.Stage?p.getLayers():null);for(c in m||i.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation((function(){h.tween.onEnterFrame()}),m),this.tween=new u(c,(function(t){h._tweenFunc(t)}),d,0,1,1e3*o,y),this._addListeners(),t.attrs[f]||(t.attrs[f]={}),t.attrs[f][this._id]||(t.attrs[f][this._id]={}),t.tweens[f]||(t.tweens[f]={}),n)void 0===s[c]&&this._addAttr(c,n[c]);this.reset(),this.onFinish=n.onFinish,this.onReset=n.onReset}return t.prototype._addAttr=function(e,n){var r,o,a,s,l,u,h,p,f=this.node,d=f._id;if((a=t.tweens[d][e])&&delete t.attrs[d][a][e],r=f.getAttr(e),i.Util._isArray(n))if(o=[],l=Math.max(n.length,r.length),"points"===e&&n.length!==r.length&&(n.length>r.length?(h=r,r=i.Util._prepareArrayForTween(r,n,f.closed())):(u=n,n=i.Util._prepareArrayForTween(n,r,f.closed()))),0===e.indexOf("fill"))for(s=0;s<l;s++)if(s%2==0)o.push(n[s]-r[s]);else{var y=i.Util.colorToRGBA(r[s]);p=i.Util.colorToRGBA(n[s]),r[s]=y,o.push({r:p.r-y.r,g:p.g-y.g,b:p.b-y.b,a:p.a-y.a})}else for(s=0;s<l;s++)o.push(n[s]-r[s]);else-1!==c.indexOf(e)?(r=i.Util.colorToRGBA(r),o={r:(p=i.Util.colorToRGBA(n)).r-r.r,g:p.g-r.g,b:p.b-r.b,a:p.a-r.a}):o=n-r;t.attrs[d][this._id][e]={start:r,diff:o,end:n,trueEnd:u,trueStart:h},t.tweens[d][e]=this._id},t.prototype._tweenFunc=function(e){var n,r,o,a,s,l,u,h,p=this.node,f=t.attrs[p._id][this._id];for(n in f){if(o=(r=f[n]).start,a=r.diff,h=r.end,i.Util._isArray(o))if(s=[],u=Math.max(o.length,h.length),0===n.indexOf("fill"))for(l=0;l<u;l++)l%2==0?s.push((o[l]||0)+a[l]*e):s.push("rgba("+Math.round(o[l].r+a[l].r*e)+","+Math.round(o[l].g+a[l].g*e)+","+Math.round(o[l].b+a[l].b*e)+","+(o[l].a+a[l].a*e)+")");else for(l=0;l<u;l++)s.push((o[l]||0)+a[l]*e);else s=-1!==c.indexOf(n)?"rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":o+a*e;p.setAttr(n,s)}},t.prototype._addListeners=function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var n=e.node,i=t.attrs[n._id][e._id];i.points&&i.points.trueEnd&&n.setAttr("points",i.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var n=e.node,i=t.attrs[n._id][e._id];i.points&&i.points.trueStart&&n.points(i.points.trueStart),e.onReset&&e.onReset()}},t.prototype.play=function(){return this.tween.play(),this},t.prototype.reverse=function(){return this.tween.reverse(),this},t.prototype.reset=function(){return this.tween.reset(),this},t.prototype.seek=function(t){return this.tween.seek(1e3*t),this},t.prototype.pause=function(){return this.tween.pause(),this},t.prototype.finish=function(){return this.tween.finish(),this},t.prototype.destroy=function(){var e,n=this.node._id,i=this._id,r=t.tweens[n];for(e in this.pause(),r)delete t.tweens[n][e];delete t.attrs[n][i]},t.attrs={},t.tweens={},t}();e.Tween=h,o.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new h(t).play()},e.Easings={BackEaseIn:function(t,e,n,i){var r=1.70158;return n*(t/=i)*t*((r+1)*t-r)+e},BackEaseOut:function(t,e,n,i){var r=1.70158;return n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut:function(t,e,n,i){var r=1.70158;return(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},ElasticEaseIn:function(t,e,n,i,r,o){var a=0;return 0===t?e:1==(t/=i)?e+n:(o||(o=.3*i),!r||r<Math.abs(n)?(r=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,n,i,r,o){var a=0;return 0===t?e:1==(t/=i)?e+n:(o||(o=.3*i),!r||r<Math.abs(n)?(r=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut:function(t,e,n,i,r,o){var a=0;return 0===t?e:2==(t/=i/2)?e+n:(o||(o=i*(.3*1.5)),!r||r<Math.abs(n)?(r=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,n,i,r){return i-e.Easings.BounceEaseOut(r-t,0,i,r)+n},BounceEaseInOut:function(t,n,i,r){return t<r/2?.5*e.Easings.BounceEaseIn(2*t,0,i,r)+n:.5*e.Easings.BounceEaseOut(2*t-r,0,i,r)+.5*i+n},EaseIn:function(t,e,n,i){return n*(t/=i)*t+e},EaseOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,i){return n*t/i+e}}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(1),c=n(2),u=n(1),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){var e=l.Konva.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Arc=h,h.prototype._centroid=!0,h.prototype.className="Arc",h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],u._registerNode(h),a.Factory.addGetterSetter(h,"innerRadius",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"outerRadius",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"angle",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clockwise",!1,c.getBooleanValidator()),o.Collection.mapMethods(h)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(17),l=n(2),c=n(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(e){t.prototype._sceneFunc.call(this,e);var n=2*Math.PI,i=this.points(),r=i,o=0!==this.tension()&&i.length>4;o&&(r=this.getTensionPoints());var a,s,l=i.length;o?(a=i[l-2]-(r[r.length-2]+r[r.length-4])/2,s=i[l-1]-(r[r.length-1]+r[r.length-3])/2):(a=i[l-2]-i[l-4],s=i[l-1]-i[l-3]);var c=(Math.atan2(s,a)+n)%n,u=this.pointerLength(),h=this.pointerWidth();e.save(),e.beginPath(),e.translate(i[l-2],i[l-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-u,h/2),e.lineTo(-u,-h/2),e.closePath(),e.restore(),this.pointerAtBeginning()&&(e.save(),e.translate(i[0],i[1]),o?(a=(r[0]+r[2])/2-i[0],s=(r[1]+r[3])/2-i[1]):(a=i[2]-i[0],s=i[3]-i[1]),e.rotate((Math.atan2(-s,-a)+n)%n),e.moveTo(0,0),e.lineTo(-u,h/2),e.lineTo(-u,-h/2),e.closePath(),e.restore());var p=this.dashEnabled();p&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),p&&(this.attrs.dashEnabled=!0)},e}(s.Line);e.Arrow=u,u.prototype.className="Arrow",c._registerNode(u),a.Factory.addGetterSetter(u,"pointerLength",10,l.getNumberValidator()),a.Factory.addGetterSetter(u,"pointerWidth",10,l.getNumberValidator()),a.Factory.addGetterSetter(u,"pointerAtBeginning",!1),o.Collection.mapMethods(u)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(2),c=n(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(s.Shape);e.Circle=u,u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),a.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(2),c=n(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radiusX()},e.prototype.getHeight=function(){return 2*this.radiusY()},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(s.Shape);e.Ellipse=u,u.prototype.className="Ellipse",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radiusX","radiusY"],c._registerNode(u),a.Factory.addComponentsGetterSetter(u,"radius",["x","y"]),a.Factory.addGetterSetter(u,"radiusX",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"radiusY",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(2),c=n(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._useBufferCanvas=function(){return!(!this.hasShadow()&&1===this.getAbsoluteOpacity()||!this.hasStroke()||!this.getStage())},e.prototype._sceneFunc=function(t){var e,n,i,r=this.width(),o=this.height(),a=this.image();a&&(e=this.cropWidth(),n=this.cropHeight(),i=e&&n?[a,this.cropX(),this.cropY(),e,n,0,0,r,o]:[a,0,0,r,o]),(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,r,o),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,i)},e.prototype._hitFunc=function(t){var e=this.width(),n=this.height();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t=this.image();return this.attrs.width||(t?t.width:0)},e.prototype.getHeight=function(){var t=this.image();return this.attrs.height||(t?t.height:0)},e.fromURL=function(t,n){var i=o.Util.createImageElement();i.onload=function(){var t=new e({image:i});n(t)},i.crossOrigin="Anonymous",i.src=t},e}(s.Shape);e.Image=u,u.prototype.className="Image",c._registerNode(u),a.Factory.addGetterSetter(u,"image"),a.Factory.addComponentsGetterSetter(u,"crop",["x","y","width","height"]),a.Factory.addGetterSetter(u,"cropX",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropY",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropWidth",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropHeight",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(12),c=n(2),u=n(1),h=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],p=h.length,f=function(t){function e(e){var n=t.call(this,e)||this;return n.on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),n}return r(e,t),e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var e,n=this,i=function(){n._sync()};for(e=0;e<p;e++)t.on(h[e]+"Change.konva",i)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t,e,n,i,r,o,a,s=this.getText(),l=this.getTag();if(s&&l){switch(t=s.width(),e=s.height(),n=l.pointerDirection(),i=l.pointerWidth(),a=l.pointerHeight(),r=0,o=0,n){case"up":r=t/2,o=-1*a;break;case"right":r=t+i,o=e/2;break;case"down":r=t/2,o=e+a;break;case"left":r=-1*i,o=e/2}l.setAttrs({x:-1*r,y:-1*o,width:t,height:e}),s.setAttrs({x:-1*r,y:-1*o})}},e}(l.Group);e.Label=f,f.prototype.className="Label",u._registerNode(f),o.Collection.mapMethods(f);var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){var e=this.width(),n=this.height(),i=this.pointerDirection(),r=this.pointerWidth(),o=this.pointerHeight(),a=Math.min(this.cornerRadius(),e/2,n/2);t.beginPath(),a?t.moveTo(a,0):t.moveTo(0,0),"up"===i&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+r)/2,0)),a?(t.lineTo(e-a,0),t.arc(e-a,a,a,3*Math.PI/2,0,!1)):t.lineTo(e,0),"right"===i&&(t.lineTo(e,(n-o)/2),t.lineTo(e+r,n/2),t.lineTo(e,(n+o)/2)),a?(t.lineTo(e,n-a),t.arc(e-a,n-a,a,0,Math.PI/2,!1)):t.lineTo(e,n),"down"===i&&(t.lineTo((e+r)/2,n),t.lineTo(e/2,n+o),t.lineTo((e-r)/2,n)),a?(t.lineTo(a,n),t.arc(a,n-a,a,Math.PI/2,Math.PI,!1)):t.lineTo(0,n),"left"===i&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*r,n/2),t.lineTo(0,(n-o)/2)),a&&(t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,e=0,n=this.pointerWidth(),i=this.pointerHeight(),r=this.pointerDirection(),o=this.width(),a=this.height();return"up"===r?(e-=i,a+=i):"down"===r?a+=i:"left"===r?(t-=1.5*n,o+=n):"right"===r&&(o+=1.5*n),{x:t,y:e,width:o,height:a}},e}(s.Shape);e.Tag=d,d.prototype.className="Tag",u._registerNode(d),a.Factory.addGetterSetter(d,"pointerDirection","none"),a.Factory.addGetterSetter(d,"pointerWidth",0,c.getNumberValidator()),a.Factory.addGetterSetter(d,"pointerHeight",0,c.getNumberValidator()),a.Factory.addGetterSetter(d,"cornerRadius",0,c.getNumberValidator()),o.Collection.mapMethods(d)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(2),c=n(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){var e,n,i,r=this.sides(),o=this.radius();for(t.beginPath(),t.moveTo(0,0-o),e=1;e<r;e++)n=o*Math.sin(2*e*Math.PI/r),i=-1*o*Math.cos(2*e*Math.PI/r),t.lineTo(n,i);t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(s.Shape);e.RegularPolygon=u,u.prototype.className="RegularPolygon",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),a.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"sides",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(2),c=n(1),u=2*Math.PI,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,u,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),u,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Ring=h,h.prototype.className="Ring",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(h),a.Factory.addGetterSetter(h,"innerRadius",0,l.getNumberValidator()),a.Factory.addGetterSetter(h,"outerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(h)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(13),c=n(2),u=n(1),h=function(t){function e(e){var n=t.call(this,e)||this;return n._updated=!0,n.anim=new l.Animation((function(){var t=n._updated;return n._updated=!1,t})),n.on("animationChange.konva",(function(){this.frameIndex(0)})),n.on("frameIndexChange.konva",(function(){this._updated=!0})),n.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),n}return r(e,t),e.prototype._sceneFunc=function(t){var e=this.animation(),n=this.frameIndex(),i=4*n,r=this.animations()[e],o=this.frameOffsets(),a=r[i+0],s=r[i+1],l=r[i+2],c=r[i+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,c),t.closePath(),t.fillStrokeShape(this)),u)if(o){var h=o[e],p=2*n;t.drawImage(u,a,s,l,c,h[p+0],h[p+1],l,c)}else t.drawImage(u,a,s,l,c,0,0,l,c)},e.prototype._hitFunc=function(t){var e=this.animation(),n=this.frameIndex(),i=4*n,r=this.animations()[e],o=this.frameOffsets(),a=r[i+2],s=r[i+3];if(t.beginPath(),o){var l=o[e],c=2*n;t.rect(l[c+0],l[c+1],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},e.prototype._setInterval=function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)},e}(s.Shape);e.Sprite=h,h.prototype.className="Sprite",u._registerNode(h),a.Factory.addGetterSetter(h,"animation"),a.Factory.addGetterSetter(h,"animations"),a.Factory.addGetterSetter(h,"frameOffsets"),a.Factory.addGetterSetter(h,"image"),a.Factory.addGetterSetter(h,"frameIndex",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"frameRate",17,c.getNumberValidator()),a.Factory.backCompat(h,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),o.Collection.mapMethods(h)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(2),c=n(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){var e=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var r=1;r<2*i;r++){var o=r%2==0?n:e,a=o*Math.sin(r*Math.PI/i),s=-1*o*Math.cos(r*Math.PI/i);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Star=u,u.prototype.className="Star",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(u),a.Factory.addGetterSetter(u,"numPoints",5,l.getNumberValidator()),a.Factory.addGetterSetter(u,"innerRadius",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"outerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(18),c=n(20),u=n(2),h=n(1);function p(t){t.fillText(this.partialText,0,0)}function f(t){t.strokeText(this.partialText,0,0)}var d=function(t){function e(e){var n=t.call(this,e)||this;return n.dummyCanvas=o.Util.createCanvasElement(),n.dataArray=[],n.dataArray=l.Path.parsePathData(n.attrs.data),n.on("dataChange.konva",(function(){this.dataArray=l.Path.parsePathData(this.attrs.data),this._setTextData()})),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",n._setTextData),e&&e.getKerning&&(o.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),n.kerningFunc(e.getKerning)),n._setTextData(),n}return r(e,t),e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),i=this.fontSize(),r=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<r.length;o++){t.save();var a=r[o].p0;t.translate(a.x,a.y),t.rotate(r[o].rotation),this.partialText=r[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=i/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var i=0;i<e.length;i++){var r=e[i].p1;t.lineTo(r.x,r.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return c.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return c.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,e=this._getTextSize(this.attrs.text),n=this.letterSpacing(),i=this.align(),r=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var a=0,s=0;s<t.dataArray.length;s++)t.dataArray[s].pathLength>0&&(a+=t.dataArray[s].pathLength);var c=0;"center"===i&&(c=Math.max(0,a/2-o/2)),"right"===i&&(c=Math.max(0,a-o));for(var u,h,p,f=this.text().split(""),d=this.text().split(" ").length-1,y=-1,m=0,v=function(){m=0;for(var e=t.dataArray,n=y+1;n<e.length;n++){if(e[n].pathLength>0)return y=n,e[n];"M"===e[n].command&&(u={x:e[n].points[0],y:e[n].points[1]})}return{}},g=function(e){var r=t._getTextSize(e).width+n;" "===e&&"justify"===i&&(r+=(a-o)/d);var s=0,c=0;for(h=void 0;Math.abs(r-s)/r>.01&&c<25;){c++;for(var f=s;void 0===p;)(p=v())&&f+p.pathLength<r&&(f+=p.pathLength,p=void 0);if(p==={}||void 0===u)return;var y=!1;switch(p.command){case"L":l.Path.getLineLength(u.x,u.y,p.points[0],p.points[1])>r?h=l.Path.getPointOnLine(r,u.x,u.y,p.points[0],p.points[1],u.x,u.y):p=void 0;break;case"A":var g=p.points[4],b=p.points[5],_=p.points[4]+b;0===m?m=g+1e-8:r>s?m+=Math.PI/180*b/Math.abs(b):m-=Math.PI/360*b/Math.abs(b),(b<0&&m<_||b>=0&&m>_)&&(m=_,y=!0),h=l.Path.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],m,p.points[6]);break;case"C":0===m?m=r>p.pathLength?1e-8:r/p.pathLength:r>s?m+=(r-s)/p.pathLength:m-=(s-r)/p.pathLength,m>1&&(m=1,y=!0),h=l.Path.getPointOnCubicBezier(m,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);break;case"Q":0===m?m=r/p.pathLength:r>s?m+=(r-s)/p.pathLength:m-=(s-r)/p.pathLength,m>1&&(m=1,y=!0),h=l.Path.getPointOnQuadraticBezier(m,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3])}void 0!==h&&(s=l.Path.getLineLength(u.x,u.y,h.x,h.y)),y&&(y=!1,p=void 0)}},b=t._getTextSize("C").width+n,_=0;_<c/b&&(g("C"),void 0!==u&&void 0!==h);_++)u=h;for(var w=0;w<f.length&&(g(f[w]),void 0!==u&&void 0!==h);w++){var x=l.Path.getLineLength(u.x,u.y,h.x,h.y),S=0;if(r)try{S=r(f[w-1],f[w])*this.fontSize()}catch(t){S=0}u.x+=S,h.x+=S,this.textWidth+=S;var k=l.Path.getPointOnLine(S+x/2,u.x,u.y,h.x,h.y),C=Math.atan2(h.y-u.y,h.x-u.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:f[w],rotation:C,p0:u,p1:h}),u=h}},e.prototype.getSelfRect=function(){var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,n,i=t[0],r=t[0],o=t[0],a=t[0],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],i=Math.min(i,e),r=Math.max(r,e),o=Math.min(o,n),a=Math.max(a,n);var l=this.fontSize();return{x:Math.round(i)-l/2,y:Math.round(o)-l/2,width:Math.round(r-i)+l,height:Math.round(a-o)+l}},e}(s.Shape);e.TextPath=d,d.prototype._fillFunc=p,d.prototype._strokeFunc=f,d.prototype._fillFuncHit=p,d.prototype._strokeFuncHit=f,d.prototype.className="TextPath",d.prototype._attrsAffectingSize=["text","fontSize","data"],h._registerNode(d),a.Factory.addGetterSetter(d,"data"),a.Factory.addGetterSetter(d,"fontFamily","Arial"),a.Factory.addGetterSetter(d,"fontSize",12,u.getNumberValidator()),a.Factory.addGetterSetter(d,"fontStyle","normal"),a.Factory.addGetterSetter(d,"align","left"),a.Factory.addGetterSetter(d,"letterSpacing",0,u.getNumberValidator()),a.Factory.addGetterSetter(d,"textBaseline","middle"),a.Factory.addGetterSetter(d,"fontVariant","normal"),a.Factory.addGetterSetter(d,"text",""),a.Factory.addGetterSetter(d,"textDecoration",null),a.Factory.addGetterSetter(d,"kerningFunc",null),o.Collection.mapMethods(d)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(4),l=n(5),c=n(19),u=n(12),h=n(1),p=n(2),f=n(1),d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((function(t){return t+".tr-konva"})).join(" "),y=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map((function(t){return t+".tr-konva"})).join(" "),m={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};var v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],g=function(t){function e(e){var n=t.call(this,e)||this;return n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(n),n._handleMouseUp=n._handleMouseUp.bind(n),n.update=n.update.bind(n),n.on(d,n.update),n.getNode()&&n.update(),n}return r(e,t),e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){var e=this;this._node&&this.detach(),this._node=t,this._resetTransformCache();var n=t._attrsAffectingSize.map((function(t){return t+"Change.tr-konva"})).join(" "),i=function(){e._resetTransformCache(),e._transforming||e.update()};return t.on(n,i),t.on(y,i),t.on("xChange.tr-konva yChange.tr-konva",(function(){return e._resetTransformCache()})),!!this.findOne(".top-left")&&this.update(),this},e.prototype.getNode=function(){return this._node},e.prototype.detach=function(){this.getNode()&&(this.getNode().off(".tr-konva"),this._node=void 0),this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache("nodeRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache("nodeRect",this.__getNodeRect)},e.prototype.__getNodeRect=function(){var t=this.getNode();if(!t)return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};t.parent&&this.parent&&t.parent!==this.parent&&o.Util.warn("Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.");var e=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),n=h.Konva.getAngle(t.rotation()),i=e.x*t.scaleX()-t.offsetX()*t.scaleX(),r=e.y*t.scaleY()-t.offsetY()*t.scaleY();return{x:t.x()+i*Math.cos(n)+r*Math.sin(-n),y:t.y()+r*Math.cos(n)+i*Math.sin(n),width:e.width*t.scaleX(),height:e.height*t.scaleY(),rotation:t.rotation()}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getRotation=function(){return this._getNodeRect().rotation},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),v.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var e=this,n=new c.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0}),i=this;n.on("mousedown touchstart",(function(t){i._handleMouseDown(t)})),n.on("dragstart",(function(t){t.cancelBubble=!0})),n.on("dragmove",(function(t){t.cancelBubble=!0})),n.on("dragend",(function(t){t.cancelBubble=!0})),n.on("mouseenter",(function(){var i=h.Konva.getAngle(e.rotation()),r=e.getNode().getAbsoluteScale(),a=r.y*r.x<0,s=function(t,e,n){if("rotater"===t)return"crosshair";e+=o.Util._degToRad(m[t]||0),n&&(e*=-1);var i=(o.Util._radToDeg(e)%360+360)%360;return o.Util._inRange(i,337.5,360)||o.Util._inRange(i,0,22.5)?"ns-resize":o.Util._inRange(i,22.5,67.5)?"nesw-resize":o.Util._inRange(i,67.5,112.5)?"ew-resize":o.Util._inRange(i,112.5,157.5)?"nwse-resize":o.Util._inRange(i,157.5,202.5)?"ns-resize":o.Util._inRange(i,202.5,247.5)?"nesw-resize":o.Util._inRange(i,247.5,292.5)?"ew-resize":o.Util._inRange(i,292.5,337.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}(t,i,a);n.getStage().content.style.cursor=s,e._cursorChange=!0})),n.on("mouseout",(function(){n.getStage()&&n.getParent()&&(n.getStage().content.style.cursor="",e._cursorChange=!1)})),this.add(n)},e.prototype._createBack=function(){var t=new l.Shape({name:"back",width:0,height:0,listening:!1,sceneFunc:function(t){var e=this.getParent(),n=e.padding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*o.Util._sign(this.height())-n),t.fillStrokeShape(this)}});this.add(t)},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,i=e.height,r=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/r),this.cos=Math.abs(n/r),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0,this._fire("transformstart",{evt:t}),this.getNode()._fire("transformstart",{evt:t})},e.prototype._handleMouseMove=function(t){var e,n,i,r=this.findOne("."+this._movingAnchorName),a=r.getStage().getContent().getBoundingClientRect(),s=a.left,l=a.top,c={x:(void 0!==t.clientX?t.clientX:t.touches[0].clientX)-s,y:(void 0!==t.clientX?t.clientY:t.touches[0].clientY)-l};r.setAbsolutePosition(c);var u=this.keepRatio()||t.shiftKey,p=this.padding();if("top-left"===this._movingAnchorName){if(u){i=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-r.x()-2*p,2)+Math.pow(this.findOne(".bottom-right").y()-r.y()-2*p,2));var f=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,d=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=i*this.cos*f,n=i*this.sin*d,this.findOne(".top-left").x(this.findOne(".bottom-right").x()-e-2*p),this.findOne(".top-left").y(this.findOne(".bottom-right").y()-n-2*p)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(r.y());else if("top-right"===this._movingAnchorName){if(u){i=Math.sqrt(Math.pow(r.x()-this.findOne(".bottom-left").x()-2*p,2)+Math.pow(this.findOne(".bottom-left").y()-r.y()-2*p,2));f=this.findOne(".top-right").x()<this.findOne(".top-left").x()?-1:1,d=this.findOne(".top-right").y()>this.findOne(".bottom-left").y()?-1:1;e=i*this.cos*f,n=i*this.sin*d,this.findOne(".top-right").x(e+p),this.findOne(".top-right").y(this.findOne(".bottom-left").y()-n-2*p)}var y=r.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(r.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(r.x());else if("bottom-left"===this._movingAnchorName){if(u){i=Math.sqrt(Math.pow(this.findOne(".top-right").x()-r.x()-2*p,2)+Math.pow(r.y()-this.findOne(".top-right").y()-2*p,2));f=this.findOne(".top-right").x()<this.findOne(".bottom-left").x()?-1:1,d=this.findOne(".bottom-right").y()<this.findOne(".top-left").y()?-1:1;e=i*this.cos*f,n=i*this.sin*d,this.findOne(".bottom-left").x(this.findOne(".top-right").x()-e-2*p),this.findOne(".bottom-left").y(n+p)}y=r.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(r.y());else if("bottom-right"===this._movingAnchorName){if(u){i=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-p,2)+Math.pow(this.findOne(".bottom-right").y()-p,2));f=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,d=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=i*this.cos*f,n=i*this.sin*d,this.findOne(".bottom-right").x(e+p),this.findOne(".bottom-right").y(n+p)}}else if("rotater"===this._movingAnchorName){var m=this._getNodeRect();e=r.x()-m.width/2,n=-r.y()+m.height/2;var v=Math.atan2(-n,e)+Math.PI/2;m.height<0&&(v-=Math.PI);for(var g=h.Konva.getAngle(this.rotation()),b=o.Util._radToDeg(g)+o.Util._radToDeg(v),_=h.Konva.getAngle(this.getNode().rotation()),w=o.Util._degToRad(b),x=this.rotationSnaps(),S=0;S<x.length;S++){var k=h.Konva.getAngle(x[S]);Math.abs(k-o.Util._degToRad(b))%(2*Math.PI)<.1&&(b=o.Util._radToDeg(k),w=o.Util._degToRad(b))}var C=p,E=p;this._fitNodeInto({rotation:h.Konva.angleDeg?b:o.Util._degToRad(b),x:m.x+(m.width/2+p)*(Math.cos(_)-Math.cos(w))+(m.height/2+p)*(Math.sin(-_)-Math.sin(-w))-(C*Math.cos(g)+E*Math.sin(-g)),y:m.y+(m.height/2+p)*(Math.cos(_)-Math.cos(w))+(m.width/2+p)*(Math.sin(_)-Math.sin(w))-(E*Math.cos(g)+C*Math.sin(g)),width:m.width+2*p,height:m.height+2*p},t)}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if("rotater"!==this._movingAnchorName){if(this.centeredScaling()||t.altKey){var O=this.findOne(".top-left"),P=this.findOne(".bottom-right"),A=O.x()+p,T=O.y()+p,M=this.getWidth()-P.x()+p,j=this.getHeight()-P.y()+p;P.move({x:-A,y:-T}),O.move({x:M,y:j})}var R=this.findOne(".top-left").getAbsolutePosition(this.getParent());e=R.x,n=R.y;var D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),F=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodeInto({x:e+this.offsetX(),y:n+this.offsetY(),width:D,height:F},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0),this._fire("transformend",{evt:t});var e=this.getNode();e&&e.fire("transformend",{evt:t})}},e.prototype._fitNodeInto=function(t,e){var n=this.boundBoxFunc();if(n){var i=this._getNodeRect();t=n.call(this,i,t)}var r=this.getNode();void 0!==t.rotation&&this.getNode().rotation(t.rotation);var o=r.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=this.padding(),s=(t.width-2*a)/o.width,l=(t.height-2*a)/o.height,c=h.Konva.getAngle(r.rotation()),u=o.x*s-a-r.offsetX()*s,p=o.y*l-a-r.offsetY()*l;this.getNode().setAttrs({scaleX:s,scaleY:l,x:t.x-(u*Math.cos(c)+p*Math.sin(-c)),y:t.y-(p*Math.cos(c)+u*Math.sin(c))}),this._fire("transform",{evt:e}),this.getNode()._fire("transform",{evt:e}),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype.update=function(){var t=this,e=this._getNodeRect(),n=this.getNode(),i={x:1,y:1};n&&n.getParent()&&(i=n.getParent().getAbsoluteScale());var r={x:1/i.x,y:1/i.y},a=e.width,s=e.height,l=this.enabledAnchors(),c=this.resizeEnabled(),u=this.padding(),h=this.anchorSize();this.find("._anchor").each((function(e){return e.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})})),this.findOne(".top-left").setAttrs({x:-u,y:-u,scale:r,visible:c&&l.indexOf("top-left")>=0}),this.findOne(".top-center").setAttrs({x:a/2,y:-u,scale:r,visible:c&&l.indexOf("top-center")>=0}),this.findOne(".top-right").setAttrs({x:a+u,y:-u,scale:r,visible:c&&l.indexOf("top-right")>=0}),this.findOne(".middle-left").setAttrs({x:-u,y:s/2,scale:r,visible:c&&l.indexOf("middle-left")>=0}),this.findOne(".middle-right").setAttrs({x:a+u,y:s/2,scale:r,visible:c&&l.indexOf("middle-right")>=0}),this.findOne(".bottom-left").setAttrs({x:-u,y:s+u,scale:r,visible:c&&l.indexOf("bottom-left")>=0}),this.findOne(".bottom-center").setAttrs({x:a/2,y:s+u,scale:r,visible:c&&l.indexOf("bottom-center")>=0}),this.findOne(".bottom-right").setAttrs({x:a+u,y:s+u,scale:r,visible:c&&l.indexOf("bottom-right")>=0});var p=-this.rotateAnchorOffset()*Math.abs(r.y);this.findOne(".rotater").setAttrs({x:a/2,y:p*o.Util._sign(s)-u,scale:r,visible:this.rotateEnabled()}),this.findOne(".back").setAttrs({width:a*i.x,height:s*i.y,scale:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash()})},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),u.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return s.Node.prototype.toObject.call(this)},e}(u.Group);e.Transformer=g,g.prototype.className="Transformer",f._registerNode(g),a.Factory.addGetterSetter(g,"enabledAnchors",v,(function(t){return t instanceof Array||o.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===v.indexOf(t)&&o.Util.warn("Unknown anchor name: "+t+". Available names are: "+v.join(", "))})),t||[]})),a.Factory.addGetterSetter(g,"resizeEnabled",!0),a.Factory.addGetterSetter(g,"anchorSize",10,p.getNumberValidator()),a.Factory.addGetterSetter(g,"rotateEnabled",!0),a.Factory.addGetterSetter(g,"rotationSnaps",[]),a.Factory.addGetterSetter(g,"rotateAnchorOffset",50,p.getNumberValidator()),a.Factory.addGetterSetter(g,"borderEnabled",!0),a.Factory.addGetterSetter(g,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(g,"anchorStrokeWidth",1,p.getNumberValidator()),a.Factory.addGetterSetter(g,"anchorFill","white"),a.Factory.addGetterSetter(g,"anchorCornerRadius",0,p.getNumberValidator()),a.Factory.addGetterSetter(g,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(g,"borderStrokeWidth",1,p.getNumberValidator()),a.Factory.addGetterSetter(g,"borderDash"),a.Factory.addGetterSetter(g,"keepRatio",!0),a.Factory.addGetterSetter(g,"centeredScaling",!1),a.Factory.addGetterSetter(g,"ignoreStroke",!1),a.Factory.addGetterSetter(g,"padding",0,p.getNumberValidator()),a.Factory.addGetterSetter(g,"node"),a.Factory.addGetterSetter(g,"boundBoxFunc"),a.Factory.backCompat(g,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),o.Collection.mapMethods(g)},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(0),s=n(5),l=n(1),c=n(2),u=n(1),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,l.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(s.Shape);e.Wedge=h,h.prototype.className="Wedge",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["radius"],u._registerNode(h),a.Factory.addGetterSetter(h,"radius",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"angle",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clockwise",!1),a.Factory.backCompat(h,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),o.Collection.mapMethods(h)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,i,r,o,c,u,h,p,f,d,y,m,v,g,b,_,w,x,S,k,C,E,O,P,A=t.data,T=t.width,M=t.height,j=e+e+1,R=T-1,D=M-1,F=e+1,I=F*(F+1)/2,L=new a,N=null,B=L,V=null,G=null,z=s[e],U=l[e];for(r=1;r<j;r++)B=B.next=new a,r===F&&(N=B);for(B.next=L,h=u=0,i=0;i<M;i++){for(_=w=x=S=p=f=d=y=0,m=F*(k=A[u]),v=F*(C=A[u+1]),g=F*(E=A[u+2]),b=F*(O=A[u+3]),p+=I*k,f+=I*C,d+=I*E,y+=I*O,B=L,r=0;r<F;r++)B.r=k,B.g=C,B.b=E,B.a=O,B=B.next;for(r=1;r<F;r++)o=u+((R<r?R:r)<<2),p+=(B.r=k=A[o])*(P=F-r),f+=(B.g=C=A[o+1])*P,d+=(B.b=E=A[o+2])*P,y+=(B.a=O=A[o+3])*P,_+=k,w+=C,x+=E,S+=O,B=B.next;for(V=L,G=N,n=0;n<T;n++)A[u+3]=O=y*z>>U,0!==O?(O=255/O,A[u]=(p*z>>U)*O,A[u+1]=(f*z>>U)*O,A[u+2]=(d*z>>U)*O):A[u]=A[u+1]=A[u+2]=0,p-=m,f-=v,d-=g,y-=b,m-=V.r,v-=V.g,g-=V.b,b-=V.a,o=h+((o=n+e+1)<R?o:R)<<2,p+=_+=V.r=A[o],f+=w+=V.g=A[o+1],d+=x+=V.b=A[o+2],y+=S+=V.a=A[o+3],V=V.next,m+=k=G.r,v+=C=G.g,g+=E=G.b,b+=O=G.a,_-=k,w-=C,x-=E,S-=O,G=G.next,u+=4;h+=T}for(n=0;n<T;n++){for(w=x=S=_=f=d=y=p=0,m=F*(k=A[u=n<<2]),v=F*(C=A[u+1]),g=F*(E=A[u+2]),b=F*(O=A[u+3]),p+=I*k,f+=I*C,d+=I*E,y+=I*O,B=L,r=0;r<F;r++)B.r=k,B.g=C,B.b=E,B.a=O,B=B.next;for(c=T,r=1;r<=e;r++)u=c+n<<2,p+=(B.r=k=A[u])*(P=F-r),f+=(B.g=C=A[u+1])*P,d+=(B.b=E=A[u+2])*P,y+=(B.a=O=A[u+3])*P,_+=k,w+=C,x+=E,S+=O,B=B.next,r<D&&(c+=T);for(u=n,V=L,G=N,i=0;i<M;i++)A[(o=u<<2)+3]=O=y*z>>U,O>0?(O=255/O,A[o]=(p*z>>U)*O,A[o+1]=(f*z>>U)*O,A[o+2]=(d*z>>U)*O):A[o]=A[o+1]=A[o+2]=0,p-=m,f-=v,d-=g,y-=b,m-=V.r,v-=V.g,g-=V.b,b-=V.a,o=n+((o=i+F)<D?o:D)*T<<2,p+=_+=V.r=A[o],f+=w+=V.g=A[o+1],d+=x+=V.b=A[o+2],y+=S+=V.a=A[o+3],V=V.next,m+=k=G.r,v+=C=G.g,g+=E=G.b,b+=O=G.a,_-=k,w-=C,x-=E,S-=O,G=G.next,u+=T}}(t,e)},i.Factory.addGetterSetter(r.Node,"blurRadius",0,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);e.Brighten=function(t){var e,n=255*this.brightness(),i=t.data,r=i.length;for(e=0;e<r;e+=4)i[e]+=n,i[e+1]+=n,i[e+2]+=n},i.Factory.addGetterSetter(r.Node,"brightness",0,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);e.Contrast=function(t){var e,n=Math.pow((this.contrast()+100)/100,2),i=t.data,r=i.length,o=150,a=150,s=150;for(e=0;e<r;e+=4)o=i[e],a=i[e+1],s=i[e+2],o/=255,o-=.5,o*=n,o+=.5,a/=255,a-=.5,a*=n,a+=.5,s/=255,s-=.5,s*=n,s+=.5,o=(o*=255)<0?0:o>255?255:o,a=(a*=255)<0?0:a>255?255:a,s=(s*=255)<0?0:s>255?255:s,i[e]=o,i[e+1]=a,i[e+2]=s},i.Factory.addGetterSetter(r.Node,"contrast",0,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(3),a=n(2);e.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),r=this.embossBlend(),a=0,s=0,l=t.data,c=t.width,u=t.height,h=4*c,p=u;switch(i){case"top-left":a=-1,s=-1;break;case"top":a=-1,s=0;break;case"top-right":a=-1,s=1;break;case"right":a=0,s=1;break;case"bottom-right":a=1,s=1;break;case"bottom":a=1,s=0;break;case"bottom-left":a=1,s=-1;break;case"left":a=0,s=-1;break;default:o.Util.error("Unknown emboss direction: "+i)}do{var f=(p-1)*h,d=a;p+d<1&&(d=0),p+d>u&&(d=0);var y=(p-1+d)*c*4,m=c;do{var v=f+4*(m-1),g=s;m+g<1&&(g=0),m+g>c&&(g=0);var b=y+4*(m-1+g),_=l[v]-l[b],w=l[v+1]-l[b+1],x=l[v+2]-l[b+2],S=_,k=S>0?S:-S;if((w>0?w:-w)>k&&(S=w),(x>0?x:-x)>k&&(S=x),S*=e,r){var C=l[v]+S,E=l[v+1]+S,O=l[v+2]+S;l[v]=C>255?255:C<0?0:C,l[v+1]=E>255?255:E<0?0:E,l[v+2]=O>255?255:O<0?0:O}else{var P=n-S;P<0?P=0:P>255&&(P=255),l[v]=l[v+1]=l[v+2]=P}}while(--m)}while(--p)},i.Factory.addGetterSetter(r.Node,"embossStrength",.5,a.getNumberValidator(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"embossWhiteLevel",.5,a.getNumberValidator(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"embossDirection","top-left",null,i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"embossBlend",!1,null,i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);function a(t,e,n,i,r){var o=n-e,a=r-i;return 0===o?i+a/2:0===a?i:a*((t-e)/o)+i}e.Enhance=function(t){var e,n,i,r,o=t.data,s=o.length,l=o[0],c=l,u=o[1],h=u,p=o[2],f=p,d=this.enhance();if(0!==d){for(r=0;r<s;r+=4)(e=o[r+0])<l?l=e:e>c&&(c=e),(n=o[r+1])<u?u=n:n>h&&(h=n),(i=o[r+2])<p?p=i:i>f&&(f=i);var y,m,v,g,b,_,w,x,S;for(c===l&&(c=255,l=0),h===u&&(h=255,u=0),f===p&&(f=255,p=0),d>0?(m=c+d*(255-c),v=l-d*(l-0),b=h+d*(255-h),_=u-d*(u-0),x=f+d*(255-f),S=p-d*(p-0)):(m=c+d*(c-(y=.5*(c+l))),v=l+d*(l-y),b=h+d*(h-(g=.5*(h+u))),_=u+d*(u-g),x=f+d*(f-(w=.5*(f+p))),S=p+d*(p-w)),r=0;r<s;r+=4)o[r+0]=a(o[r+0],l,c,v,m),o[r+1]=a(o[r+1],u,h,_,b),o[r+2]=a(o[r+2],p,f,S,x)}},i.Factory.addGetterSetter(r.Node,"enhance",0,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=function(t){var e,n,i=t.data,r=i.length;for(e=0;e<r;e+=4)n=.34*i[e]+.5*i[e+1]+.16*i[e+2],i[e]=n,i[e+1]=n,i[e+2]=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);i.Factory.addGetterSetter(r.Node,"hue",0,o.getNumberValidator(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"saturation",0,o.getNumberValidator(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"luminance",0,o.getNumberValidator(),i.Factory.afterSetFilter),e.HSL=function(t){var e,n,i,r,o,a=t.data,s=a.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=127*this.luminance(),h=1*l*Math.cos(c*Math.PI/180),p=1*l*Math.sin(c*Math.PI/180),f=.299+.701*h+.167*p,d=.587-.587*h+.33*p,y=.114-.114*h-.497*p,m=.299-.299*h-.328*p,v=.587+.413*h+.035*p,g=.114-.114*h+.293*p,b=.299-.3*h+1.25*p,_=.587-.586*h-1.05*p,w=.114+.886*h-.2*p;for(e=0;e<s;e+=4)n=a[e+0],i=a[e+1],r=a[e+2],o=a[e+3],a[e+0]=f*n+d*i+y*r+u,a[e+1]=m*n+v*i+g*r+u,a[e+2]=b*n+_*i+w*r+u,a[e+3]=o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);e.HSV=function(t){var e,n,i,r,o,a=t.data,s=a.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,h=l*c*Math.cos(u*Math.PI/180),p=l*c*Math.sin(u*Math.PI/180),f=.299*l+.701*h+.167*p,d=.587*l-.587*h+.33*p,y=.114*l-.114*h-.497*p,m=.299*l-.299*h-.328*p,v=.587*l+.413*h+.035*p,g=.114*l-.114*h+.293*p,b=.299*l-.3*h+1.25*p,_=.587*l-.586*h-1.05*p,w=.114*l+.886*h-.2*p;for(e=0;e<s;e+=4)n=a[e+0],i=a[e+1],r=a[e+2],o=a[e+3],a[e+0]=f*n+d*i+y*r,a[e+1]=m*n+v*i+g*r,a[e+2]=b*n+_*i+w*r,a[e+3]=o},i.Factory.addGetterSetter(r.Node,"hue",0,o.getNumberValidator(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"saturation",0,o.getNumberValidator(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"value",0,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=function(t){var e,n=t.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(3),a=n(2);e.Kaleidoscope=function(t){var e,n,i,r,a,s,l,c,u,h=t.width,p=t.height,f=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),y=Math.floor(h*(d%360)/360);if(!(f<1)){var m=o.Util.createCanvasElement();m.width=h,m.height=p;var v=m.getContext("2d").getImageData(0,0,h,p);!function(t,e,n){var i,r,o,a,s=t.data,l=e.data,c=t.width,u=t.height,h=n.polarCenterX||c/2,p=n.polarCenterY||u/2,f=0,d=0,y=0,m=0,v=Math.sqrt(h*h+p*p);r=c-h,o=u-p,v=(a=Math.sqrt(r*r+o*o))>v?a:v;var g,b,_,w,x=u,S=c,k=360/S*Math.PI/180;for(b=0;b<S;b+=1)for(_=Math.sin(b*k),w=Math.cos(b*k),g=0;g<x;g+=1)r=Math.floor(h+v*g/x*w),f=s[(i=4*((o=Math.floor(p+v*g/x*_))*c+r))+0],d=s[i+1],y=s[i+2],m=s[i+3],l[(i=4*(b+g*c))+0]=f,l[i+1]=d,l[i+2]=y,l[i+3]=m}(t,v,{polarCenterX:h/2,polarCenterY:p/2});for(var g=h/Math.pow(2,f);g<=8;)g*=2,f-=1;var b=g=Math.ceil(g),_=0,w=b,x=1;for(y+g>h&&(_=b,w=0,x=-1),n=0;n<p;n+=1)for(e=_;e!==w;e+=x)c=4*(h*n+Math.round(e+y)%h),r=v.data[c+0],a=v.data[c+1],s=v.data[c+2],l=v.data[c+3],u=4*(h*n+e),v.data[u+0]=r,v.data[u+1]=a,v.data[u+2]=s,v.data[u+3]=l;for(n=0;n<p;n+=1)for(b=Math.floor(g),i=0;i<f;i+=1){for(e=0;e<b+1;e+=1)c=4*(h*n+e),r=v.data[c+0],a=v.data[c+1],s=v.data[c+2],l=v.data[c+3],u=4*(h*n+2*b-e-1),v.data[u+0]=r,v.data[u+1]=a,v.data[u+2]=s,v.data[u+3]=l;b*=2}!function(t,e,n){var i,r,o,a,s,l,c=t.data,u=e.data,h=t.width,p=t.height,f=n.polarCenterX||h/2,d=n.polarCenterY||p/2,y=0,m=0,v=0,g=0,b=Math.sqrt(f*f+d*d);r=h-f,o=p-d,b=(l=Math.sqrt(r*r+o*o))>b?l:b;var _,w,x,S=p,k=h,C=n.polarRotation||0;for(r=0;r<h;r+=1)for(o=0;o<p;o+=1)a=r-f,s=o-d,_=Math.sqrt(a*a+s*s)*S/b,w=(w=(180*Math.atan2(s,a)/Math.PI+360+C)%360)*k/360,x=Math.floor(w),y=c[(i=4*(Math.floor(_)*h+x))+0],m=c[i+1],v=c[i+2],g=c[i+3],u[(i=4*(o*h+r))+0]=y,u[i+1]=m,u[i+2]=v,u[i+3]=g}(v,t,{polarRotation:0})}},i.Factory.addGetterSetter(r.Node,"kaleidoscopePower",2,a.getNumberValidator(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"kaleidoscopeAngle",0,a.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);function a(t,e,n){var i=4*(n*t.width+e),r=[];return r.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),r}function s(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var n=a(t,0,0),i=a(t,t.width-1,0),r=a(t,0,t.height-1),o=a(t,t.width-1,t.height-1),l=e||10;if(s(n,i)<l&&s(i,o)<l&&s(o,r)<l&&s(r,n)<l){for(var c=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([i,n,o,r]),u=[],h=0;h<t.width*t.height;h++){var p=s(c,[t.data[4*h],t.data[4*h+1],t.data[4*h+2]]);u[h]=p<l?0:255}return u}}(t,this.threshold());return e&&function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,e=function(t,e,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(i.length)),o=Math.floor(r/2),a=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<r;h++)for(var p=0;p<r;p++){var f=s+h-o,d=l+p-o;if(f>=0&&f<n&&d>=0&&d<e){var y=i[h*r+p];u+=t[f*e+d]*y}}a[c]=u}return a}(e=function(t,e,n){for(var i=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(i.length)),o=Math.floor(r/2),a=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<r;h++)for(var p=0;p<r;p++){var f=s+h-o,d=l+p-o;if(f>=0&&f<n&&d>=0&&d<e){var y=i[h*r+p];u+=t[f*e+d]*y}}a[c]=u>=1020?255:0}return a}(e=function(t,e,n){for(var i=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(i.length)),o=Math.floor(r/2),a=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<r;h++)for(var p=0;p<r;p++){var f=s+h-o,d=l+p-o;if(f>=0&&f<n&&d>=0&&d<e){var y=i[h*r+p];u+=t[f*e+d]*y}}a[c]=2040===u?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},i.Factory.addGetterSetter(r.Node,"threshold",0,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);e.Noise=function(t){var e,n=255*this.noise(),i=t.data,r=i.length,o=n/2;for(e=0;e<r;e+=4)i[e+0]+=o-2*o*Math.random(),i[e+1]+=o-2*o*Math.random(),i[e+2]+=o-2*o*Math.random()},i.Factory.addGetterSetter(r.Node,"noise",.2,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(4),a=n(2);e.Pixelate=function(t){var e,n,i,o,a,s,l,c,u,h,p,f,d,y,m=Math.ceil(this.pixelSize()),v=t.width,g=t.height,b=Math.ceil(v/m),_=Math.ceil(g/m),w=t.data;if(m<=0)r.Util.error("pixelSize value can not be <= 0");else for(f=0;f<b;f+=1)for(d=0;d<_;d+=1){for(o=0,a=0,s=0,l=0,u=(c=f*m)+m,p=(h=d*m)+m,y=0,e=c;e<u;e+=1)if(!(e>=v))for(n=h;n<p;n+=1)n>=g||(o+=w[(i=4*(v*n+e))+0],a+=w[i+1],s+=w[i+2],l+=w[i+3],y+=1);for(o/=y,a/=y,s/=y,l/=y,e=c;e<u;e+=1)if(!(e>=v))for(n=h;n<p;n+=1)n>=g||(w[(i=4*(v*n+e))+0]=o,w[i+1]=a,w[i+2]=s,w[i+3]=l)}},i.Factory.addGetterSetter(o.Node,"pixelSize",8,a.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);e.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,i=t.data,r=i.length,o=255/n;for(e=0;e<r;e+=1)i[e]=Math.floor(i[e]/o)*o},i.Factory.addGetterSetter(r.Node,"levels",.5,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);e.RGB=function(t){var e,n,i=t.data,r=i.length,o=this.red(),a=this.green(),s=this.blue();for(e=0;e<r;e+=4)n=(.34*i[e]+.5*i[e+1]+.16*i[e+2])/255,i[e]=n*o,i[e+1]=n*a,i[e+2]=n*s,i[e+3]=i[e+3]},i.Factory.addGetterSetter(r.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),i.Factory.addGetterSetter(r.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),i.Factory.addGetterSetter(r.Node,"blue",0,o.RGBComponent,i.Factory.afterSetFilter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);e.RGBA=function(t){var e,n,i=t.data,r=i.length,o=this.red(),a=this.green(),s=this.blue(),l=this.alpha();for(e=0;e<r;e+=4)n=1-l,i[e]=o*l+i[e]*n,i[e+1]=a*l+i[e+1]*n,i[e+2]=s*l+i[e+2]*n},i.Factory.addGetterSetter(r.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),i.Factory.addGetterSetter(r.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),i.Factory.addGetterSetter(r.Node,"blue",0,o.RGBComponent,i.Factory.afterSetFilter),i.Factory.addGetterSetter(r.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=function(t){var e,n,i,r,o=t.data,a=o.length;for(e=0;e<a;e+=4)n=o[e+0],i=o[e+1],r=o[e+2],o[e+0]=Math.min(255,.393*n+.769*i+.189*r),o[e+1]=Math.min(255,.349*n+.686*i+.168*r),o[e+2]=Math.min(255,.272*n+.534*i+.131*r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=function(t){var e=t.data,n=t.width,i=4*n,r=t.height;do{var o=(r-1)*i,a=n;do{var s=o+4*(a-1),l=e[s],c=e[s+1],u=e[s+2];l>127&&(l=255-l),c>127&&(c=255-c),u>127&&(u=255-u),e[s]=l,e[s+1]=c,e[s+2]=u}while(--a)}while(--r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(2);e.Threshold=function(t){var e,n=255*this.threshold(),i=t.data,r=i.length;for(e=0;e<r;e+=1)i[e]=i[e]<n?0:255},i.Factory.addGetterSetter(r.Node,"threshold",.5,o.getNumberValidator(),i.Factory.afterSetFilter)},function(t,e,n){"use strict";var i=n(21);function r(t,e,n){var r=i.extend(n[e.name]||[],t,e,n);Object.defineProperty(n,e.name,{enumerable:e.enumerable,value:r}),r.length&&r.forEach((function(i){t.set(i,e.inverse,n)}))}function o(t,e){if(!(this instanceof o))return new o(t,e);t.inverse=e,e.inverse=t,this.props={},this.props[t.name]=t,this.props[e.name]=e}o.prototype.bind=function(t,e){if("string"==typeof e){if(!this.props[e])throw new Error("no property <"+e+"> in ref");e=this.props[e]}e.collection?r(this,e,t):function(t,e,n){var i=e.inverse,r=n[e.name];Object.defineProperty(n,e.name,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return r},set:function(e){if(e!==r){var o=r;r=null,o&&t.unset(o,i,n),r=e,t.set(r,i,n)}}})}(this,e,t)},o.prototype.ensureRefsCollection=function(t,e){var n=t[e.name];return i.isExtended(n)||r(this,e,t),n},o.prototype.ensureBound=function(t,e){(function(t,e){return Object.prototype.hasOwnProperty.call(t,e.name||e)})(t,e)||this.bind(t,e)},o.prototype.unset=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).remove(n):t[e.name]=void 0)},o.prototype.set=function(t,e,n){t&&(this.ensureBound(t,e),e.collection?this.ensureRefsCollection(t,e).add(n):t[e.name]=n)},t.exports=o},function(t,e,n){},function(t,e,n){"use strict";function i(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.el=document.createElement(e),this.el.className=n):this.el=e,this.data={}}var e,n,o;return e=t,(n=[{key:"data",value:function(t,e){return void 0!==e?(this.data[t]=e,this):this.data[t]}},{key:"on",value:function(t,e){var n=i(t.split(".")),r=n[0],o=n.slice(1),a=r;return"mousewheel"===a&&/Firefox/i.test(window.navigator.userAgent)&&(a="DOMMouseScroll"),this.el.addEventListener(a,(function(t){e(t);for(var n=0;n<o.length;n+=1){var i=o[n];if("left"===i&&0!==t.button)return;if("right"===i&&2!==t.button)return;"stop"===i&&t.stopPropagation()}})),this}},{key:"offset",value:function(t){var e=this;if(void 0!==t)return Object.keys(t).forEach((function(n){e.css(n,"".concat(t[n],"px"))})),this;var n=this.el;return{top:n.offsetTop,left:n.offsetLeft,height:n.offsetHeight,width:n.offsetWidth}}},{key:"scroll",value:function(t){var e=this.el;return void 0!==t&&(void 0!==t.left&&(e.scrollLeft=t.left),void 0!==t.top&&(e.scrollTop=t.top)),{left:e.scrollLeft,top:e.scrollTop}}},{key:"box",value:function(){return this.el.getBoundingClientRect()}},{key:"parent",value:function(){return new t(this.el.parentNode)}},{key:"children",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return 0===arguments.length?this.el.childNodes:(n.forEach((function(e){return t.child(e)})),this)}},{key:"child",value:function(e){var n=e;return"string"==typeof e?n=document.createTextNode(e):e instanceof t&&(n=e.el),this.el.appendChild(n),this}},{key:"contains",value:function(t){return this.el.contains(t)}},{key:"className",value:function(t){return void 0!==t?(this.el.className=t,this):this.el.className}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"hasClass",value:function(t){return this.el.classList.contains(t)}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";return this.toggleClass(t)}},{key:"toggleClass",value:function(t){return this.el.classList.toggle(t)}},{key:"active",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";return t?this.addClass(e):this.removeClass(e),this}},{key:"checked",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.active(t,"checked"),this}},{key:"disabled",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?this.addClass("disabled"):this.removeClass("disabled"),this}},{key:"attr",value:function(t,e){var n=this;if(void 0!==e)this.el.setAttribute(t,e);else{if("string"==typeof t)return this.el.getAttribute(t);Object.keys(t).forEach((function(e){n.el.setAttribute(e,t[e])}))}return this}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"html",value:function(t){return void 0!==t?(this.el.innerHTML=t,this):this.el.innerHTML}},{key:"val",value:function(t){return void 0!==t?(this.el.value=t,this):this.el.value}},{key:"cssRemoveKeys",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){return t.el.style.removeProperty(e)})),this}},{key:"css",value:function(t,e){var n=this;return void 0===e&&"string"!=typeof t?(Object.keys(t).forEach((function(e){n.el.style[e]=t[e]})),this):void 0!==e?(this.el.style[t]=e,this):this.el.style[t]}},{key:"computedStyle",value:function(){return window.getComputedStyle(this.el,null)}},{key:"show",value:function(){return this.css("display","block"),this}},{key:"hide",value:function(){return this.css("display","none"),this}}])&&r(e.prototype,n),o&&r(e,o),t}(),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new o(t,e)};function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function c(t){for(var e="",n=t;n>=l.length;)n/=l.length,n-=1,e+=l[parseInt(n,10)%l.length];var i=t%l.length;return e+=l[i]}function u(t){for(var e=0,n=0;n<t.length-1;n+=1){var i=t.charCodeAt(n)-65,r=t.length-1-n;e+=Math.pow(l.length,r)+l.length*i}return e+=t.charCodeAt(t.length-1)-65}function h(t){for(var e="",n="",i=0;i<t.length;i+=1)t.charAt(i)>="0"&&t.charAt(i)<="9"?n+=t.charAt(i):e+=t.charAt(i);return[u(e),parseInt(n,10)-1]}function p(t,e,n){var i=s(h(t),2),r=i[0],o=i[1];return c(r+e)+(o+n)}function f(t,e){return"".concat(c(t)).concat(e+1)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sri=e,this.sci=n,this.eri=i,this.eci=r,this.w=o,this.h=a}var e,n,i;return e=t,i=[{key:"valueOf",value:function(e){var n=e.split(":"),i=d(h(n[0]),2),r=i[0],o=i[1],a=o,s=r;if(n.length>1){var l=d(h(n[1]),2);s=l[0],a=l[1]}return new t(o,r,a,s)}}],(n=[{key:"set",value:function(t,e,n,i){this.sri=t,this.sci=e,this.eri=n,this.eci=i}},{key:"multiple",value:function(){return this.eri-this.sri>0||this.eci-this.sci>0}},{key:"includes",value:function(){for(var t=0,e=0,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];if(1===i.length){var o=h(i[0]),a=d(o,2);e=a[0],t=a[1]}else 2===i.length&&(t=i[0],e=i[1]);var s=this.sri,l=this.sci,c=this.eri,u=this.eci;return s<=t&&t<=c&&l<=e&&e<=u}},{key:"each",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=this.sri,i=this.sci,r=this.eri,o=this.eci,a=n;a<=r;a+=1)if(e(a))for(var s=i;s<=o;s+=1)t(a,s)}},{key:"contains",value:function(t){return this.sri<=t.sri&&this.sci<=t.sci&&this.eri>=t.eri&&this.eci>=t.eci}},{key:"within",value:function(t){return this.sri>=t.sri&&this.sci>=t.sci&&this.eri<=t.eri&&this.eci<=t.eci}},{key:"disjoint",value:function(t){return this.sri>t.eri||this.sci>t.eci||t.sri>this.eri||t.sci>this.eci}},{key:"intersects",value:function(t){return this.sri<=t.eri&&this.sci<=t.eci&&t.sri<=this.eri&&t.sci<=this.eci}},{key:"union",value:function(e){var n=this.sri,i=this.sci,r=this.eri,o=this.eci;return new t(e.sri<n?e.sri:n,e.sci<i?e.sci:i,e.eri>r?e.eri:r,e.eci>o?e.eci:o)}},{key:"difference",value:function(e){var n=[],i=function(e,i,r,o){n.push(new t(e,i,r,o))},r=this.sri,o=this.sci,a=this.eri,s=this.eci,l=e.sri-r,c=e.sci-o,u=a-e.eri,h=s-e.eci;return l>0?(i(r,o,e.sri-1,s),u>0?(i(e.eri+1,o,a,s),c>0&&i(e.sri,o,e.eri,e.sci-1),h>0&&i(e.sri,e.eci+1,e.eri,s)):(c>0&&i(e.sri,o,a,e.sci-1),h>0&&i(e.sri,e.eci+1,a,s))):u>0&&(i(e.eri+1,o,a,s),c>0&&i(r,o,e.eri,e.sci-1),h>0&&i(r,e.eci+1,e.eri,s)),c>0?(i(r,o,a,e.sci-1),h>0?(i(r,e.eri+1,a,s),l>0&&i(r,e.sci,e.sri-1,e.eci),u>0&&i(e.sri+1,e.sci,a,e.eci)):(l>0&&i(r,e.sci,e.sri-1,s),u>0&&i(e.sri+1,e.sci,a,s))):h>0&&(i(a,e.eci+1,a,s),l>0&&i(r,o,e.sri-1,e.eci),u>0&&i(e.eri+1,o,a,e.eci)),n}},{key:"size",value:function(){return[this.eri-this.sri+1,this.eci-this.sci+1]}},{key:"toString",value:function(){var t=this.sri,e=this.sci,n=this.eri,i=this.eci,r=f(e,t);return this.multiple()&&(r="".concat(r,":").concat(f(i,n))),r}},{key:"clone",value:function(){return new t(this.sri,this.sci,this.eri,this.eci,this.w,this.h)}},{key:"equals",value:function(t){return this.eri===t.eri&&this.eci===t.eci&&this.sri===t.sri&&this.sci===t.sci}}])&&y(e.prototype,n),i&&y(e,i),t}();function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.range=new m(0,0,0,0),this.ri=0,this.ci=0}var e,n,i;return e=t,(n=[{key:"multiple",value:function(){return this.range.multiple()}},{key:"setIndexes",value:function(t,e){this.ri=t,this.ci=e}},{key:"size",value:function(){return this.range.size()}}])&&v(e.prototype,n),i&&v(e,i),t}();var b=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=0,this.y=0,this.ri=0,this.ci=0};function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.undoItems=[],this.redoItems=[]}var e,n,i;return e=t,(n=[{key:"add",value:function(t){this.undoItems.push(JSON.stringify(t)),this.redoItems=[]}},{key:"canUndo",value:function(){return this.undoItems.length>0}},{key:"canRedo",value:function(){return this.redoItems.length>0}},{key:"undo",value:function(t,e){var n=this.undoItems,i=this.redoItems;this.canUndo()&&(i.push(JSON.stringify(t)),e(JSON.parse(n.pop())))}},{key:"redo",value:function(t,e){var n=this.undoItems,i=this.redoItems;this.canRedo()&&(n.push(JSON.stringify(t)),e(JSON.parse(i.pop())))}}])&&_(e.prototype,n),i&&_(e,i),t}();function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.range=null,this.state="clear"}var e,n,i;return e=t,(n=[{key:"copy",value:function(t){return this.range=t,this.state="copy",this}},{key:"cut",value:function(t){return this.range=t,this.state="cut",this}},{key:"isCopy",value:function(){return"copy"===this.state}},{key:"isCut",value:function(){return"cut"===this.state}},{key:"isClear",value:function(){return"clear"===this.state}},{key:"clear",value:function(){this.range=null,this.state="clear"}}])&&x(e.prototype,n),i&&x(e,i),t}();function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),t}var O=function(){function t(e,n,i){k(this,t),this.ci=e,this.operator=n,this.value=i}return E(t,[{key:"set",value:function(t,e){this.operator=t,this.value=e}},{key:"includes",value:function(t){var e=this.operator,n=this.value;return"all"===e||"in"===e&&n.includes(t)}},{key:"vlength",value:function(){var t=this.operator,e=this.value;return"in"===t?e.length:0}},{key:"getData",value:function(){return{ci:this.ci,operator:this.operator,value:this.value}}}]),t}(),P=function(){function t(e,n){k(this,t),this.ci=e,this.order=n}return E(t,[{key:"asc",value:function(){return"asc"===this.order}},{key:"desc",value:function(){return"desc"===this.order}}]),t}(),A=function(){function t(){k(this,t),this.ref=null,this.filters=[],this.sort=null}return E(t,[{key:"setData",value:function(t){var e=t.ref,n=t.filters,i=t.sort;null!=e&&(this.ref=e,this.fitlers=n.map((function(t){return new O(t.ci,t.operator,t.value)})),i&&(this.sort=new P(i.ci,i.order)))}},{key:"getData",value:function(){if(this.active()){var t=this.ref,e=this.filters,n=this.sort;return{ref:t,filters:e.map((function(t){return t.getData()})),sort:n}}return{}}},{key:"addFilter",value:function(t,e,n){var i=this.getFilter(t);null==i?this.filters.push(new O(t,e,n)):i.set(e,n)}},{key:"setSort",value:function(t,e){this.sort=e?new P(t,e):null}},{key:"includes",value:function(t,e){return!!this.active()&&this.hrange().includes(t,e)}},{key:"getSort",value:function(t){var e=this.sort;return e&&e.ci===t?e:null}},{key:"getFilter",value:function(t){for(var e=this.filters,n=0;n<e.length;n+=1)if(e[n].ci===t)return e[n];return null}},{key:"filteredRows",value:function(t){var e=new Set,n=new Set;if(this.active())for(var i=this.range(),r=i.sri,o=i.eri,a=this.filters,s=r+1;s<=o;s+=1)for(var l=0;l<a.length;l+=1){var c=a[l],u=t(s,c.ci),h=u?u.text:"";if(!c.includes(h)){e.add(s);break}n.add(s)}return{rset:e,fset:n}}},{key:"items",value:function(t,e){var n={};if(this.active())for(var i=this.range(),r=i.sri,o=i.eri,a=r+1;a<=o;a+=1){var s=e(a,t);if(null===s||/^\s*$/.test(s.text))n[""]=(n[""]||0)+1;else{var l=s.text,c=(n[l]||0)+1;n[l]=c}}return n}},{key:"range",value:function(){return m.valueOf(this.ref)}},{key:"hrange",value:function(){var t=this.range();return t.eri=t.sri,t}},{key:"clear",value:function(){this.ref=null,this.filters=[],this.sort=null}},{key:"active",value:function(){return null!==this.ref}}]),t}();function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._=e}var e,n,i;return e=t,(n=[{key:"forEach",value:function(t){this._.forEach(t)}},{key:"deleteWithin",value:function(t){this._=this._.filter((function(e){return!e.within(t)}))}},{key:"getFirstIncludes",value:function(t,e){for(var n=0;n<this._.length;n+=1){var i=this._[n];if(i.includes(t,e))return i}return null}},{key:"filterIntersects",value:function(e){return new t(this._.filter((function(t){return t.intersects(e)})))}},{key:"intersects",value:function(t){for(var e=0;e<this._.length;e+=1)if(this._[e].intersects(t))return!0;return!1}},{key:"union",value:function(t){var e=t;return this._.forEach((function(t){t.intersects(e)&&(e=t.union(e))})),e}},{key:"add",value:function(t){this.deleteWithin(t),this._.push(t)}},{key:"shift",value:function(t,e,n,i){this._.forEach((function(r){var o=r.sri,a=r.sci,s=r.eri,l=r.eci,c=r;"row"===t?o>=e?(c.sri+=n,c.eri+=n):o<e&&e<=s&&(c.eri+=n,i(o,a,n,0)):"column"===t&&(a>=e?(c.sci+=n,c.eci+=n):a<e&&e<=l&&(c.eci+=n,i(o,a,0,n)))}))}},{key:"move",value:function(t,e,n){this._.forEach((function(i){var r=i;r.within(t)&&(r.eri+=e,r.sri+=e,r.sci+=n,r.eci+=n)}))}},{key:"setData",value:function(t){return this._=t.map((function(t){return m.valueOf(t)})),this}},{key:"getData",value:function(){return this._.map((function(t){return t.toString()}))}}])&&T(e.prototype,n),i&&T(e,i),t}();var j=function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((function(n){Object.keys(n).forEach((function(i){var r=n[i];"string"==typeof r||"number"==typeof r||"boolean"==typeof r?e[i]=r:"function"!=typeof r&&!Array.isArray(r)&&r instanceof Object?(e[i]=e[i]||{},t(e[i],r)):e[i]=r}))})),e};var R={cloneDeep:function(t){return JSON.parse(JSON.stringify(t))},merge:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return j.apply(void 0,[{}].concat(e))},equals:function t(e,n){var i=Object.keys(e);if(i.length!==Object.keys(n).length)return!1;for(var r=0;r<i.length;r+=1){var o=i[r],a=e[o],s=n[o];if(void 0===s)return!1;if("string"==typeof a||"number"==typeof a||"boolean"==typeof a){if(a!==s)return!1}else if(Array.isArray(a)){if(a.length!==s.length)return!1;for(var l=0;l<a.length;l+=1)if(!t(a[l],s[l]))return!1}else if("function"!=typeof a&&!Array.isArray(a)&&a instanceof Object&&!t(a,s))return!1}return!0},arrayEquals:function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0},sum:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=0,i=0;return Object.keys(t).forEach((function(r){n+=e(t[r],r),i+=1})),[n,i]},rangeEach:function(t,e,n){for(var i=t;i<e;i+=1)n(i)},rangeSum:function(t,e,n){for(var i=0,r=t;r<e;r+=1)i+=n(r);return i},rangeReduceIf:function(t,e,n,i,r,o){for(var a=n,s=i,l=t;l<e&&!(a>r);l+=1)a+=s=o(l);return[l,a-s,s]},deleteProperty:function(t,e){var n=t["".concat(e)];return delete t["".concat(e)],n}};function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function F(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var I=function(){function t(e){var n=e.len,i=e.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._={},this.len=n,this.height=i}var e,n,i;return e=t,(n=[{key:"getHeight",value:function(t){var e=this.get(t);return e&&e.height?e.height:this.height}},{key:"setHeight",value:function(t,e){this.getOrNew(t).height=e}},{key:"setStyle",value:function(t,e){this.getOrNew(t).style=e}},{key:"sumHeight",value:function(t,e,n){var i=this;return R.rangeSum(t,e,(function(t){return n&&n.has(t)?0:i.getHeight(t)}))}},{key:"totalHeight",value:function(){return this.sumHeight(0,this.len)}},{key:"get",value:function(t){return this._[t]}},{key:"getOrNew",value:function(t){return this._[t]=this._[t]||{cells:{}},this._[t]}},{key:"getCell",value:function(t,e){var n=this.get(t);return void 0!==n&&void 0!==n.cells&&void 0!==n.cells[e]?n.cells[e]:null}},{key:"getCellMerge",value:function(t,e){var n=this.getCell(t,e);return n&&n.merge?n.merge:[0,0]}},{key:"getCellOrNew",value:function(t,e){var n=this.getOrNew(t);return n.cells[e]=n.cells[e]||{},n.cells[e]}},{key:"setCell",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",r=this.getOrNew(t);"all"===i?r.cells[e]=n:"text"===i?(r.cells[e]=r.cells[e]||{},r.cells[e].text=n.text):"format"===i&&(r.cells[e]=r.cells[e]||{},r.cells[e].style=n.style,n.merge&&(r.cells[e].merge=n.merge))}},{key:"setCellText",value:function(t,e,n){this.getCellOrNew(t,e).text=n}},{key:"copyPaste",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o=t.sri,a=t.sci,s=t.eri,l=t.eci,c=e.sri,u=e.sci,h=e.eri,f=e.eci,d=t.size(),y=D(d,2),m=y[0],v=y[1],g=e.size(),b=D(g,2),_=b[0],w=b[1],x=!0,S=0;(h<o||f<a)&&(x=!1,S=h<o?_:w);for(var k=o;k<=s;k+=1)if(this._[k])for(var C=a;C<=l;C+=1)if(this._[k].cells&&this._[k].cells[C])for(var E=c;E<=h;E+=m)for(var O=u;O<=f;O+=v){var P=E+(k-o),A=O+(C-a),T=R.cloneDeep(this._[k].cells[C]);i&&T&&T.text&&T.text.length>0&&function(){var t=T.text,e=O-u+(E-c)+1;if(x||(e-=S+1),"="===t[0])T.text=t.replace(/\w{1,3}\d/g,(function(t){var n=0,i=0;return o===c?n=e:i=e,p(t,n,i)}));else{var n=/[\\.\d]+$/.exec(t);if(null!==n){var i=Number(n[0])+e;T.text=t.substring(0,n.index)+i}}}(),this.setCell(P,A,T,n),r(P,A,T)}}},{key:"cutPaste",value:function(t,e){var n=this,i={};this.each((function(r){n.eachCells(r,(function(o){var a=parseInt(r,10),s=parseInt(o,10);t.includes(r,o)&&(a=e.sri+(a-t.sri),s=e.sci+(s-t.sci)),i[a]=i[a]||{cells:{}},i[a].cells[s]=n._[r].cells[o]}))})),this._=i}},{key:"insert",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={};this.each((function(i,r){var o=parseInt(i,10);o>=t&&(o+=e),n[o]=r})),this._=n,this.len+=e}},{key:"delete",value:function(t,e){var n=e-t+1,i={};this.each((function(r,o){var a=parseInt(r,10);a<t?i[a]=o:r>e&&(i[a-n]=o)})),this._=i,this.len-=n}},{key:"insertColumn",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.each((function(i,r){var o={};e.eachCells(i,(function(e,i){var r=parseInt(e,10);r>=t&&(r+=n),o[r]=i})),r.cells=o}))}},{key:"deleteColumn",value:function(t,e){var n=this,i=e-t+1;this.each((function(r,o){var a={};n.eachCells(r,(function(n,r){var o=parseInt(n,10);o<t?a[o]=r:o>e&&(a[o-i]=r)})),o.cells=a}))}},{key:"deleteCells",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";t.each((function(t,i){e.deleteCell(t,i,n)}))}},{key:"deleteCell",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",i=this.get(t);if(null!==i){var r=this.getCell(t,e);null!==r&&("all"===n?delete i.cells[e]:"text"===n?(r.text&&delete r.text,r.value&&delete r.value):"format"===n?(void 0!==r.style&&delete r.style,r.merge&&delete r.merge):"merge"===n&&r.merge&&delete r.merge)}}},{key:"each",value:function(t){Object.entries(this._).forEach((function(e){var n=D(e,2),i=n[0],r=n[1];t(i,r)}))}},{key:"eachCells",value:function(t,e){this._[t]&&this._[t].cells&&Object.entries(this._[t].cells).forEach((function(t){var n=D(t,2),i=n[0],r=n[1];e(i,r)}))}},{key:"setData",value:function(t){t.len&&(this.len=t.len,delete t.len),this._=t}},{key:"getData",value:function(){var t=this.len;return Object.assign({len:t},this._)}}])&&F(e.prototype,n),i&&F(e,i),t}();function L(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var N=function(){function t(e){var n=e.len,i=e.width,r=e.indexWidth,o=e.minWidth;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._={},this.len=n,this.width=i,this.indexWidth=r,this.minWidth=o}var e,n,i;return e=t,(n=[{key:"setData",value:function(t){console.log("col setData:",t),t.len&&(this.len=t.len,delete t.len),this._=t}},{key:"getData",value:function(){var t=this.len;return Object.assign({len:t},this._)}},{key:"getWidth",value:function(t){var e=this._[t];return e&&e.width?e.width:this.width}},{key:"getOrNew",value:function(t){return this._[t]=this._[t]||{},this._[t]}},{key:"setWidth",value:function(t,e){console.log("col setWidth: ",t,e),this.getOrNew(t).width=e}},{key:"setStyle",value:function(t,e){this.getOrNew(t).style=e}},{key:"sumWidth",value:function(t,e){var n=this;return R.rangeSum(t,e,(function(t){return n.getWidth(t)}))}},{key:"totalWidth",value:function(){return this.sumWidth(0,this.len)}}])&&L(e.prototype,n),i&&L(e,i),t}(),B="en",V={en:{toolbar:{undo:"Undo",redo:"Redo",paintformat:"Paint format",clearformat:"Clear format",format:"Format",font:"Font",fontSize:"Font size",fontBold:"Font bold",fontItalic:"Font italic",underline:"Underline",strike:"Strike",textColor:"Text color",fillColor:"Fill color",border:"Borders",merge:"Merge cells",align:"Horizontal align",valign:"Vertical align",textwrap:"Text wrapping",freeze:"Freeze cell",overlayer:"OverLayer enable",autofilter:"Filter",formula:"Functions",more:"More"},contextmenu:{copy:"Copy",cut:"Cut",paste:"Paste",pasteValue:"Paste values only",pasteFormat:"Paste format only",insertRow:"Insert row",insertColumn:"Insert column",deleteRow:"Delete row",deleteColumn:"Delete column",deleteCell:"Delete cell",deleteCellText:"Delete cell text",validation:"Data validations"},format:{normal:"Normal",text:"Plain Text",number:"Number",percent:"Percent",rmb:"RMB",usd:"USD",date:"Date",time:"Time",datetime:"Date time",duration:"Duration"},formula:{sum:"Sum",average:"Average",max:"Max",min:"Min",concat:"Concat"},validation:{required:"it must be required",notMatch:"it not match its validation rule",between:"it is between {} and {}",notBetween:"it is not between {} and {}",notIn:"it is not in list",equal:"it equal to {}",notEqual:"it not equal to {}",lessThan:"it less than {}",lessThanEqual:"it less than or equal to {}",greaterThan:"it greater than {}",greaterThanEqual:"it greater than or equal to {}"},error:{pasteForMergedCell:"Unable to do this for merged cells"},calendar:{weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},button:{cancel:"Cancel",remove:"Remove",save:"Save",ok:"OK"},sort:{desc:"Sort Z -> A",asc:"Sort A -> Z"},filter:{empty:"empty"},dataValidation:{mode:"Mode",range:"Cell Range",criteria:"Criteria",modeType:{cell:"Cell",column:"Colun",row:"Row"},type:{list:"List",number:"Number",date:"Date",phone:"Phone",email:"Email"},operator:{be:"between",nbe:"not betwwen",lt:"less than",lte:"less than or equal to",gt:"greater than",gte:"greater than or equal to",eq:"equal to",neq:"not equal to"}}}};function G(t,e){if(e&&e[B])for(var n=e[B],i=t.split("."),r=0;r<i.length;r+=1){var o=n[i[r]];if(r===i.length-1)return o;if(!o)return;n=o}}function z(t){var e=G(t,V);return!e&&window&&window.x&&window.x.spreadsheet&&window.x.spreadsheet.$messages&&(e=G(t,window.x.spreadsheet.$messages)),e||""}function U(t){return function(){return z(t)}}function W(t,e){B=t,e&&(V[t]=e)}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function K(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var q={phone:/^[1-9]\d{10}$/,email:/w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/};function Y(t,e){var n="";if(!t){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];n=z.apply(void 0,["validation.".concat(e)].concat(r))}return[t,n]}var X=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.required=n,this.value=i,this.type=e,this.operator=r,this.message=""}var e,n,i;return e=t,(n=[{key:"parseValue",value:function(t){var e=this.type;return"date"===e?new Date(t):"number"===e?Number(t):t}},{key:"equals",value:function(t){var e=this.type===t.type&&this.required===t.required&&this.operator===t.operator;return e&&(e=Array.isArray(this.value)?R.arrayEquals(this.value,t.value):this.value===t.value),e}},{key:"values",value:function(){return this.value.split(",")}},{key:"validate",value:function(t){var e=this.required,n=this.operator,i=this.value,r=this.type;if(e&&/^\s*$/.test(t))return Y(!1,"required");if(/^\s*$/.test(t))return[!0];if(q[r]&&!q[r].test(t))return Y(!1,"notMatch");if("list"===r)return Y(this.values().includes(t),"notIn");if(n){var o=this.parseValue(t);if("be"===n){var a=H(i,2),s=a[0],l=a[1];return Y(o>=this.parseValue(s)&&o<=this.parseValue(l),"between",s,l)}if("nbe"===n){var c=H(i,2),u=c[0],h=c[1];return Y(o<this.parseValue(u)||o>this.parseValue(h),"notBetween",u,h)}if("eq"===n)return Y(o===this.parseValue(i),"equal",i);if("neq"===n)return Y(o!==this.parseValue(i),"notEqual",i);if("lt"===n)return Y(o<this.parseValue(i),"lessThan",i);if("lte"===n)return Y(o<=this.parseValue(i),"lessThanEqual",i);if("gt"===n)return Y(o>this.parseValue(i),"greaterThan",i);if("gte"===n)return Y(o>=this.parseValue(i),"greaterThanEqual",i)}return[!0]}}])&&K(e.prototype,n),i&&K(e,i),t}();function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tt(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}var et=function(){function t(e,n,i){Z(this,t),this.refs=n,this.mode=e,this.validator=i}return tt(t,[{key:"includes",value:function(t,e){for(var n=this.refs,i=0;i<n.length;i+=1){if(m.valueOf(n[i]).includes(t,e))return!0}return!1}},{key:"addRef",value:function(t){this.remove(m.valueOf(t)),this.refs.push(t)}},{key:"remove",value:function(t){var e=[];this.refs.forEach((function(n){var i=m.valueOf(n);i.intersects(t)?i.difference(t).forEach((function(t){return e.push(t.toString())})):e.push(n)})),this.refs=e}},{key:"getData",value:function(){var t=this.refs,e=this.mode,n=this.validator;return{refs:t,mode:e,type:n.type,required:n.required,operator:n.operator,value:n.value}}}],[{key:"valueOf",value:function(e){var n=e.refs,i=e.mode,r=e.type,o=e.required,a=e.operator,s=e.value;return new t(i,n,new X(r,o,s,a))}}]),t}(),nt=function(){function t(){Z(this,t),this._=[],this.errors=new Map}return tt(t,[{key:"getError",value:function(t,e){return this.errors.get("".concat(t,"_").concat(e))}},{key:"validate",value:function(t,e,n){var i=this.get(t,e),r="".concat(t,"_").concat(e),o=this.errors;if(null!==i){var a=J(i.validator.validate(n),2),s=a[0],l=a[1];s?o.delete(r):o.set(r,l)}else o.delete(r);return!0}},{key:"add",value:function(t,e,n){var i=n.type,r=n.required,o=n.value,a=n.operator,s=new X(i,r,o,a),l=this.getByValidator(s);null!==l?l.addRef(e):this._.push(new et(t,[e],s))}},{key:"getByValidator",value:function(t){for(var e=0;e<this._.length;e+=1){var n=this._[e];if(n.validator.equals(t))return n}return null}},{key:"get",value:function(t,e){for(var n=0;n<this._.length;n+=1){var i=this._[n];if(i.includes(t,e))return i}return null}},{key:"remove",value:function(t){this.each((function(e){e.remove(t)}))}},{key:"each",value:function(t){this._.forEach((function(e){return t(e)}))}},{key:"getData",value:function(){return this._.filter((function(t){return t.refs.length>0})).map((function(t){return t.getData()}))}},{key:"setData",value:function(t){this._=t.map((function(t){return et.valueOf(t)}))}}]),t}();function it(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var rt=function(){function t(e){var n=e.draggable;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._={},this.draggable=n}var e,n,i;return e=t,(n=[{key:"setData",value:function(t){console.log("shapes setData:",t),this._=t}},{key:"getData",value:function(){return Object.assign(this._)}}])&&it(e.prototype,n),i&&it(e,i),t}();function ot(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function at(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function st(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var lt={view:{height:function(){return document.documentElement.clientHeight},width:function(){return document.documentElement.clientWidth}},showGrid:!0,showToolbar:!0,showContextmenu:!0,row:{len:1e3,height:20},col:{len:1e3,width:100,indexWidth:60,minWidth:60},shape:{draggable:!0},style:{bgcolor:"#ffffff",align:"left",valign:"middle",textwrap:!1,strike:!1,underline:!1,color:"#0a0a0a",font:{name:"Arial",size:10,bold:!1,italic:!1}}};function ct(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=this.merges,r=e.clone(),o=st(t.size(),2),a=o[0],s=o[1],l=st(e.size(),2),c=l[0],u=l[1];return a>c&&(r.eri=e.sri+a-1),s>u&&(r.eci=e.sci+s-1),!i.intersects(r)||(n(z("error.pasteForMergedCell")),!1)}function ut(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.rows,o=this.merges;"all"!==n&&"format"!==n||(r.deleteCells(e,n),o.deleteWithin(e)),r.copyPaste(t,e,n,i,(function(t,e,n){if(n&&n.merge){var i=st(n.merge,2),r=i[0],a=i[1];if(r<=0&&a<=0)return;o.add(new m(t,e,t+r,e+a))}}))}function ht(t,e){var n=this.clipboard,i=this.rows,r=this.merges;i.cutPaste(t,e),r.move(t,e.sri-t.sri,e.sci-t.sci),n.clear()}function pt(t,e,n){var i=this.styles,r=this.rows.getCellOrNew(t,e),o={};void 0!==r.style&&(o=R.cloneDeep(i[r.style])),Object.assign(o,{border:n}),r.style=this.addStyle(o)}function ft(t){var e=this,n=t.mode,i=t.style,r=t.color,o=this.styles,a=this.selector,s=this.rows,l=a.range,c=l.sri,u=l.sci,h=l.eri,p=l.eci,f=!this.isSignleSelected();if(f||"inside"!==n&&"horizontal"!==n&&"vertical"!==n)if("outside"!==n||f){if("none"===n)a.range.each((function(t,n){var i=s.getCell(t,n);if(i&&void 0!==i.style){var r=R.cloneDeep(o[i.style]);delete r.border,i.style=e.addStyle(r)}}));else if("all"===n||"inside"===n||"outside"===n||"horizontal"===n||"vertical"===n)!function(){for(var t=[],o=c;o<=h;o+=1)for(var a=u;a<=p;a+=1){for(var l=[],d=0;d<t.length;d+=1){var y=st(t[d],4),m=y[0],v=y[1],g=y[2],b=y[3];if(o===m+g+1&&l.push(d),m<=o&&o<=m+g&&a===v){a+=b+1;break}}if(l.forEach((function(e){return t.splice(e,1)})),a>p)break;var _=s.getCell(o,a),w=0,x=0;if(_&&_.merge){var S=st(_.merge,2);w=S[0],x=S[1],t.push([o,a,w,x])}var k=w>0&&o+w===h,C=x>0&&a+x===p,E={};"all"===n?E={bottom:[i,r],top:[i,r],left:[i,r],right:[i,r]}:"inside"===n?(!C&&a<p&&(E.right=[i,r]),!k&&o<h&&(E.bottom=[i,r])):"horizontal"===n?!k&&o<h&&(E.bottom=[i,r]):"vertical"===n?!C&&a<p&&(E.right=[i,r]):"outside"===n&&f&&(c===o&&(E.top=[i,r]),(k||h===o)&&(E.bottom=[i,r]),u===a&&(E.left=[i,r]),(C||p===a)&&(E.right=[i,r])),Object.keys(E).length>0&&pt.call(e,o,a,E),a+=x}}();else if("top"===n||"bottom"===n)for(var d=u;d<=p;d+=1)"top"===n&&(pt.call(this,c,d,{top:[i,r]}),d+=s.getCellMerge(c,d)[1]),"bottom"===n&&(pt.call(this,h,d,{bottom:[i,r]}),d+=s.getCellMerge(h,d)[1]);else if("left"===n||"right"===n)for(var y=c;y<=h;y+=1)"left"===n&&(pt.call(this,y,u,{left:[i,r]}),y+=s.getCellMerge(y,u)[0]),"right"===n&&(pt.call(this,y,p,{right:[i,r]}),y+=s.getCellMerge(y,p)[0])}else pt.call(this,c,u,{top:[i,r],bottom:[i,r],left:[i,r],right:[i,r]})}function dt(t,e){var n=this.rows,i=this.freezeTotalHeight(),r=n.height;i+n.height<t&&(r-=e);for(var o=this.exceptRowSet,a=0,s=r,l=n.height;a<n.len&&!(s>t);a+=1)o.has(a)||(s+=l=n.getHeight(a));return(s-=l)<=0?{ri:-1,top:0,height:l}:{ri:a-1,top:s,height:l}}function yt(t,e){var n=this.cols,i=this.freezeTotalWidth(),r=n.indexWidth;i+n.indexWidth<t&&(r-=e);var o=st(R.rangeReduceIf(0,n.len,r,n.indexWidth,t,(function(t){return n.getWidth(t)})),3),a=o[0],s=o[1],l=o[2];return s<=0?{ci:-1,left:0,width:n.indexWidth}:{ci:a-1,left:s,width:l}}var mt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.settings=R.merge(lt,n||{}),this.name=e||"sheet",this.freeze=[0,0],this.styles=[],this.merges=new M,this.rows=new I(this.settings.row),this.cols=new N(this.settings.col),this.shapes=new rt(this.settings.shape),console.log(this.rows),console.log(this.cols),console.log(this.shapes),this.validations=new nt,this.hyperlinks={},this.comments={},this.selector=new g,this.scroll=new b,this.history=new w,this.clipboard=new S,this.autoFilter=new A,this.change=function(){},this.exceptRowSet=new Set,this.sortedRowMap=new Map,this.unsortedRowMap=new Map,this.h_splitSheets=new Array,this.v_splitSheets=new Array}var e,n,i;return e=t,(n=[{key:"addValidation",value:function(t,e,n){var i=this;this.changeData((function(){i.validations.add(t,e,n)}))}},{key:"removeValidation",value:function(){var t=this,e=this.selector.range;this.changeData((function(){t.validations.remove(e)}))}},{key:"getSelectedValidator",value:function(){var t=this.selector,e=t.ri,n=t.ci,i=this.validations.get(e,n);return i?i.validator:null}},{key:"getSelectedValidation",value:function(){var t=this.selector,e=t.ri,n=t.ci,i=t.range,r=this.validations.get(e,n),o={ref:i.toString()};return null!==r&&(o.mode=r.mode,o.validator=r.validator),o}},{key:"canUndo",value:function(){return this.history.canUndo()}},{key:"canRedo",value:function(){return this.history.canRedo()}},{key:"undo",value:function(){var t=this;this.history.undo(this.getData(),(function(e){t.setData(e)}))}},{key:"redo",value:function(){var t=this;this.history.redo(this.getData(),(function(e){t.setData(e)}))}},{key:"copy",value:function(){this.clipboard.copy(this.selector.range)}},{key:"cut",value:function(){this.clipboard.cut(this.selector.range)}},{key:"paste",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=this.clipboard,r=this.selector;return!i.isClear()&&!!ct.call(this,i.range,r.range,n)&&(this.changeData((function(){i.isCopy()?ut.call(t,i.range,r.range,e):i.isCut()&&ht.call(t,i.range,r.range)})),!0)}},{key:"autofill",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.selector.range;return!!ct.call(this,r,t,i)&&(this.changeData((function(){ut.call(n,r,t,e,!0)})),!0)}},{key:"clearClipboard",value:function(){this.clipboard.clear()}},{key:"calSelectedRangeByEnd",value:function(t,e){var n=this.selector,i=this.rows,r=this.cols,o=this.merges,a=n.range,s=a.sri,l=a.sci,c=a.eri,u=a.eci,h=n.ri,p=n.ci,f=t,d=e;return t<0&&(f=i.len-1),e<0&&(d=r.len-1),f>h?(s=h,c=f):(s=f,c=h),d>p?(l=p,u=d):(l=d,u=p),n.range=o.union(new m(s,l,c,u)),n.range=o.union(n.range),n.range}},{key:"calSelectedRangeByStart",value:function(t,e){var n=this.selector,i=this.rows,r=this.cols,o=this.merges.getFirstIncludes(t,e);return null===o&&(o=new m(t,e,t,e),-1===t&&(o.sri=0,o.eri=i.len-1),-1===e&&(o.sci=0,o.eci=r.len-1)),n.range=o,o}},{key:"setSelectedCellAttr",value:function(t,e){var n=this;this.changeData((function(){var i=n.selector,r=n.styles,o=n.rows;"merge"===t?e?n.merge():n.unmerge():"border"===t?ft.call(n,e):"formula"===t?o.getCellOrNew(i.ri,i.ci).text="=".concat(e,"()"):i.range.each((function(i,a){var s=o.getCellOrNew(i,a),l={};if(void 0!==s.style&&(l=R.cloneDeep(r[s.style])),"format"===t)l.format=e,s.style=n.addStyle(l);else if("font-bold"===t||"font-italic"===t||"font-name"===t||"font-size"===t){var c={};c[t.split("-")[1]]=e,l.font=Object.assign(l.font||{},c),s.style=n.addStyle(l)}else"strike"!==t&&"textwrap"!==t&&"underline"!==t&&"align"!==t&&"valign"!==t&&"color"!==t&&"bgcolor"!==t||(l[t]=e,s.style=n.addStyle(l))}))}))}},{key:"setSelectedCellText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input",n=this.selector,i=n.ri,r=n.ci,o=i;this.unsortedRowMap.has(i)&&(o=this.unsortedRowMap.get(i)),this.setCellText(o,r,t,e),this.resetAutoFilter()}},{key:"getSelectedCell",value:function(){var t=this.selector,e=t.ri,n=t.ci,i=e;return this.unsortedRowMap.has(e)&&(i=this.unsortedRowMap.get(e)),this.rows.getCell(i,n)}},{key:"xyInSelectedRect",value:function(t,e){var n=this.getSelectedRect(),i=n.left,r=n.top,o=n.width,a=n.height,s=t-this.cols.indexWidth,l=e-this.rows.height;return s>i&&s<i+o&&l>r&&l<r+a}},{key:"getSelectedRect",value:function(){return this.getRect(this.selector.range)}},{key:"getClipboardRect",value:function(){var t=this.clipboard;return t.isClear()?{left:-100,top:-100}:this.getRect(t.range)}},{key:"getRect",value:function(t){var e=this.scroll,n=this.rows,i=this.cols,r=this.exceptRowSet,o=t.sri,a=t.sci,s=t.eri,l=t.eci;if(o<0&&a<0)return{left:0,l:0,top:0,t:0,scroll:e};var c=i.sumWidth(0,a),u=n.sumHeight(0,o,r),h=n.sumHeight(o,s+1,r),p=i.sumWidth(a,l+1),f=c-e.x,d=u-e.y,y=this.freezeTotalHeight(),m=this.freezeTotalWidth();return m>0&&m>c&&(f=c),y>0&&y>u&&(d=u),{l:c,t:u,left:f,top:d,height:h,width:p,scroll:e}}},{key:"getCellRectByXY",value:function(t,e){var n=this.scroll,i=this.merges,r=this.rows,o=this.cols,a=dt.call(this,e,n.y),s=a.ri,l=a.top,c=a.height,u=yt.call(this,t,n.x),h=u.ci,p=u.left,f=u.width;if(-1===h&&(f=o.totalWidth()),-1===s&&(c=r.totalHeight()),s>=0||h>=0){var d=i.getFirstIncludes(s,h);if(d){s=d.sri,h=d.sci;var y=this.cellRect(s,h);p=y.left,l=y.top,f=y.width,c=y.height}}return{ri:s,ci:h,left:p,top:l,width:f,height:c}}},{key:"isSignleSelected",value:function(){var t=this.selector.range,e=t.sri,n=t.sci,i=t.eri,r=t.eci,o=this.getCell(e,n);if(o&&o.merge){var a=st(o.merge,2),s=a[0],l=a[1];if(e+s===i&&n+l===r)return!0}return!this.selector.multiple()}},{key:"canUnmerge",value:function(){var t=this.selector.range,e=t.sri,n=t.sci,i=t.eri,r=t.eci,o=this.getCell(e,n);if(o&&o.merge){var a=st(o.merge,2),s=a[0],l=a[1];if(e+s===i&&n+l===r)return!0}return!1}},{key:"merge",value:function(){var t=this,e=this.selector,n=this.rows;if(!this.isSignleSelected()){var i=st(e.size(),2),r=i[0],o=i[1];if(r>1||o>1){var a=e.range,s=a.sri,l=a.sci;this.changeData((function(){var i=n.getCellOrNew(s,l);i.merge=[r-1,o-1],t.merges.add(e.range),t.rows.deleteCells(e.range),t.rows.setCell(s,l,i)}))}}}},{key:"unmerge",value:function(){var t=this,e=this.selector;if(this.isSignleSelected()){var n=e.range,i=n.sri,r=n.sci;this.changeData((function(){t.rows.deleteCell(i,r,"merge"),t.merges.deleteWithin(e.range)}))}}},{key:"canAutofilter",value:function(){return!this.autoFilter.active()}},{key:"autofilter",value:function(){var t=this,e=this.autoFilter,n=this.selector;this.changeData((function(){e.active()?(e.clear(),t.exceptRowSet=new Set,t.sortedRowMap=new Map,t.unsortedRowMap=new Map):e.ref=n.range.toString()}))}},{key:"setAutoFilter",value:function(t,e,n,i){var r=this.autoFilter;r.addFilter(t,n,i),r.setSort(t,e),this.resetAutoFilter()}},{key:"resetAutoFilter",value:function(){var t=this,e=this.autoFilter,n=this.rows;if(e.active()){var i=e.sort,r=e.filteredRows((function(t,e){return n.getCell(t,e)})),o=r.rset,a=r.fset,s=Array.from(a),l=Array.from(a);i&&s.sort((function(t,e){return"asc"===i.order?t-e:"desc"===i.order?e-t:0})),this.exceptRowSet=o,this.sortedRowMap=new Map,this.unsortedRowMap=new Map,s.forEach((function(e,n){t.sortedRowMap.set(l[n],e),t.unsortedRowMap.set(e,l[n])}))}}},{key:"deleteCell",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n=this.selector;this.changeData((function(){t.rows.deleteCells(n.range,e),"all"!==e&&"format"!==e||t.merges.deleteWithin(n.range)}))}},{key:"insert",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.changeData((function(){var i=e.selector.range,r=i.sri,o=i.sci,a=e.rows,s=e.merges,l=e.cols,c=r;"row"===t?a.insert(r,n):"column"===t&&(a.insertColumn(o,n),c=o,l.len+=1),s.shift(t,c,n,(function(t,e,n,i){var r=a.getCell(t,e);r.merge[0]+=n,r.merge[1]+=i}))}))}},{key:"delete",value:function(t){var e=this;this.changeData((function(){var n=e.rows,i=e.merges,r=e.selector,o=e.cols,a=r.range,s=r.range,l=s.sri,c=s.sci,u=s.eri,h=s.eci,p=st(r.range.size(),2),f=p[0],d=p[1],y=l,m=f;"row"===t?n.delete(l,u):"column"===t&&(n.deleteColumn(c,h),y=a.sci,m=d,o.len-=1),i.shift(t,y,-m,(function(t,e,i,r){var o=n.getCell(t,e);o.merge[0]+=i,o.merge[1]+=r,0===o.merge[0]&&0===o.merge[1]&&delete o.merge}))}))}},{key:"scrollx",value:function(t,e){console.log("scrollx: ");var n=this.scroll,i=this.freeze,r=this.cols,o=st(i,2)[1],a=st(R.rangeReduceIf(o,r.len,0,0,t,(function(t){return r.getWidth(t)})),3),s=a[0],l=a[1],c=a[2],u=l;t>0&&(u+=c),n.x!==u&&(n.ci=t>0?s:0,n.x=u,e()),this.v_splitSheets.forEach((function(e){console.log("movex: ",t),e.sync_movex(t)}))}},{key:"sync_scrollx",value:function(t,e){var n=this.scroll,i=this.freeze,r=this.cols,o=st(i,2)[1],a=st(R.rangeReduceIf(o,r.len,0,0,t,(function(t){return r.getWidth(t)})),3),s=a[0],l=a[1],c=a[2],u=l;t>0&&(u+=c),n.x!==u&&(n.ci=t>0?s:0,n.x=u,e())}},{key:"scrolly",value:function(t,e){console.log("scrolly: ");var n=this.scroll,i=this.freeze,r=this.rows,o=st(i,1)[0],a=st(R.rangeReduceIf(o,r.len,0,0,t,(function(t){return r.getHeight(t)})),3),s=a[0],l=a[1],c=a[2],u=l;t>0&&(u+=c),n.y!==u&&(n.ri=t>0?s:0,n.y=u,e()),this.h_splitSheets.forEach((function(e){console.log("movey: ",t),e.sync_movey(t)}))}},{key:"sync_scrolly",value:function(t,e){var n=this.scroll,i=this.freeze,r=this.rows,o=st(i,1)[0],a=st(R.rangeReduceIf(o,r.len,0,0,t,(function(t){return r.getHeight(t)})),3),s=a[0],l=a[1],c=a[2],u=l;t>0&&(u+=c),n.y!==u&&(n.ri=t>0?s:0,n.y=u,e())}},{key:"cellRect",value:function(t,e){var n=this.rows,i=this.cols,r=i.sumWidth(0,e),o=n.sumHeight(0,t),a=n.getCell(t,e),s=i.getWidth(e),l=n.getHeight(t);if(null!==a&&a.merge){var c=st(a.merge,2),u=c[0],h=c[1];if(u>0)for(var p=1;p<=u;p+=1)l+=n.getHeight(t+p);if(h>0)for(var f=1;f<=h;f+=1)s+=i.getWidth(e+f)}return{left:r,top:o,width:s,height:l,cell:a}}},{key:"getCell",value:function(t,e){return this.rows.getCell(t,e)}},{key:"getCellTextOrDefault",value:function(t,e){var n=this.getCell(t,e);return n&&n.text?n.text:""}},{key:"getCellStyle",value:function(t,e){var n=this.getCell(t,e);return n&&void 0!==n.style?this.styles[n.style]:null}},{key:"getCellStyleOrDefault",value:function(t,e){var n=this.styles,i=this.rows.getCell(t,e),r=i&&void 0!==i.style?n[i.style]:{};return R.merge(this.defaultStyle(),r)}},{key:"getSelectedCellStyle",value:function(){var t=this.selector,e=t.ri,n=t.ci;return this.getCellStyleOrDefault(e,n)}},{key:"setCellText",value:function(t,e,n,i){var r=this,o=this.rows,a=this.history,s=this.validations;"finished"===i?(o.setCellText(t,e,""),a.add(this.getData()),this.changeData((function(){r.rows.setCellText(t,e,n)}))):(o.setCellText(t,e,n),this.change(this.getData())),s.validate(t,e,n)}},{key:"freezeIsActive",value:function(){var t=st(this.freeze,2),e=t[0],n=t[1];return e>0||n>0}},{key:"setFreeze",value:function(t,e){var n=this;this.changeData((function(){n.freeze=[t,e]}))}},{key:"freezeTotalWidth",value:function(){return this.cols.sumWidth(0,this.freeze[1])}},{key:"freezeTotalHeight",value:function(){return this.rows.sumHeight(0,this.freeze[0])}},{key:"setRowHeight",value:function(t,e){var n=this;this.changeData((function(){n.rows.setHeight(t,e)}))}},{key:"setColWidth",value:function(t,e){var n=this;this.changeData((function(){n.cols.setWidth(t,e)}))}},{key:"viewHeight",value:function(){var t=this.settings,e=t.view,n=t.showToolbar,i=e.height();return n&&(i-=41),i}},{key:"viewWidth",value:function(){return this.settings.view.width()}},{key:"freezeViewRange",value:function(){var t=st(this.freeze,2),e=t[0],n=t[1];return new m(0,0,e-1,n-1,this.freezeTotalWidth(),this.freezeTotalHeight())}},{key:"viewRange",value:function(){var t=this.scroll,e=this.rows,n=this.cols,i=this.freeze,r=t.ri,o=t.ci;r<=0&&(r=st(i,1)[0]),o<=0&&(o=st(i,2)[1]);for(var a=0,s=0,l=[e.len,n.len],c=l[0],u=l[1],h=r;h<e.len&&(c=h,!((s+=e.getHeight(h))>this.viewHeight()));h+=1);for(var p=o;p<n.len&&(u=p,!((a+=n.getWidth(p))>this.viewWidth()));p+=1);return new m(r,o,c,u,a,s)}},{key:"eachMergesInView",value:function(t,e){this.merges.filterIntersects(t).forEach((function(t){return e(t)}))}},{key:"rowEach",value:function(t,e,n){for(var i=0,r=this.rows,o=this.exceptRowSet,a=ot(o),s=0,l=0;l<a.length;l+=1)a[l]<t&&(s+=1);for(var c=t+s;c<=e+s;c+=1)if(o.has(c))s+=1;else{var u=r.getHeight(c);if(n(c,i,u),(i+=u)>this.viewHeight())break}}},{key:"colEach",value:function(t,e,n){for(var i=0,r=this.cols,o=t;o<=e;o+=1){var a=r.getWidth(o);if(n(o,i,a),(i+=a)>this.viewWidth())break}}},{key:"defaultStyle",value:function(){return this.settings.style}},{key:"addStyle",value:function(t){for(var e=this.styles,n=0;n<e.length;n+=1){var i=e[n];if(R.equals(i,t))return n}return e.push(t),e.length-1}},{key:"changeData",value:function(t){this.history.add(this.getData()),t(),this.change(this.getData()),this.v_splitSheets.forEach((function(t){t.sync()})),this.h_splitSheets.forEach((function(t){t.sync()}))}},{key:"setData",value:function(t){var e=this;return Object.keys(t).forEach((function(n){if("merges"===n||"rows"===n||"cols"===n||"validations"===n||"shapes"===n)e[n].setData(t[n]);else if("freeze"===n){var i=st(h(t[n]),2),r=i[0],o=i[1];e.freeze=[o,r]}else void 0!==t[n]&&(e[n]=t[n])})),this}},{key:"getData",value:function(){var t=this.name,e=this.freeze,n=this.styles,i=this.merges,r=this.rows,o=this.cols,a=this.validations,s=this.autoFilter;return{name:t,freeze:f(e[1],e[0]),styles:n,merges:i.getData(),rows:r.getData(),cols:o.getData(),validations:a.getData(),autofilter:s.getData()}}},{key:"horizontalAddSplitSheet",value:function(t){this.h_splitSheets.push(t)}},{key:"verticalAddSplitSheet",value:function(t){this.v_splitSheets.push(t)}}])&&at(e.prototype,n),i&&at(e,i),t}();function vt(t,e,n){t.addEventListener(e,n)}function gt(t,e,n){t.removeEventListener(e,n)}function bt(t){t.xclickoutside&&(gt(window.document.body,"click",t.xclickoutside),delete t.xclickoutside)}function _t(t,e){t.xclickoutside=function(n){2===n.detail||t.contains(n.target)||(e?e(t):(t.hide(),bt(t)))},vt(window.document.body,"click",t.xclickoutside)}function wt(t,e,n){vt(t,"mousemove",e),t.xEvtUp=function(i){gt(t,"mousemove",e),gt(t,"mouseup",t.xEvtUp),n(i)},vt(t,"mouseup",t.xEvtUp)}function xt(t,e,n,i){Math.abs(t)>Math.abs(e)?i(t>0?"right":"left",t,n):i(e>0?"down":"up",e,n)}var St="x-spreadsheet";window.devicePixelRatio;function kt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ct=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.moving=!1,this.vertical=n,this.el=a("div","".concat(St,"-resizer ").concat(n?"vertical":"horizontal")).children(this.hoverEl=a("div","".concat(St,"-resizer-hover")).on("mousedown.stop",(function(t){return e.mousedownHandler(t)})),this.lineEl=a("div","".concat(St,"-resizer-line")).hide()).hide(),this.cRect=null,this.finishedFn=null,this.minDistance=i}var e,n,i;return e=t,(n=[{key:"show",value:function(t,e){var n=this.moving,i=this.vertical,r=this.hoverEl,o=this.lineEl,a=this.el;if(!n){this.cRect=t;var s=t.left,l=t.top,c=t.width,u=t.height;a.offset({left:i?s+c-5:s,top:i?l:l+u-5}).show(),r.offset({width:i?5:c,height:i?u:5}),o.offset({width:i?0:e.width,height:i?e.height:0})}}},{key:"hide",value:function(){this.el.offset({left:0,top:0}).hide()}},{key:"mousedownHandler",value:function(t){var e=this,n=t,i=this.el,r=this.lineEl,o=this.cRect,a=this.vertical,s=this.minDistance,l=a?o.width:o.height;r.show(),wt(window,(function(t){e.moving=!0,null!==n&&1===t.buttons&&(a?(l+=t.movementX)>s&&i.css("left","".concat(o.left+l,"px")):(l+=t.movementY)>s&&i.css("top","".concat(o.top+l,"px")),n=t)}),(function(){n=null,r.hide(),e.moving=!1,e.hide(),e.finishedFn&&(l<s&&(l=s),e.finishedFn(o,l))}))}}])&&kt(e.prototype,n),i&&kt(e,i),t}();function Et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ot=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertical=e,this.moveFn=null,this.el=a("div","".concat(St,"-scrollbar ").concat(e?"vertical":"horizontal")).child(this.contentEl=a("div","")).on("mousemove.stop",(function(){})).on("scroll.stop",(function(t){var e=t.target,i=e.scrollTop,r=e.scrollLeft;n.moveFn&&n.moveFn(n.vertical?i:r,t)}))}var e,n,i;return e=t,(n=[{key:"move",value:function(t){return this.el.scroll(t),this}},{key:"scroll",value:function(){return this.el.scroll()}},{key:"set",value:function(t,e){var n=t-1;if(e>n){var i=this.vertical?"height":"width";this.el.css(i,"".concat(n,"px")).show(),this.contentEl.css(this.vertical?"width":"height","1px").css(i,"".concat(e,"px"))}else this.el.hide();return this}}])&&Et(e.prototype,n),i&&Et(e,i),t}();function Pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tt(t,e,n){return e&&At(t.prototype,e),n&&At(t,n),t}var Mt=10,jt=function(){function t(){Pt(this,t),this.cornerEl=a("div","".concat(St,"-selector-corner")),this.areaEl=a("div","".concat(St,"-selector-area")).child(this.cornerEl).hide(),this.clipboardEl=a("div","".concat(St,"-selector-clipboard")).hide(),this.autofillEl=a("div","".concat(St,"-selector-autofill")).hide(),this.el=a("div","".concat(St,"-selector")).css("z-index","".concat(Mt)).children(this.areaEl,this.clipboardEl,this.autofillEl).hide(),Mt+=1}return Tt(t,[{key:"setOffset",value:function(t){return this.el.offset(t).show(),this}},{key:"hide",value:function(){return this.el.hide(),this}},{key:"setAreaOffset",value:function(t){var e=t.left,n=t.top,i=t.width,r=t.height;this.areaEl.offset({width:i-3+.8,height:r-3+.8,left:e-.8,top:n-.8}).show()}},{key:"setClipboardOffset",value:function(t){var e=t.left,n=t.top,i=t.width,r=t.height;this.clipboardEl.offset({left:e,top:n,width:i-5,height:r-5})}},{key:"showAutofill",value:function(t){var e=t.left,n=t.top,i=t.width,r=t.height;this.autofillEl.offset({width:i-3,height:r-3,left:e,top:n}).show()}},{key:"hideAutofill",value:function(){this.autofillEl.hide()}},{key:"showClipboard",value:function(){this.clipboardEl.show()}},{key:"hideClipboard",value:function(){this.clipboardEl.hide()}}]),t}();function Rt(t){var e=this.data,n=t.left,i=t.top,r=t.width,o=t.height,a=t.scroll,s=t.l,l=t.t,c=e.freezeTotalWidth(),u=e.freezeTotalHeight(),h=n-c;c>s&&(h-=a.x);var p=i-u;return u>l&&(p-=a.y),{left:h,top:p,width:r,height:o}}function Dt(t){var e=this.data,n=t.left,i=t.width,r=t.height,o=t.l,a=t.t,s=t.scroll,l=e.freezeTotalWidth(),c=n-l;return l>o&&(c-=s.x),{left:c,top:a,width:i,height:r}}function Ft(t){var e=this.data,n=t.top,i=t.width,r=t.height,o=t.l,a=t.t,s=t.scroll,l=e.freezeTotalHeight(),c=n-l;return l>a&&(c-=s.y),{left:o,top:c,width:i,height:r}}function It(t){this.br.setAreaOffset(Rt.call(this,t))}function Lt(t){this.tl.setAreaOffset(t)}function Nt(t){this.t.setAreaOffset(Dt.call(this,t))}function Bt(t){this.l.setAreaOffset(Ft.call(this,t))}function Vt(t){this.l.setClipboardOffset(Ft.call(this,t))}function Gt(t){this.br.setClipboardOffset(Rt.call(this,t))}function zt(t){this.tl.setClipboardOffset(t)}function Ut(t){this.t.setClipboardOffset(Dt.call(this,t))}function Wt(t){It.call(this,t),Lt.call(this,t),Nt.call(this,t),Bt.call(this,t)}function Ht(t){Gt.call(this,t),zt.call(this,t),Ut.call(this,t),Vt.call(this,t)}var Kt=function(){function t(e){Pt(this,t),this.data=e,this.br=new jt,this.t=new jt,this.l=new jt,this.tl=new jt,this.br.el.show(),this.offset=null,this.areaOffset=null,this.indexes=null,this.range=null,this.arange=null,this.el=a("div","".concat(St,"-selectors")).children(this.tl.el,this.t.el,this.l.el,this.br.el).hide(),this.lastri=-1,this.lastci=-1,Mt+=1}return Tt(t,[{key:"hide",value:function(){this.el.hide()}},{key:"resetOffset",value:function(){var t=this.data,e=this.tl,n=this.t,i=this.l,r=this.br,o=t.freezeTotalHeight(),a=t.freezeTotalWidth();o>0||a>0?(e.setOffset({width:a,height:o}),n.setOffset({left:a,height:o}),i.setOffset({top:o,width:a}),r.setOffset({left:a,top:o})):(e.hide(),n.hide(),i.hide(),r.setOffset({left:0,top:0}))}},{key:"resetAreaOffset",value:function(){var t=this.data.getSelectedRect(),e=this.data.getClipboardRect();Wt.call(this,t),Ht.call(this,e),this.resetOffset()}},{key:"resetBRTAreaOffset",value:function(){var t=this.data.getSelectedRect(),e=this.data.getClipboardRect();It.call(this,t),Nt.call(this,t),Gt.call(this,e),Ut.call(this,e),this.resetOffset()}},{key:"resetBRLAreaOffset",value:function(){var t=this.data.getSelectedRect(),e=this.data.getClipboardRect();It.call(this,t),Bt.call(this,t),Gt.call(this,e),Vt.call(this,e),this.resetOffset()}},{key:"set",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.data,r=i.calSelectedRangeByStart(t,e),o=r.sri,a=r.sci;if(n){var s=t,l=e;t<0&&(s=0),e<0&&(l=0),i.selector.setIndexes(s,l),this.indexes=[s,l]}this.moveIndexes=[o,a],this.range=r,this.resetAreaOffset(),this.el.show()}},{key:"setEnd",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.data,r=this.lastri,o=this.lastci;if(n){if(t===r&&e===o)return;this.lastri=t,this.lastci=e}this.range=i.calSelectedRangeByEnd(t,e),Wt.call(this,this.data.getSelectedRect())}},{key:"reset",value:function(){var t=this.data.selector.range,e=t.eri,n=t.eci;this.setEnd(e,n)}},{key:"showAutofill",value:function(t,e){if(-1!==t||-1!==e){var n=this.range,i=n.sri,r=n.sci,o=n.eri,a=n.eci,s=t,l=e,c=i-t,u=o-t,h=a-e;if(r-e>0)this.arange=new m(i,l,o,r-1);else if(c>0)this.arange=new m(s,r,i-1,a);else if(h<0)this.arange=new m(i,a+1,o,l);else{if(!(u<0))return void(this.arange=null);this.arange=new m(o+1,r,s,a)}if(null!==this.arange){var p=this.data.getRect(this.arange);p.width+=2,p.height+=2;var f=this.br,d=this.l,y=this.t,v=this.tl;f.showAutofill(Rt.call(this,p)),d.showAutofill(Ft.call(this,p)),y.showAutofill(Dt.call(this,p)),v.showAutofill(p)}}}},{key:"hideAutofill",value:function(){var t=this;["br","l","t","tl"].forEach((function(e){t[e].hideAutofill()}))}},{key:"showClipboard",value:function(){var t=this,e=this.data.getClipboardRect();Ht.call(this,e),["br","l","t","tl"].forEach((function(e){t[e].showClipboard()}))}},{key:"hideClipboard",value:function(){var t=this;["br","l","t","tl"].forEach((function(e){t[e].hideClipboard()}))}}]),t}();function qt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xt(t){t.preventDefault(),t.stopPropagation();var e=this.filterItems;e.length<=0||(this.itemIndex>=0&&e[this.itemIndex].toggle(),this.itemIndex-=1,this.itemIndex<0&&(this.itemIndex=e.length-1),e[this.itemIndex].toggle())}function $t(t){t.stopPropagation();var e=this.filterItems;e.length<=0||(this.itemIndex>=0&&e[this.itemIndex].toggle(),this.itemIndex+=1,this.itemIndex>e.length-1&&(this.itemIndex=0),e[this.itemIndex].toggle())}function Jt(t){t.preventDefault();var e=this.filterItems;e.length<=0||(t.stopPropagation(),this.itemIndex<0&&(this.itemIndex=0),e[this.itemIndex].el.click(),this.hide())}function Zt(t){var e=t.keyCode;switch(t.ctrlKey&&t.stopPropagation(),e){case 37:t.stopPropagation();break;case 38:Xt.call(this,t);break;case 39:t.stopPropagation();break;case 40:$t.call(this,t);break;case 13:case 9:Jt.call(this,t);break;default:t.stopPropagation()}}var Qt=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"200px";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.filterItems=[],this.items=e,this.el=a("div","".concat(St,"-suggest")).css("width",i).hide(),this.itemClick=n,this.itemIndex=-1}var e,n,i;return e=t,(n=[{key:"setOffset",value:function(t){this.el.cssRemoveKeys("top","bottom").offset(t)}},{key:"hide",value:function(){var t=this.el;this.filterItems=[],this.itemIndex=-1,t.hide(),bt(this.el.parent())}},{key:"setItems",value:function(t){this.items=t}},{key:"search",value:function(t){var e,n=this,i=this.items;if(/^\s*$/.test(t)||(i=i.filter((function(e){return(e.key||e).startsWith(t.toUpperCase())}))),i=i.map((function(t){var e=t.title;e?"function"==typeof e&&(e=e()):e=t;var i=a("div","".concat(St,"-item")).child(e).on("click.stop",(function(){n.itemClick(t),n.hide()}));return t.label&&i.child(a("div","label").html(t.label)),i})),this.filterItems=i,!(i.length<=0)){var r=this.el;(e=r.html("")).children.apply(e,qt(i)).show(),_t(r.parent(),(function(){n.hide()}))}}},{key:"bindInputEvents",value:function(t){var e=this;t.on("keydown",(function(t){return Zt.call(e,t)}))}}])&&Yt(e.prototype,n),i&&Yt(e,i),t}();function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ne(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ne(this,ie(e).call(this,"div","".concat(St,"-icon")))).iconNameEl=a("div","".concat(St,"-icon-img ").concat(t)),n.child(n.iconNameEl),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,t),n=e,(i=[{key:"setName",value:function(t){this.iconNameEl.className("".concat(St,"-icon-img ").concat(t))}}])&&ee(n.prototype,i),r&&ee(n,r),e}(o);function ae(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function le(t,e){t.setMonth(t.getMonth()+e)}function ce(t,e){var n=new Date(t);return n.setDate(e-t.getDay()+1),n}var ue=function(){function t(e){var n,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e,this.cvalue=new Date(e),this.headerLeftEl=a("div","calendar-header-left"),this.bodyEl=a("tbody",""),this.buildAll(),this.el=a("div","x-spreadsheet-calendar").children(a("div","calendar-header").children(this.headerLeftEl,a("div","calendar-header-right").children(a("a","calendar-prev").on("click.stop",(function(){return i.prev()})).child(new oe("chevron-left")),a("a","calendar-next").on("click.stop",(function(){return i.next()})).child(new oe("chevron-right")))),a("table","calendar-body").children(a("thead","").child((n=a("tr","")).children.apply(n,ae(z("calendar.weeks").map((function(t){return a("th","cell").child(t)}))))),this.bodyEl)),this.selectChange=function(){}}var e,n,i;return e=t,(n=[{key:"setValue",value:function(t){this.value=t,this.cvalue=new Date(t),this.buildAll()}},{key:"prev",value:function(){le(this.value,-1),this.buildAll()}},{key:"next",value:function(){le(this.value,1),this.buildAll()}},{key:"buildAll",value:function(){this.buildHeaderLeft(),this.buildBody()}},{key:"buildHeaderLeft",value:function(){var t=this.value;this.headerLeftEl.html("".concat(z("calendar.months")[t.getMonth()]," ").concat(t.getFullYear()))}},{key:"buildBody",value:function(){var t,e=this,n=this.value,i=this.cvalue,r=this.bodyEl,o=function(t,e,n){for(var i=new Date(t,e,1,23,59,59),r=[[],[],[],[],[],[]],o=0;o<6;o+=1)for(var a=0;a<7;a+=1){var s=ce(i,7*o+a),l=s.getMonth()!==e,c=s.getMonth()===n.getMonth()&&s.getDate()===n.getDate();r[o][a]={d:s,disabled:l,active:c}}return r}(n.getFullYear(),n.getMonth(),i).map((function(t){var n,i=t.map((function(t){var n="cell";return t.disabled&&(n+=" disabled"),t.active&&(n+=" active"),a("td","").child(a("div",n).on("click.stop",(function(){e.selectChange(t.d)})).child(t.d.getDate().toString()))}));return(n=a("tr","")).children.apply(n,ae(i))}));(t=r.html("")).children.apply(t,ae(o))}}])&&se(e.prototype,n),i&&se(e,i),t}();function he(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var pe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.calendar=new ue(new Date),this.el=a("div","".concat(St,"-datepicker")).child(this.calendar.el).hide()}var e,n,i;return e=t,(n=[{key:"setValue",value:function(t){var e=this.calendar;return"string"==typeof t?/^\d{4}-\d{1,2}-\d{1,2}$/.test(t)&&e.setValue(new Date(t.replace(new RegExp("-","g"),"/"))):t instanceof Date&&e.setValue(t),this}},{key:"change",value:function(t){var e=this;this.calendar.selectChange=function(n){t(n),e.hide()}}},{key:"show",value:function(){this.el.show()}},{key:"hide",value:function(){this.el.hide()}}])&&he(e.prototype,n),i&&he(e,i),t}();function fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function de(){var t=this.textlineEl,e=this.textEl,n=this.areaOffset,i=t.offset().width+9,r=this.viewFn().width-n.left-9;if(i>n.width){var o=i;if(i>r){o=r;var a=parseInt(i/r,10);a+=i%r>0?1:0,(a*=this.rowHeight)>n.height&&e.css("height","".concat(a,"px"))}e.css("width","".concat(o,"px"))}}function ye(t){var e=t.keyCode||t.which,n=(t.key,t.ctrlKey,t.shiftKey,t.altKey),i=(t.metaKey,t.target.value),r=t.target;if(n)switch(e){case 13:var o=String.fromCharCode(13,10);r.value=r.value+o}var a=this.suggest,s=this.textlineEl,l=this.validator;if(this.inputText=i,l)"list"===l.type?a.search(i):a.hide();else if("string"==typeof i||i instanceof String){var c=i.lastIndexOf("=");-1!==c?a.search(i.substring(c+1)):a.hide()}s.html(i),de.call(this),this.change("textarea",i);var u=t.target;u.style.height="",u.style.height=u.scrollHeight+"px"}function me(t){var e=this.textEl.el;setTimeout((function(){e.focus(),e.setSelectionRange(t,t)}),0)}function ve(t,e){var n=this.textEl,i=this.textlineEl;n.el.blur(),n.val(t),i.html(t),me.call(this,e)}function ge(t){var e=this.inputText,n=this.validator,i=0;if(n&&"list"===n.type)this.inputText=t,i=this.inputText.length;else{var r=e.lastIndexOf("="),o=e.substring(0,r+1),a=e.substring(r+1);a=-1!==a.indexOf(")")?a.substring(a.indexOf(")")):"",this.inputText="".concat(o+t.key,"("),i=this.inputText.length,this.inputText+=")".concat(a)}ve.call(this,this.inputText,i)}function be(){this.suggest.setItems(this.formulas)}var _e=function(){function t(e,n,i){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewFn=n,this.rowHeight=i,this.formulas=e,this.suggest=new Qt(e,(function(t){ge.call(r,t)})),this.datepicker=new pe,this.datepicker.change((function(t){r.setText(function(t){var e=t.getMonth()+1,n=t.getDate();return e<10&&(e="0".concat(e)),n<10&&(n="0".concat(n)),"".concat(t.getFullYear(),"-").concat(e,"-").concat(n)}(t)),r.clear()})),this.areaEl=a("div","".concat(St,"-editor-area")).children(this.textEl=a("textarea","").on("keydown",(function(t){return ye.call(r,t)})),this.textlineEl=a("div","textline"),this.suggest.el,this.datepicker.el).on("mousemove.stop",(function(){})).on("mousedown.stop",(function(){})),this.el=a("div","".concat(St,"-editor")).child(this.areaEl).hide(),this.suggest.bindInputEvents(this.textEl),this.areaOffset=null,this.freeze={w:0,h:0},this.cell=null,this.inputText="",this.change=function(){}}var e,n,i;return e=t,(n=[{key:"setFreezeLengths",value:function(t,e){this.freeze.w=t,this.freeze.h=e}},{key:"clear",value:function(){""!==this.inputText&&this.change("finished",this.inputText),this.cell=null,this.areaOffset=null,this.inputText="",this.el.hide(),this.textEl.val(""),this.textlineEl.html(""),be.call(this),this.datepicker.hide()}},{key:"setOffset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n=this.textEl,i=this.areaEl,r=this.suggest,o=this.freeze,a=this.el;if(t){this.areaOffset=t;var s=t.left,l=t.top,c=t.width,u=t.height,h=t.l,p=t.t,f={left:0,top:0};o.w>h&&o.h>p||(o.w<h&&o.h<p?(f.left=o.w,f.top=o.h):o.w>h?f.top=o.h:o.h>p&&(f.left=o.w)),a.offset(f),i.offset({left:s-f.left-.8,top:l-f.top-.8}),n.offset({width:c-9+.8,height:u-3+.8});var d={left:0};d[e]=u,r.setOffset(d),r.hide()}}},{key:"setCell",value:function(t,e){var n=this.el,i=this.datepicker,r=this.suggest;n.show(),this.cell=t;var o=t&&t.text||"";if(this.setText(o),this.validator=e,e){var a=e.type;"date"===a&&(i.show(),/^\s*$/.test(o)||i.setValue(o)),"list"===a&&(r.setItems(e.values()),r.search(""))}}},{key:"setText",value:function(t){this.inputText=t,ve.call(this,t,t.length),de.call(this)}}])&&fe(e.prototype,n),i&&fe(e,i),t}();function we(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Se=[{key:"copy",title:U("contextmenu.copy"),label:"Ctrl+C"},{key:"cut",title:U("contextmenu.cut"),label:"Ctrl+X"},{key:"paste",title:U("contextmenu.paste"),label:"Ctrl+V"},{key:"paste-value",title:U("contextmenu.pasteValue"),label:"Ctrl+Shift+V"},{key:"paste-format",title:U("contextmenu.pasteFormat"),label:"Ctrl+Alt+V"},{key:"divider"},{key:"insert-row",title:U("contextmenu.insertRow")},{key:"insert-column",title:U("contextmenu.insertColumn")},{key:"divider"},{key:"delete-row",title:U("contextmenu.deleteRow")},{key:"delete-column",title:U("contextmenu.deleteColumn")},{key:"delete-cell-text",title:U("contextmenu.deleteCellText")},{key:"divider"},{key:"validation",title:U("contextmenu.validation")}];function ke(t){var e=this;return"divider"===t.key?a("div","".concat(St,"-item divider")):a("div","".concat(St,"-item")).on("click",(function(){e.itemClick(t.key),e.hide()})).children(t.title(),a("div","label").child(t.label||""))}function Ce(){var t=this;return Se.map((function(e){return ke.call(t,e)}))}var Ee=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=(n=a("div","".concat(St,"-contextmenu"))).children.apply(n,we(Ce.call(this))).hide(),this.viewFn=e,this.itemClick=function(){},this.isHide=i}var e,n,i;return e=t,(n=[{key:"hide",value:function(){var t=this.el;t.hide(),bt(t)}},{key:"setPosition",value:function(t,e){if(!this.isHide){var n=this.el,i=n.show().offset(),r=i.height,o=i.width,a=this.viewFn(),s=e,l=t;a.height-e<=r&&(s-=r),a.width-t<=o&&(l-=o),n.offset({left:l,top:s}),_t(n)}}}])&&xe(e.prototype,n),i&&xe(e,i),t}(),Oe=[{key:"Arial",title:"Arial"},{key:"Helvetica",title:"Helvetica"},{key:"Source Sans Pro",title:"Source Sans Pro"},{key:"Comic Sans MS",title:"Comic Sans MS"},{key:"Courier New",title:"Courier New"},{key:"Verdana",title:"Verdana"},{key:"Lato",title:"Lato"}],Pe=[{pt:7.5,px:10},{pt:8,px:11},{pt:9,px:12},{pt:10,px:13},{pt:10.5,px:14},{pt:11,px:15},{pt:12,px:16},{pt:14,px:18.7},{pt:15,px:20},{pt:16,px:21.3},{pt:18,px:24},{pt:22,px:29.3},{pt:24,px:32},{pt:26,px:34.7},{pt:36,px:48},{pt:42,px:56}];function Ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Te=function(t){for(var e=[],n=[],i=[],r=0,o=1,a=0;a<t.length;a+=1){var s=t.charAt(a);if(" "!==s)if(s>="a"&&s<="z")i.push(s.toUpperCase());else if(s>="0"&&s<="9"||s>="A"&&s<="Z"||"."===s)i.push(s);else if('"'===s){for(a+=1;'"'!==t.charAt(a);)i.push(t.charAt(a)),a+=1;n.push('"'.concat(i.join(""))),i=[]}else{if("("!==s&&i.length>0&&n.push(i.join("")),")"===s){var l=e.pop();if(2===r)try{for(var c=Ae(h(n.pop()),2),u=c[0],p=c[1],d=Ae(h(n.pop()),2),y=d[0],m=d[1],v=0,g=y;g<=u;g+=1)for(var b=m;b<=p;b+=1)n.push(f(g,b)),v+=1;n.push([l,v])}catch(t){}else if(1===r)n.push([l,o]),o=1;else for(;"("!==l&&(n.push(l),!(e.length<=0));)l=e.pop();r=0}else if(":"===s)r=2;else if(","===s)r=1,o+=1;else if("("===s&&i.length>0)e.push(i.join(""));else{if(e.length>0&&("+"===s||"-"===s)){var _=e[e.length-1];if("("!==_&&n.push(e.pop()),"*"===_||"/"===_)for(;e.length>0&&"("!==(_=e[e.length-1]);)n.push(e.pop())}e.push(s)}i=[]}}for(i.length>0&&n.push(i.join(""));e.length>0;)n.push(e.pop());return n},Me=function(t,e){if(t[0]>="0"&&t[0]<="9")return Number(t);if('"'===t[0])return t.substring(1);var n=Ae(h(t),2);return e(n[0],n[1])},je=function(t,e,n,i){for(var r=[],o=0;o<t.length;o+=1)if("+"===t[o]){var a=r.pop();r.push(Number(r.pop())+Number(a))}else if("-"===t[o]){var s=r.pop();r.push(Number(r.pop())-Number(s))}else if("*"===t[o])r.push(Number(r.pop())*Number(r.pop()));else if("/"===t[o]){var l=r.pop();r.push(Number(r.pop())/Number(l))}else if(Array.isArray(t[o])){for(var c=Ae(t[o],2),u=c[0],h=c[1],p=[],f=0;f<h;f+=1)p.push(r.pop());r.push(e[u].render(p.reverse()))}else{if(i.includes(t[o]))return 0;i.push(t[o]),r.push(Me(t[o],n))}return r[0]},Re={render:function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("="===e[0]){var o=Te(e.substring(1));return o.length<=0?e:je(o,n,(function(e,o){return t(i(e,o),n,i,r)}),r)}return e}};function De(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Fe=[{key:"SUM",title:U("formula.sum"),render:function(t){return t.reduce((function(t,e){return Number(t)+Number(e)}),0)}},{key:"AVERAGE",title:U("formula.average"),render:function(t){return t.reduce((function(t,e){return Number(t)+Number(e)}),0)/t.length}},{key:"MAX",title:U("formula.max"),render:function(t){return Math.max.apply(Math,De(t.map((function(t){return Number(t)}))))}},{key:"MIN",title:U("formula.min"),render:function(t){return Math.min.apply(Math,De(t.map((function(t){return Number(t)}))))}},{key:"CONCAT",title:U("formula.concat"),render:function(t){return t.join("")}}],Ie=Fe,Le={};function Ne(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||Ve(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Be(t){return function(t){if(Array.isArray(t))return t}(t)||Ve(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ve(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}Fe.forEach((function(t){Le[t.key]=t}));var Ge=function(t){return t},ze=function(t){if(/^(-?\d*.?\d*)$/.test(t)){var e=Be(Number(t).toFixed(2).toString().split("\\.")),n=e[0],i=e.slice(1);return[n.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")].concat(Ne(i))}return t},Ue=[{key:"normal",title:U("format.normal"),type:"string",render:Ge},{key:"text",title:U("format.text"),type:"string",render:Ge},{key:"number",title:U("format.number"),type:"number",label:"1,000.12",render:ze},{key:"percent",title:U("format.percent"),type:"number",label:"10.12%",render:function(t){return"".concat(t,"%")}},{key:"rmb",title:U("format.rmb"),type:"number",label:"￥10.00",render:function(t){return"￥".concat(ze(t))}},{key:"usd",title:U("format.usd"),type:"number",label:"$10.00",render:function(t){return"$".concat(ze(t))}},{key:"date",title:U("format.date"),type:"date",label:"26/09/2008",render:Ge},{key:"time",title:U("format.time"),type:"date",label:"15:59:00",render:Ge},{key:"datetime",title:U("format.datetime"),type:"date",label:"26/09/2008 15:59:00",render:Ge},{key:"duration",title:U("format.duration"),type:"date",label:"24:01:00",render:Ge}],We={};Ue.forEach((function(t){We[t.key]=t}));var He=n(6),Ke=n.n(He);function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t,e,n){return($e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Je(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Je(t){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==qe(e)&&"function"!=typeof e?Xe(t):e}(this,Je(e).call(this,t))).clones=[],n.clones.push(Xe(n)),n.plain="",n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(e,t),n=e,(i=[{key:"clone",value:function(){var t=$e(Je(e.prototype),"clone",this).call(this);return t.clones=this.clones,this.clones.push(t),t}},{key:"func1",value:function(){console.log("call func1")}}])&&Ye(n.prototype,i),r&&Ye(n,r),e}(Ke.a.Group);function tn(t){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function en(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function nn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function rn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function on(t,e){return(on=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function an(t,e,n){return(an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sn(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function sn(t){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function un(t,e,n){return e&&cn(t.prototype,e),n&&cn(t,n),t}function hn(){return.5}function pn(t){return parseInt(1*t,10)}function fn(t){var e=pn(t);return e>0?e-.5:.5}var dn=function(){function t(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;ln(this,t),this.x=e,this.y=n,this.width=i,this.height=r,this.padding=o,this.bgcolor="#ffffff",this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null}return un(t,[{key:"setBorders",value:function(t){var e=t.top,n=t.bottom,i=t.left,r=t.right;e&&(this.borderTop=e),r&&(this.borderRight=r),n&&(this.borderBottom=n),i&&(this.borderLeft=i)}},{key:"innerWidth",value:function(){return this.width-2*this.padding}},{key:"innerHeight",value:function(){return this.height-2*this.padding}},{key:"textx",value:function(t){var e=this.width,n=this.padding,i=this.x;return"left"===t?i+=n:"center"===t?i+=e/2:"right"===t&&(i+=e-n),i}},{key:"texty",value:function(t,e,n){var i=this.height,r=this.padding,o=this.y;return"top"===t?o+=r:"middle"===t?o=o+i/2-n:"bottom"===t&&(o+=i-2*n-r),o}},{key:"topxys",value:function(){var t=this.x,e=this.y;return[[t,e],[t+this.width,e]]}},{key:"rightxys",value:function(){var t=this.x,e=this.y,n=this.width;return[[t+n,e],[t+n,e+this.height]]}},{key:"bottomxys",value:function(){var t=this.x,e=this.y,n=this.width,i=this.height;return[[t,e+i],[t+n,e+i]]}},{key:"leftxys",value:function(){var t=this.x,e=this.y;return[[t,e],[t,e+this.height]]}}]),t}();function yn(t,e,n,i,r,o,a){var s={x:0,y:0};"underline"===t?s.y="bottom"===r?0:"top"===r?-(o+2):-o/2:"strike"===t&&("bottom"===r?s.y=o/2:"top"===r&&(s.y=-(o/2+2))),"center"===i?s.x=a/2:"right"===i&&(s.x=a),this.line([e-s.x,n-s.y],[e-s.x+a,n-s.y])}var mn=function(t){function e(t,n,i){var r;return ln(this,e),(r=function(t,e){return!e||"object"!==tn(e)&&"function"!=typeof e?rn(t):e}(this,sn(e).call(this))).el=t,r.ctx=an(sn(e.prototype),"getContext",rn(r)).call(rn(r)),r.resize(n,i),r.scale(1,1),r.ctx.scale(1,1),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&on(t,e)}(e,t),un(e,[{key:"resize",value:function(t,n){an(sn(e.prototype),"size",this).call(this,{width:t,height:n}),this.el.style.width="".concat(t,"px"),this.el.style.height="".concat(n,"px"),this.el.width=pn(t),this.el.height=pn(n)}},{key:"clear",value:function(){var t=this.el,n=t.width,i=t.height;return this.ctx.clearRect(0,0,n,i),an(sn(e.prototype),"clear",this).call(this),this}},{key:"attr",value:function(t){return Object.assign(this.ctx,t),this}},{key:"save",value:function(){return this.ctx.save(),this.ctx.beginPath(),this}},{key:"restore",value:function(){return this.ctx.restore(),this}},{key:"beginPath",value:function(){return this.ctx.beginPath(),this}},{key:"translate",value:function(t,e){return this.ctx.translate(pn(t),pn(e)),this}},{key:"clearRect",value:function(t,e,n,i){return this.ctx.clearRect(t,e,n,i),this}},{key:"fillRect",value:function(t,e,n,i){return this.ctx.fillRect(pn(t)-.5,pn(e)-.5,pn(n),pn(i)),this}},{key:"fillText",value:function(t,e,n){return this.ctx.fillText(t,pn(e),pn(n)),this}},{key:"text",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=this.ctx,o=n.align,a=n.valign,s=n.font,l=n.color,c=n.strike,u=n.underline,h=e.textx(o);r.save(),r.beginPath(),this.attr({textAlign:o,textBaseline:a,font:"".concat(s.italic?"italic":""," ").concat(s.bold?"bold":""," ").concat(pn(s.size),"px ").concat(s.name),fillStyle:l,strokeStyle:l});var p=r.measureText(t).width,f=0;if(i){var d=Math.ceil(p/e.innerWidth());f=(d-1)*s.size/2}for(var y=e.texty(a,s.size,f),m={len:0,start:0},v=0;v<t.length;v+=1){var g=v-m.start;"\n"==t.substr(m.start+g,1)?(this.fillText(t.substring(m.start,v),h,y),c&&yn.call(this,"strike",h,y,o,a,s.size,m.len),u&&yn.call(this,"underline",h,y,o,a,s.size,m.len),y+=s.size+2,m.len=0,v++,m.start=v):m.len+=r.measureText(t[v]).width}return m.len>0&&(this.fillText(t.substring(m.start),h,y),c&&yn.call(this,"strike",h,y,o,a,s.size,m.len),u&&yn.call(this,"underline",h,y,o,a,s.size,m.len)),r.restore(),this}},{key:"border",value:function(t,e){var n=this.ctx;return n.lineWidth=hn,n.strokeStyle=e,"medium"===t?n.lineWidth=pn(2)-.5:"thick"===t?n.lineWidth=pn(3):"dashed"===t?n.setLineDash([pn(3),pn(2)]):"dotted"===t?n.setLineDash([pn(1),pn(1)]):"double"===t&&n.setLineDash([pn(2),0]),this}},{key:"line",value:function(){var t=this.ctx;if(arguments.length>1){var e=arguments.length<=0?void 0:arguments[0],n=nn(e,2),i=n[0],r=n[1];t.moveTo(fn(i),fn(r));for(var o=1;o<arguments.length;o+=1){var a=o<0||arguments.length<=o?void 0:arguments[o],s=nn(a,2),l=s[0],c=s[1];t.lineTo(fn(l),fn(c))}t.stroke()}return this}},{key:"strokeBorders",value:function(t){var e=this.ctx;e.save(),e.beginPath();var n=t.borderTop,i=t.borderRight,r=t.borderBottom,o=t.borderLeft;n&&(this.border.apply(this,en(n)),this.line.apply(this,en(t.topxys()))),i&&(this.border.apply(this,en(i)),this.line.apply(this,en(t.rightxys()))),r&&(this.border.apply(this,en(r)),this.line.apply(this,en(t.bottomxys()))),o&&(this.border.apply(this,en(o)),this.line.apply(this,en(t.leftxys()))),e.restore()}},{key:"dropdown",value:function(t){var e=this.ctx,n=t.x,i=t.y,r=n+t.width-15,o=i+t.height-15;e.save(),e.beginPath(),e.moveTo(pn(r),pn(o)),e.lineTo(pn(r+8),pn(o)),e.lineTo(pn(r+4),pn(o+6)),e.closePath(),e.fillStyle="rgba(0, 0, 0, .45)",e.fill(),e.restore()}},{key:"error",value:function(t){var e=this.ctx,n=t.x,i=t.y,r=n+t.width-1;e.save(),e.beginPath(),e.moveTo(pn(r-8),pn(i-1)),e.lineTo(pn(r),pn(i-1)),e.lineTo(pn(r),pn(i+8)),e.closePath(),e.fillStyle="rgba(255, 0, 0, .65)",e.fill(),e.restore()}},{key:"rect",value:function(t,e){var n=this.ctx,i=t.x,r=t.y,o=t.width,a=t.height,s=t.bgcolor;n.save(),n.beginPath(),n.fillStyle=s||"#fff",n.rect(fn(i+1),fn(r+1),pn(o-2),pn(a-2)),n.clip(),n.fill(),e(),n.restore()}}]),e}(Ke.a.Layer);function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xn(t,e,n){return(xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sn(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kn=5,Cn={fillStyle:"#f4f5f8"},En={fillStyle:"#fff",lineWidth:hn,strokeStyle:"#e6e6e6"};function On(t,e){var n=this.data.cellRect(t,e),i=n.left,r=n.top,o=n.width,a=n.height;return new dn(i,r,o,a,kn)}function Pn(t,e,n,i,r,o){e.func1(e),t.some((function(t){if(t.shape===e){t.shape.children[0].width(n),t.shape.children[0].height(i),t.data.rindex=r,t.data.cindex=o;var a=c(o)+String(r+1);return t.shape.children[1].text(t.data.name+" / "+a),!0}}))}function An(t,e,n,i){var r,o,a,s,l=this.data,c=(this.layer,this.layer_cell,this.layer_TOP_LEFT,this.layer_cell_TOP_LEFT),u=(this.layer_TOP_RIGHT,this.layer_cell_TOP_RIGHT),h=(this.layer_BOTTOM_LEFT,this.layer_cell_BOTTOM_LEFT),p=(this.layer_BOTTOM_RIGHT,this.layer_cell_BOTTOM_RIGHT),f=l.cellRect(n,i),d=(f.left,f.top,f.width),y=f.height;e.clones.forEach((function(t){"BOTTOM_LEFT"==t.plain&&(r=t),"BOTTOM_RIGHT"==t.plain&&(o=t),"TOP_LEFT"==t.plain&&(a=t),"TOP_RIGHT"==t.plain&&(s=t)})),Pn.call(this,p,o,d,y,n,i),Pn.call(this,h,r,d,y,n,i),Pn.call(this,u,s,d,y,n,i),Pn.call(this,c,a,d,y,n,i),this.render(),l.changeData((function(){}))}function Tn(t){var e=this.data,n=(this.layer,this.layer_cell,this.layer_TOP_LEFT),i=this.layer_line_TOP_LEFT,r=this.layer_TOP_RIGHT,o=this.layer_line_TOP_RIGHT,a=this.layer_BOTTOM_LEFT,s=this.layer_line_BOTTOM_LEFT,l=this.layer_BOTTOM_RIGHT,c=this.layer_line_BOTTOM_RIGHT,u=e.cellRect(t.srindex,t.scindex),h=u.left,p=u.top,f=u.width,d=u.height,y=e.cellRect(t.erindex,t.ecindex),m=y.left,v=y.top,g=(y.width,y.height),b=e.cols.indexWidth,_=e.rows.height,w=[b+h+f,_+p+d/2,b+m,_+v+g/2],x=new Ke.a.Line({points:w,stroke:"red",strokeWidth:1,lineCap:"round",lineJoin:"round"}),S=x.clone(),k=x.clone(),C=x.clone();n.add(x),r.add(S),a.add(k),l.add(C),x.plain="TOP_LEFT",S.plain="TOP_RIGHT",k.plain="BOTTOM_LEFT",C.plain="BOTTOM_RIGHT",i.push({data:t,line:x}),o.push({data:t,line:S}),s.push({data:t,line:k}),c.push({data:t,line:C})}function Mn(t){var e=this.data,n=(this.layer,this.layer_cell,this.layer_TOP_LEFT),i=this.layer_cell_TOP_LEFT,r=this.layer_TOP_RIGHT,o=this.layer_cell_TOP_RIGHT,a=this.layer_BOTTOM_LEFT,s=this.layer_cell_BOTTOM_LEFT,l=this.layer_BOTTOM_RIGHT,u=this.layer_cell_BOTTOM_RIGHT,h=e.cellRect(t.rindex,t.cindex),p=function(t,e,n,i){var r=t.left,o=t.top,a=t.width,s=t.height,l=t.left_pad,c=t.cell_address,u=new Qe({x:r+l,y:o,draggable:!0,name:e.name}),h=new Ke.a.Text({x:10,y:3,text:e.name+" / "+c,fontSize:14,fontFamily:"Calibri",fill:"red"}),p=new Ke.a.Rect({x:0,y:0,width:a,height:s,fill:"green",stroke:"black",strokeWidth:0,cornerRadius:10,opacity:.5,shadowEnabled:!0});return u.on("mouseover",(function(){document.body.style.cursor="pointer"})),u.on("mouseout",(function(){document.body.style.cursor="default"})),u.on("dragstart",(function(){})),u.on("dragend",(function(t){var e=t.target.attrs.x+t.target.children[0].attrs.width/2,r=t.target.attrs.y+t.target.children[0].attrs.height/2,o=n.getCellRectByXY(e,r),a=t.target.parent.parent,s=t.target.attrs.name,l=t.target,c=o.ri,u=o.ci;i.call(a,s,l,c,u)})),u.add(p),u.add(h),u}({left:h.left,top:h.top,width:h.width,height:h.height,left_pad:e.cols.indexWidth,cell_address:c(t.cindex)+String(t.rindex+1)},t,e,An),f=p.clone(),d=p.clone(),y=p.clone();n.add(p),r.add(f),a.add(d),l.add(y),p.plain="TOP_LEFT",f.plain="TOP_RIGHT",d.plain="BOTTOM_LEFT",y.plain="BOTTOM_RIGHT",i.push({data:t,shape:p}),o.push({data:t,shape:f}),s.push({data:t,shape:d}),u.push({data:t,shape:y})}function jn(t,e,n,i,r,o,a){var s=this.data;this.data.cols.indexWidth;e.forEach((function(t){if(t.data.rindex>=n.sri&&t.data.rindex<=n.eri&&t.data.cindex>=n.sci&&t.data.cindex<=n.eci){var e=s.cellRect(t.data.rindex,t.data.cindex),l=e.left,u=e.top,h=e.width,p=e.height;t.shape.absolutePosition({x:l+i+o,y:u+r+a}),t.shape.children[0].width(h),t.shape.children[0].height(p);var f=c(t.data.cindex)+String(t.data.rindex+1);t.shape.children[1].text(t.data.name+" / "+f),t.shape.show()}else t.shape.hide()}))}function Rn(t,e){var n=this.draw,i=this.data,r=i.sortedRowMap,o=t;r.has(t)&&(o=r.get(t));var a=i.getCell(o,e);if(null!==a){var s=i.getCellStyleOrDefault(o,e),l=On.call(this,t,e);l.bgcolor=s.bgcolor,void 0!==s.border&&(l.setBorders(s.border),n.strokeBorders(l)),n.rect(l,(function(){var r=Re.render(a.text||"",Le,(function(t,e){return i.getCellTextOrDefault(e,t)}));s.format&&(r=We[s.format].render(r));var o=Object.assign({},s.font);o.size=function(t){for(var e=0;e<Pe.length;e+=1){var n=Pe[e];if(n.pt===t)return n.px}return t}(o.size),n.text(r,l,{align:s.align,valign:s.valign,font:o,color:s.color,strike:s.strike,underline:s.underline},s.textwrap),i.validations.getError(t,e)&&n.error(l)}))}}function Dn(t){var e=this,n=this.data,i=this.draw;if(t){var r=n.autoFilter;if(!r.active())return;var o=r.hrange();t.intersects(o)&&o.each((function(t,n){var r=On.call(e,t,n);i.dropdown(r)}))}}function Fn(t,e,n,i,r){var o=this,a=this.draw,s=this.data;this.layer;a.save(),a.translate(e,n).translate(i,r);var l=s.exceptRowSet;a.save(),t.each((function(t,e){Rn.call(o,t,e)}),(function(t){return function(t){var e=l.has(t);if(e){var n=s.rows.getHeight(t);a.translate(0,-n)}return!e}(t)})),a.restore();var c=new Set;a.save(),s.eachMergesInView(t,(function(t){var e=t.sri,n=t.sci,i=t.eri;if(l.has(e)){if(!c.has(e)){c.add(e);var r=s.rows.sumHeight(e,i+1);a.translate(0,-r)}}else Rn.call(o,e,n)})),a.restore(),Dn.call(this,t),a.restore()}function In(t,e,n,i){var r=this.draw;r.save(),r.attr({fillStyle:"rgba(75, 137, 255, 0.08)"}).fillRect(t,e,n,i),r.restore()}function Ln(t,e,n,i,r,o){var a=this,s=this.draw,l=this.data,u=e.h,h=e.w,p=o+i,f=r+n;s.save(),s.attr(Cn),"all"!==t&&"left"!==t||s.fillRect(0,p,n,u),"all"!==t&&"top"!==t||s.fillRect(f,0,h,i);var d=l.selector.range,y=d.sri,m=d.sci,v=d.eri,g=d.eci;s.attr({textAlign:"center",textBaseline:"middle",font:"500 ".concat(pn(12),"px Source Sans Pro"),fillStyle:"#585757",lineWidth:.5,strokeStyle:"#e6e6e6"}),"all"!==t&&"left"!==t||(l.rowEach(e.sri,e.eri,(function(t,e,i){var r=p+e,o=t;s.line([0,r],[n,r]),y<=o&&o<v+1&&In.call(a,0,r,n,i),s.fillText(o+1,n/2,r+i/2)})),s.line([0,u+p],[n,u+p]),s.line([n,p],[n,u+p])),"all"!==t&&"top"!==t||(l.colEach(e.sci,e.eci,(function(t,e,n){var r=f+e,o=t;s.line([r,0],[r,i]),m<=o&&o<g+1&&In.call(a,r,0,n,i),s.fillText(c(o),r+n/2,i/2)})),s.line([h+f,0],[h+f,i]),s.line([0,i],[h+f,i])),s.restore()}function Nn(t,e){var n=this.draw;n.save(),n.attr({fillStyle:"#f4f5f8"}).fillRect(0,0,t,e),n.restore()}function Bn(t,e,n,i,r){var o=t.sri,a=t.sci,s=t.eri,l=t.eci,c=t.w,u=t.h,h=this.draw,p=this.data,f=p.settings;h.save(),h.attr(En).translate(e+i,n+r),h.clearRect(0,0,c,u),f.showGrid?(p.rowEach(o,s,(function(t,e,n){t!==o&&h.line([0,e],[c,e]),t===s&&h.line([0,e+n],[c,e+n])})),p.colEach(a,l,(function(t,e,n){t!==a&&h.line([e,0],[e,u]),t===l&&h.line([e+n,0],[e+n,u])})),h.restore()):h.restore()}function Vn(t,e,n,i){var r=this.draw,o=this.data,a=o.viewWidth()-t,s=o.viewHeight()-e;r.save().translate(t,e).attr({strokeStyle:"rgba(75, 137, 255, .6)"}),r.line([0,i],[a,i]),r.line([n,0],[n,s]),r.restore()}var Gn=function(t){function e(t,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==vn(e)&&"function"!=typeof e?_n(t):e}(this,Sn(e).call(this,{container:t,width:n.viewWidth(),height:n.viewHeight(),scaleX:window.devicePixelRatio,scaleY:window.devicePixelRatio}))).el=t,i.draw=new mn(t,n.viewWidth(),n.viewHeight()),xn(Sn(e.prototype),"add",_n(i)).call(_n(i),i.draw),i.draw.draw(),i.data=n,i.layer_cell=[],i.layer_cell_TOP_LEFT=[],i.layer_cell_TOP_RIGHT=[],i.layer_cell_BOTTOM_LEFT=[],i.layer_cell_BOTTOM_RIGHT=[],i.layer_line_TOP_LEFT=[],i.layer_line_TOP_RIGHT=[],i.layer_line_BOTTOM_LEFT=[],i.layer_line_BOTTOM_RIGHT=[],i.layer=new Ke.a.Layer,i.layer_TOP_LEFT=new Ke.a.Layer,i.layer_TOP_RIGHT=new Ke.a.Layer,i.layer_BOTTOM_LEFT=new Ke.a.Layer,i.layer_BOTTOM_RIGHT=new Ke.a.Layer;var r=new Ke.a.Circle({x:170,y:170,radius:30,fill:"red",stroke:"black",strokeWidth:2,draggable:!0});return r.on("mouseover",(function(){document.body.style.cursor="pointer"})),r.on("mouseout",(function(){document.body.style.cursor="default"})),i.layer.add(r),xn(Sn(e.prototype),"add",_n(i)).call(_n(i),i.layer),xn(Sn(e.prototype),"add",_n(i)).call(_n(i),i.layer_TOP_LEFT),xn(Sn(e.prototype),"add",_n(i)).call(_n(i),i.layer_TOP_RIGHT),xn(Sn(e.prototype),"add",_n(i)).call(_n(i),i.layer_BOTTOM_LEFT),xn(Sn(e.prototype),"add",_n(i)).call(_n(i),i.layer_BOTTOM_RIGHT),i.layer.draw(),i.layer_TOP_LEFT.draw(),i.layer_TOP_RIGHT.draw(),i.layer_BOTTOM_LEFT.draw(),i.layer_BOTTOM_RIGHT.draw(),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(e,t),n=e,(i=[{key:"setlayer",value:function(){for(var t=this.data.shapes.getData(),e=0;e<t.length;e++)"shape"==t[e].type?Mn.call(this,t[e]):"line"==t[e].type&&Tn.call(this,t[e])}},{key:"render",value:function(){var t=this.data,e=t.rows,n=t.cols.indexWidth,i=e.height;this.draw.resize(t.viewWidth(),t.viewHeight()),this.clear();var r=t.viewRange(),o=t.freezeTotalWidth(),a=t.freezeTotalHeight(),s=t.scroll,l=s.x,c=s.y;Bn.call(this,r,n,i,o,a),Fn.call(this,r,n,i,-l,-c),Ln.call(this,"all",r,n,i,o,a),Nn.call(this,n,i),jn.call(this,this.layer_BOTTOM_RIGHT,this.layer_cell_BOTTOM_RIGHT,r,n,i,-l,-c);var u=gn(t.freeze,2),h=u[0],p=u[1];if(h>0||p>0){if(h>0){var f=r.clone();f.sri=0,f.eri=h-1,f.h=a,Bn.call(this,f,n,i,o,0),Fn.call(this,f,n,i,-l,0),Ln.call(this,"top",f,n,i,o,0),jn.call(this,this.layer_TOP_RIGHT,this.layer_cell_TOP_RIGHT,f,n,i,-l,0)}if(p>0){var d=r.clone();d.sci=0,d.eci=p-1,d.w=o,Bn.call(this,d,n,i,0,a),Ln.call(this,"left",d,n,i,0,a),Fn.call(this,d,n,i,0,-c),jn.call(this,this.layer_BOTTOM_LEFT,this.layer_cell_BOTTOM_LEFT,d,n,i,0,-c)}var y=t.freezeViewRange();Bn.call(this,y,n,i,0,0),Ln.call(this,"all",y,n,i,0,0),Fn.call(this,y,n,i,0,0),Vn.call(this,n,i,o,a),jn.call(this,this.layer_TOP_LEFT,this.layer_cell_TOP_LEFT,y,n,i,0,0)}this.layer.draw(),this.layer_TOP_LEFT.draw(),this.layer_TOP_RIGHT.draw(),this.layer_BOTTOM_LEFT.draw(),this.layer_BOTTOM_RIGHT.draw()}},{key:"clear",value:function(){this.draw.clear()}}])&&bn(n.prototype,i),r&&bn(n,r),e}(Ke.a.Stage);function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wn(t,e){return!e||"object"!==zn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hn(t){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qn=function(t){function e(t,n,i,r){var o,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Wn(this,Hn(e).call(this,"div","".concat(St,"-dropdown ").concat(r)))).title=t,s.change=function(){},"string"==typeof t?s.title=a("div","".concat(St,"-dropdown-title")).child(t):i&&s.title.addClass("arrow-left");for(var l=arguments.length,c=new Array(l>4?l-4:0),u=4;u<l;u++)c[u-4]=arguments[u];return s.contentEl=(o=a("div","".concat(St,"-dropdown-content"))).children.apply(o,c).css("width",n).hide(),s.headerEl=a("div","".concat(St,"-dropdown-header")),s.headerEl.on("click",(function(){"block"!==s.contentEl.css("display")?s.show():s.hide()})).children(s.title,i?a("div","".concat(St,"-icon arrow-right")).child(a("div","".concat(St,"-icon-img arrow-down"))):""),s.children(s.headerEl,s.contentEl),s}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(e,t),n=e,(i=[{key:"setTitle",value:function(t){this.title.html(t),this.hide()}},{key:"show",value:function(){var t=this;this.contentEl.show(),this.parent().active(),_t(this.parent(),(function(){t.hide()}))}},{key:"hide",value:function(){this.parent().active(!1),this.contentEl.hide(),bt(this.parent())}}])&&Un(n.prototype,i),r&&Un(n,r),e}(o);function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $n(t,e){return!e||"object"!==Yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jn(t){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zn(t,e){return(Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qn=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=Oe.map((function(t){return a("div","".concat(St,"-item")).on("click",(function(){n.setTitle(t.title),n.change(t)})).child(t.title)}));return n=$n(this,(t=Jn(e)).call.apply(t,[this,Oe[0].title,"160px",!0,"bottom-left"].concat(Xn(i))))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zn(t,e)}(e,t),e}(qn);function ti(t){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ni(t,e){return!e||"object"!==ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ii(t){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ri(t,e){return(ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oi=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=Pe.map((function(t){return a("div","".concat(St,"-item")).on("click",(function(){n.setTitle("".concat(t.pt)),n.change(t)})).child("".concat(t.pt))}));return n=ni(this,(t=ii(e)).call.apply(t,[this,"10","60px",!0,"bottom-left"].concat(ei(i))))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ri(t,e)}(e,t),e}(qn);function ai(t){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function si(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function li(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ci(t,e){return!e||"object"!==ai(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ui(t){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hi(t,e){return(hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pi=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=Ue.slice(0);return i.splice(2,0,{key:"divider"}),i.splice(7,0,{key:"divider"}),i=i.map((function(t){var e=a("div","".concat(St,"-item"));return"divider"===t.key?e.addClass("divider"):(e.child(t.title()).on("click",(function(){n.setTitle(t.title()),n.change(t)})),t.label&&e.child(a("div","label").html(t.label))),e})),n=ci(this,(t=ui(e)).call.apply(t,[this,"Normal","220px",!0,"bottom-left"].concat(si(i))))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hi(t,e)}(e,t),n=e,(i=[{key:"setTitle",value:function(t){for(var e=0;e<Ue.length;e+=1)Ue[e].key===t&&this.title.html(Ue[e].title);this.hide()}}])&&li(n.prototype,i),r&&li(n,r),e}(qn);function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function yi(t,e){return!e||"object"!==fi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vi(t,e){return(vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gi=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=Fe.map((function(t){return a("div","".concat(St,"-item")).on("click",(function(){n.hide(),n.change(t)})).child(t.key)}));return n=yi(this,(t=mi(e)).call.apply(t,[this,new oe("formula"),"180px",!0,"bottom-left"].concat(di(i))))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vi(t,e)}(e,t),e}(qn);function bi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _i=["#ffffff","#000100","#e7e5e6","#445569","#5b9cd6","#ed7d31","#a5a5a5","#ffc001","#4371c6","#71ae47"],wi=[["#f2f2f2","#7f7f7f","#d0cecf","#d5dce4","#deeaf6","#fce5d5","#ededed","#fff2cd","#d9e2f3","#e3efd9"],["#d8d8d8","#595959","#afabac","#adb8ca","#bdd7ee","#f7ccac","#dbdbdb","#ffe59a","#b3c6e7","#c5e0b3"],["#bfbfbf","#3f3f3f","#756f6f","#8596b0","#9cc2e6","#f4b184","#c9c9c9","#fed964","#8eaada","#a7d08c"],["#a5a5a5","#262626","#3a3839","#333f4f","#2e75b5","#c45a10","#7b7b7b","#bf8e01","#2f5596","#538136"],["#7f7f7f","#0c0c0c","#171516","#222a35","#1f4e7a","#843c0a","#525252","#7e6000","#203864","#365624"]],xi=["#c00000","#fe0000","#fdc101","#ffff01","#93d051","#00b04e","#01b0f1","#0170c1","#012060","#7030a0"];function Si(t){var e=this;return a("td","").child(a("div","".concat(St,"-color-palette-cell")).on("click.stop",(function(){return e.change(t)})).css("background-color",t))}var ki=function t(){var e,n,i,r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=a("div","".concat(St,"-color-palette")),this.change=function(){};var o=a("table","").children((e=a("tbody","")).children.apply(e,[(n=a("tr","".concat(St,"-theme-color-placeholders"))).children.apply(n,bi(_i.map((function(t){return Si.call(r,t)}))))].concat(bi(wi.map((function(t){var e;return(e=a("tr","".concat(St,"-theme-colors"))).children.apply(e,bi(t.map((function(t){return Si.call(r,t)}))))}))),[(i=a("tr","".concat(St,"-standard-colors"))).children.apply(i,bi(xi.map((function(t){return Si.call(r,t)}))))])));this.el.child(o)};function Ci(t){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oi(t,e){return!e||"object"!==Ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pi(t){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ai(t,e){return(Ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ti=function(t){function e(t,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new oe(t).css("height","16px").css("border-bottom","3px solid ".concat(n)),o=new ki;return o.change=function(t){i.setTitle(t),i.change(t)},i=Oi(this,Pi(e).call(this,r,"auto",!1,"bottom-left",o.el))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ai(t,e)}(e,t),n=e,(i=[{key:"setTitle",value:function(t){this.title.css("border-color",t),this.hide()}}])&&Ei(n.prototype,i),r&&Ei(n,r),e}(qn);function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ri(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Di(t,e){return!e||"object"!==Mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fi(t){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ii(t,e){return(Ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Li=function(t){function e(t,n){var i,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=new oe("align-".concat(n)),s=t.map((function(t){return(e="align-".concat(t),a("div","".concat(St,"-item")).child(new oe(e))).on("click",(function(){r.setTitle(t),r.change(t)}));var e}));return r=Di(this,(i=Fi(e)).call.apply(i,[this,o,"auto",!0,"bottom-left"].concat(ji(s))))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ii(t,e)}(e,t),n=e,(i=[{key:"setTitle",value:function(t){this.title.setName("align-".concat(t)),this.hide()}}])&&Ri(n.prototype,i),r&&Ri(n,r),e}(qn);function Ni(t){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Vi(t,e){return!e||"object"!==Ni(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gi(t){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zi(t,e){return(zi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ui=[["thin",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" style="user-select: none;"></line></svg>'],["medium",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="2" style="user-select: none;"><line x1="0" y1="1.0" x2="50" y2="1.0" stroke-width="2" stroke="black" style="user-select: none;"></line></svg>'],["thick",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="3" style="user-select: none;"><line x1="0" y1="1.5" x2="50" y2="1.5" stroke-width="3" stroke="black" style="user-select: none;"></line></svg>'],["dashed",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="2" style="user-select: none;"></line></svg>'],["dotted",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="1" style="user-select: none;"></line></svg>']],Wi=function(t){function e(t){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new oe("line-type"),o=0,s=Ui.map((function(e,n){return a("div","".concat(St,"-item state ").concat(t===e[0]?"checked":"")).on("click",(function(){s[o].toggle("checked"),s[n].toggle("checked"),o=n,i.hide(),i.change(e)})).child(a("div","".concat(St,"-line-type")).html(e[1]))}));return i=Vi(this,(n=Gi(e)).call.apply(n,[this,r,"auto",!1,"bottom-left"].concat(Bi(s))))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zi(t,e)}(e,t),e}(qn);function Hi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ki(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qi(){var t;return a("table","").child((t=a("tbody","")).children.apply(t,arguments))}function Yi(t){var e=this;return a("td","").child(a("div","".concat(St,"-border-palette-cell")).child(new oe("border-".concat(t))).on("click",(function(){e.mode=t;var n=e.mode,i=e.style,r=e.color;e.change({mode:n,style:i,color:r})})))}var Xi=function t(){var e,n,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#000",this.style="thin",this.mode="all",this.change=function(){},this.ddColor=new Ti("line-color",this.color),this.ddColor.change=function(t){i.color=t},this.ddType=new Wi(this.style),this.ddType.change=function(t){var e=Ki(t,1)[0];i.style=e},this.el=a("div","".concat(St,"-border-palette"));var r=qi(a("tr","").children(a("td","".concat(St,"-border-palette-left")).child(qi((e=a("tr","")).children.apply(e,Hi(["all","inside","horizontal","vertical","outside"].map((function(t){return Yi.call(i,t)})))),(n=a("tr","")).children.apply(n,Hi(["left","top","right","bottom","none"].map((function(t){return Yi.call(i,t)})))))),a("td","".concat(St,"-border-palette-right")).children(a("div","".concat(St,"-toolbar-btn")).child(this.ddColor.el),a("div","".concat(St,"-toolbar-btn")).child(this.ddType.el))));this.el.child(r)};function $i(t){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ji(t,e){return!e||"object"!==$i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tr=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new oe("border-all"),i=new Xi;return i.change=function(e){t.change(e),t.hide()},t=Ji(this,Zi(e).call(this,n,"auto",!1,"bottom-left",i.el))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}(e,t),e}(qn);function er(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function nr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ir(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ar(t,e){return!e||"object"!==rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sr(t){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lr(t,e){return(lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cr(t){return a("div","".concat(St,"-toolbar-btn")).on("mouseenter",(function(e){!function(t,e){if(!e.classList.contains("active")){var n=e.getBoundingClientRect(),i=n.left,r=n.top,o=n.width,s=n.height,l=a("div","".concat(St,"-tooltip")).html(t).show();document.body.appendChild(l.el);var c=l.box();l.css("left","".concat(i+o/2-c.width/2,"px")).css("top","".concat(r+s+2,"px")),vt(e,"mouseleave",(function(){document.body.contains(l.el)&&document.body.removeChild(l.el)})),vt(e,"click",(function(){document.body.contains(l.el)&&document.body.removeChild(l.el)}))}}(t,e.target)})).attr("data-tooltip",t)}function ur(){return a("div","".concat(St,"-toolbar-divider"))}function hr(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return cr(t).child((n=e,new oe(n))).on("click",(function(){return i()}))}function pr(){var t=this;this.ddFormat.change=function(e){return t.change("format",e.key)},this.ddFont.change=function(e){return t.change("font-name",e.key)},this.ddFormula.change=function(e){return t.change("formula",e.key)},this.ddFontSize.change=function(e){return t.change("font-size",e.pt)},this.ddTextColor.change=function(e){return t.change("color",e)},this.ddFillColor.change=function(e){return t.change("bgcolor",e)},this.ddAlign.change=function(e){return t.change("align",e)},this.ddVAlign.change=function(e){return t.change("valign",e)},this.ddBorder.change=function(e){return t.change("border",e)}}function fr(t){var e=t,n=t.split("-");n.length>1&&n.forEach((function(t,n){0===n?e=t:e+=t[0].toUpperCase()+t.substring(1)}));var i=this["".concat(e,"El")];i.toggle(),this.change(t,i.hasClass("active"))}var dr=function(t){function e(){var t;or(this,e);var n=new oe("ellipsis"),i=a("div","".concat(St,"-toolbar-more"));return(t=ar(this,sr(e).call(this,n,"auto",!1,"bottom-right",i))).moreBtns=i,t.contentEl.css("max-width","420px"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lr(t,e)}(e,t),e}(qn);function yr(){this.btns2=this.btnChildren.map((function(t){var e=t.box(),n=t.computedStyle(),i=n.marginLeft,r=n.marginRight;return[t,e.width+parseInt(i,10)+parseInt(r,10)]}))}function mr(){var t,e,n=this.el,i=this.btns,r=this.moreEl,o=this.ddMore,a=this.btns2,s=o.moreBtns,l=o.contentEl;n.css("width","".concat(this.widthFn()-60,"px"));var c=n.box(),u=160,h=12,p=[],f=[];a.forEach((function(t,e){var n=ir(t,2),i=n[0],r=n[1];u+=r,e===a.length-1||u<c.width?p.push(i):(h+=r,f.push(i))})),(t=i.html("")).children.apply(t,p),(e=s.html("")).children.apply(e,f),l.css("width","".concat(h,"px")),f.length>0?r.show():r.hide()}var vr=function(){function t(e,n){var i,r=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];or(this,t),this.data=e,this.change=function(){},this.widthFn=n;var s=e.defaultStyle();this.ddFormat=new pi,this.ddFont=new Qn,this.ddFormula=new gi,this.ddFontSize=new oi,this.ddTextColor=new Ti("text-color",s.color),this.ddFillColor=new Ti("fill-color",s.bgcolor),this.ddAlign=new Li(["left","center","right"],s.align),this.ddVAlign=new Li(["top","middle","bottom"],s.valign),this.ddBorder=new tr,this.ddMore=new dr,this.btnChildren=[this.undoEl=hr("".concat(z("toolbar.undo")," (Ctrl+Z)"),"undo",(function(){return r.change("undo")})),this.redoEl=hr("".concat(z("toolbar.undo")," (Ctrl+Y)"),"redo",(function(){return r.change("redo")})),this.paintformatEl=hr("".concat(z("toolbar.paintformat")),"paintformat",(function(){return fr.call(r,"paintformat")})),this.clearformatEl=hr("".concat(z("toolbar.clearformat")),"clearformat",(function(){return r.change("clearformat")})),ur(),cr("".concat(z("toolbar.format"))).child(this.ddFormat.el),ur(),cr("".concat(z("toolbar.font"))).child(this.ddFont.el),cr("".concat(z("toolbar.fontSize"))).child(this.ddFontSize.el),ur(),this.fontBoldEl=hr("".concat(z("toolbar.fontBold")," (Ctrl+B)"),"bold",(function(){return fr.call(r,"font-bold")})),this.fontItalicEl=hr("".concat(z("toolbar.fontItalic")," (Ctrl+I)"),"italic",(function(){return fr.call(r,"font-italic")})),this.underlineEl=hr("".concat(z("toolbar.underline")," (Ctrl+U)"),"underline",(function(){return fr.call(r,"underline")})),this.strikeEl=hr("".concat(z("toolbar.strike")),"strike",(function(){return fr.call(r,"strike")})),cr("".concat(z("toolbar.textColor"))).child(this.ddTextColor.el),ur(),cr("".concat(z("toolbar.fillColor"))).child(this.ddFillColor.el),cr("".concat(z("toolbar.border"))).child(this.ddBorder.el),this.mergeEl=hr("".concat(z("toolbar.merge")),"merge",(function(){return fr.call(r,"merge")})),ur(),cr("".concat(z("toolbar.align"))).child(this.ddAlign.el),cr("".concat(z("toolbar.valign"))).child(this.ddVAlign.el),this.textwrapEl=hr("".concat(z("toolbar.textwrap")),"textwrap",(function(){return fr.call(r,"textwrap")})),ur(),this.freezeEl=hr("".concat(z("toolbar.freeze")),"freeze",(function(){return fr.call(r,"freeze")})),this.overlayerEl=hr("".concat(z("toolbar.overlayer")),"overlayer",(function(){return fr.call(r,"overlayer")})),this.autofilterEl=hr("".concat(z("toolbar.autofilter")),"autofilter",(function(){return fr.call(r,"autofilter")})),cr("".concat(z("toolbar.formula"))).child(this.ddFormula.el),this.moreEl=cr("".concat(z("toolbar.more"))).child(this.ddMore.el).hide()],this.el=a("div","".concat(St,"-toolbar")),this.btns=(i=a("div","".concat(St,"-toolbar-btns"))).children.apply(i,er(this.btnChildren)),this.el.child(this.btns),o&&this.el.hide(),pr.call(this),this.reset(),setTimeout((function(){yr.call(r),mr.call(r)}),0),vt(window,"resize",(function(){mr.call(r)}))}var e,n,i;return e=t,(n=[{key:"paintformatActive",value:function(){return this.paintformatEl.hasClass("active")}},{key:"paintformatToggle",value:function(){this.paintformatEl.toggle()}},{key:"trigger",value:function(t){fr.call(this,t)}},{key:"reset",value:function(){var t=this.data,e=t.getSelectedCellStyle(),n=t.getSelectedCell();this.undoEl.disabled(!t.canUndo()),this.redoEl.disabled(!t.canRedo()),this.mergeEl.active(t.canUnmerge()).disabled(!t.selector.multiple()),this.autofilterEl.active(!t.canAutofilter());var i=e.font;this.ddFont.setTitle(i.name),this.ddFontSize.setTitle(i.size),this.fontBoldEl.active(i.bold),this.fontItalicEl.active(i.italic),this.underlineEl.active(e.underline),this.strikeEl.active(e.strike),this.ddTextColor.setTitle(e.color),this.ddFillColor.setTitle(e.bgcolor),this.ddAlign.setTitle(e.align),this.ddVAlign.setTitle(e.valign),this.textwrapEl.active(e.textwrap),this.freezeEl.active(t.freezeIsActive()),n&&n.format&&this.ddFormat.setTitle(n.format),this.overlayerEl.active(!0)}}])&&nr(e.prototype,n),i&&nr(e,i),t}();function gr(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function br(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _r=function(){function t(e,n){var i,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"600px";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.el=a("div","".concat(St,"-modal")).css("width",o).children(a("div","".concat(St,"-modal-header")).children(new oe("close").on("click.stop",(function(){return r.hide()})),this.title),(i=a("div","".concat(St,"-modal-content"))).children.apply(i,gr(n))).hide()}var e,n,i;return e=t,(n=[{key:"show",value:function(){var t=this;this.dimmer=a("div","".concat(St,"-dimmer active")),document.body.appendChild(this.dimmer.el);var e=this.el.show().box(),n=e.width,i=e.height,r=document.documentElement,o=r.clientHeight,s=r.clientWidth;this.el.offset({left:(s-n)/2,top:(o-i)/3}),window.xkeydownEsc=function(e){27===e.keyCode&&t.hide()},vt(window,"keydown",window.xkeydownEsc)}},{key:"hide",value:function(){this.el.hide(),document.body.removeChild(this.dimmer.el),gt(window,"keydown",window.xkeydownEsc),delete window.xkeydownEsc}}])&&br(e.prototype,n),i&&br(e,i),t}();function wr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var xr=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vchange=function(){},this.el=a("div","".concat(St,"-form-input")),this.input=a("input","").css("width",e).on("input",(function(t){return i.vchange(t)})).attr("placeholder",n),this.el.child(this.input)}var e,n,i;return e=t,(n=[{key:"hint",value:function(t){this.input.attr("placeholder",t)}},{key:"val",value:function(t){return this.input.val(t)}}])&&wr(e.prototype,n),i&&wr(e,i),t}();function Sr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var kr=function(){function t(e,n,i){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e,this.getTitle=o,this.vchange=function(){},this.el=a("div","".concat(St,"-form-select")),this.suggest=new Qt(n.map((function(t){return{key:t,title:r.getTitle(t)}})),(function(t){r.itemClick(t.key),s(t.key),r.vchange(t.key)}),i,this.el),this.el.children(this.itemEl=a("div","input-text").html(this.getTitle(e)),this.suggest.el).on("click",(function(){return r.show()}))}var e,n,i;return e=t,(n=[{key:"show",value:function(){this.suggest.search("")}},{key:"itemClick",value:function(t){this.key=t,this.itemEl.html(this.getTitle(t))}},{key:"val",value:function(t){return void 0!==t?(this.key=t,this.itemEl.html(this.getTitle(t)),this):this.key}}])&&Sr(e.prototype,n),i&&Sr(e,i),t}();function Cr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Er={number:/(^\d+$)|(^\d+(\.\d{0,4})?$)/,date:/^\d{4}-\d{1,2}-\d{1,2}$/},Or=function(){function t(e,n,i,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label="",this.rule=n,i&&(this.label=a("label","label").css("width","".concat(r,"px")).html(i)),this.tip=a("div","tip").child("tip").hide(),this.input=e,this.input.vchange=function(){return o.validate()},this.el=a("div","".concat(St,"-form-field")).children(this.label,e.el,this.tip)}var e,n,i;return e=t,(n=[{key:"isShow",value:function(){return"none"!==this.el.css("display")}},{key:"show",value:function(){this.el.show()}},{key:"hide",value:function(){return this.el.hide(),this}},{key:"val",value:function(t){return this.input.val(t)}},{key:"hint",value:function(t){this.input.hint(t)}},{key:"validate",value:function(){var t=this.input,e=this.rule,n=this.tip,i=this.el,r=t.val();return e.required&&/^\s*$/.test(r)?(n.html(z("validation.required")),i.addClass("error"),!1):!e.type&&!e.pattern||(e.pattern||Er[e.type]).test(r)?(i.removeClass("error"),!0):(n.html(z("validation.notMatch")),i.addClass("error"),!1)}}])&&Cr(e.prototype,n),i&&Cr(e,i),t}();function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){return!e||"object"!==Pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tr(t){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jr=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ar(this,Tr(e).call(this,"div","".concat(St,"-button ").concat(i)))).child(z("button.".concat(t))),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(e,t),e}(o);function Rr(t){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fr(t,e){return!e||"object"!==Rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lr(t,e){return(Lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nr=100,Br=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new Or(new kr("cell",["cell"],"100%",(function(t){return z("dataValidation.modeType.".concat(t))})),{required:!0},"".concat(z("dataValidation.range"),":"),Nr),i=new Or(new xr("120px","E3 or E3:F12"),{required:!0,pattern:/^([A-Z]{1,2}[1-9]\d*)(:[A-Z]{1,2}[1-9]\d*)?$/}),r=new Or(new kr("list",["list","number","date","phone","email"],"100%",(function(t){return z("dataValidation.type.".concat(t))}),(function(e){return t.criteriaSelected(e)})),{required:!0},"".concat(z("dataValidation.criteria"),":"),Nr),o=new Or(new kr("be",["be","nbe","eq","neq","lt","lte","gt","gte"],"160px",(function(t){return z("dataValidation.operator.".concat(t))}),(function(e){return t.criteriaOperatorSelected(e)})),{required:!0}).hide(),s=new Or(new xr("70px","10"),{required:!0}).hide(),l=new Or(new xr("70px","100"),{required:!0,type:"number"}).hide(),c=new Or(new xr("120px","a,b,c"),{required:!0}),u=new Or(new xr("70px","10"),{required:!0,type:"number"}).hide();return(t=Fr(this,Ir(e).call(this,z("contextmenu.validation"),[a("div","".concat(St,"-form-fields")).children(n.el,i.el),a("div","".concat(St,"-form-fields")).children(r.el,o.el,s.el,l.el,u.el,c.el),a("div","".concat(St,"-buttons")).children(new jr("cancel").on("click",(function(){return t.btnClick("cancel")})),new jr("remove").on("click",(function(){return t.btnClick("remove")})),new jr("save","primary").on("click",(function(){return t.btnClick("save")})))]))).mf=n,t.rf=i,t.cf=r,t.of=o,t.minvf=s,t.maxvf=l,t.vf=u,t.svf=c,t.change=function(){},t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lr(t,e)}(e,t),n=e,(i=[{key:"showVf",value:function(t){var e="date"===t?"2018-11-12":"10",n=this.vf;n.input.hint(e),n.show()}},{key:"criteriaSelected",value:function(t){var e=this.of,n=this.minvf,i=this.maxvf,r=this.vf,o=this.svf;"date"===t||"number"===t?(e.show(),n.rule.type=t,i.rule.type=t,"date"===t?(n.hint("2018-11-12"),i.hint("2019-11-12")):(n.hint("10"),i.hint("100")),n.show(),i.show(),r.hide(),o.hide()):("list"===t?o.show():o.hide(),r.hide(),e.hide(),n.hide(),i.hide())}},{key:"criteriaOperatorSelected",value:function(t){if(t){var e=this.minvf,n=this.maxvf,i=this.vf;if("be"===t||"nbe"===t)e.show(),n.show(),i.hide();else{var r=this.cf.val();i.rule.type=r,"date"===r?i.hint("2018-11-12"):i.hint("10"),i.show(),e.hide(),n.hide()}}}},{key:"btnClick",value:function(t){if("cancel"===t)this.hide();else if("remove"===t)this.change("remove"),this.hide();else if("save"===t){for(var e=["mf","rf","cf","of","svf","vf","minvf","maxvf"],n=0;n<e.length;n+=1){var i=this[e[n]];if(i.isShow()&&!i.validate())return}var r=this.mf.val(),o=this.rf.val(),a=this.cf.val(),s=this.of.val(),l=this.svf.val();"number"!==a&&"date"!==a||(l="be"===s||"nbe"===s?[this.minvf.val(),this.maxvf.val()]:this.vf.val()),this.change("save",r,o,{type:a,operator:s,required:!1,value:l}),this.hide()}}},{key:"setValue",value:function(t){if(t){var e=this.mf,n=this.rf,i=this.cf,r=this.of,o=this.svf,a=this.vf,s=this.minvf,l=this.maxvf,c=t.mode,u=t.ref,h=t.validator||{type:"list"},p=h.type,f=h.operator,d=h.value;e.val(c||"cell"),n.val(u),i.val(p),r.val(f),Array.isArray(d)?(s.val(d[0]),l.val(d[1])):(o.val(d||""),a.val(d||"")),this.criteriaSelected(p),this.criteriaOperatorSelected(f)}this.show()}}])&&Dr(n.prototype,i),r&&Dr(n,r),e}(_r);function Vr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Gr(t){return a("div","".concat(St,"-item ").concat(t))}function zr(t){var e=this;return Gr("state").child(z("sort.".concat(t))).on("click.stop",(function(){return e.itemClick(t)}))}function Ur(t){var e=this,n=this.filterbEl,i=this.filterValues;n.html(""),Object.keys(t).forEach((function(r,o){var s=t[r],l=i.includes(r)?"checked":"";n.child(a("div","".concat(St,"-item state ").concat(l)).on("click.stop",(function(){return e.filterClick(o,r)})).children(""===r?z("filter.empty"):r,a("div","label").html("(".concat(s,")"))))}))}function Wr(){var t=this.filterhEl,e=this.filterValues,n=this.values;t.html("".concat(e.length," / ").concat(n.length)),t.checked(e.length===n.length)}var Hr=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.filterbEl=a("div","".concat(St,"-body")),this.filterhEl=a("div","".concat(St,"-header state")).on("click.stop",(function(){return e.filterClick(0,"all")})),this.el=a("div","".concat(St,"-sort-filter")).children(this.sortAscEl=zr.call(this,"asc"),this.sortDescEl=zr.call(this,"desc"),Gr("divider"),a("div","".concat(St,"-filter")).children(this.filterhEl,this.filterbEl),a("div","".concat(St,"-buttons")).children(new jr("cancel").on("click",(function(){return e.btnClick("cancel")})),new jr("ok","primary").on("click",(function(){return e.btnClick("ok")})))).hide(),this.ci=null,this.sortDesc=null,this.values=null,this.filterValues=[]}var e,n,i;return e=t,(n=[{key:"btnClick",value:function(t){if("ok"===t){var e=this.ci,n=this.sort,i=this.filterValues;this.ok&&this.ok(e,n,"in",i)}this.hide()}},{key:"itemClick",value:function(t){this.sort=t;var e=this.sortAscEl,n=this.sortDescEl;e.checked("asc"===t),n.checked("desc"===t)}},{key:"filterClick",value:function(t,e){var n=this.filterbEl,i=this.filterValues,r=this.values,o=n.children();"all"===e?o.length===i.length?(this.filterValues=[],o.forEach((function(t){return a(t).checked(!1)}))):(this.filterValues=Array.from(r),o.forEach((function(t){return a(t).checked(!0)}))):a(o[t]).toggle("checked")?i.push(e):i.splice(i.findIndex((function(t){return t===e})),1),Wr.call(this)}},{key:"set",value:function(t,e,n,i){this.ci=t;var r=this.sortAscEl,o=this.sortDescEl;null!==i?(this.sort=i.order,r.checked(i.asc()),o.checked(i.desc())):(this.sortDesc=null,r.checked(!1),o.checked(!1)),this.values=Object.keys(e),this.filterValues=n?Array.from(n.value):Object.keys(e),Ur.call(this,e,n),Wr.call(this)}},{key:"setOffset",value:function(t){var e=this;this.el.offset(t).show();var n=1;_t(this.el,(function(){n<=0&&e.hide(),n-=1}))}},{key:"show",value:function(){this.el.show()}},{key:"hide",value:function(){this.el.hide(),bt(this.el)}}])&&Vr(e.prototype,n),i&&Vr(e,i),t}();function Kr(t,e){var n=a("div","".concat(St,"-toast")),i=a("div","".concat(St,"-dimmer active"));n.children(a("div","".concat(St,"-toast-header")).children(new oe("close").on("click.stop",(function(){return document.body.removeChild(n.el),void document.body.removeChild(i.el)})),t),a("div","".concat(St,"-toast-content")).html(e)),document.body.appendChild(n.el),document.body.appendChild(i.el);var r=n.box(),o=r.width,s=r.height,l=document.documentElement,c=l.clientHeight,u=l.clientWidth;n.offset({left:(u-o)/2,top:(c-s)/3})}var qr=Object.prototype.toString,Yr=Object.prototype.hasOwnProperty;function Xr(t){return void 0===t}function $r(t){return void 0!==t}function Jr(t){return"[object Array]"===qr.call(t)}function Zr(t){return"[object Object]"===qr.call(t)}function Qr(t){return"[object Number]"===qr.call(t)}function to(t){var e=qr.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e||"[object Proxy]"===e}function eo(t){return"[object String]"===qr.call(t)}function no(t,e){return Yr.call(t,e)}function io(t,e){var n;return e=uo(e),oo(t,(function(t,i){if(e(t,i))return n=t,!1})),n}function ro(t,e){var n=[];return oo(t,(function(t,i){e(t,i)&&n.push(t)})),n}function oo(t,e){var n;if(!Xr(t)){var i=Jr(t)?po:ho;for(var r in t)if(no(t,r)&&!1===e(n=t[r],i(r)))return n}}function ao(t,e,n){return oo(t,(function(t,i){n=e(n,t,i)})),n}function so(t,e){return!!ao(t,(function(t,n,i){return t&&e(n,i)}),!0)}function lo(t,e){var n=[];return oo(t,(function(t,i){n.push(e(t,i))})),n}function co(t){return function(e){return so(t,(function(t,n){return e[n]===t}))}}function uo(t){return to(t)?t:function(e){return e===t}}function ho(t){return t}function po(t){return Number(t)}function fo(t,e){return t.bind(e)}function yo(){return(yo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function mo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return yo.apply(void 0,[t].concat(n))}var vo=[].indexOf,go=function(t,e){if(vo)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1},bo=/\s+/,_o=Object.prototype.toString;function wo(t){return new xo(t)}function xo(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function So(t){for(var e;t.childNodes.length;)e=t.childNodes[0],t.removeChild(e);return t}xo.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~go(e,t)||e.push(t),this.el.className=e.join(" "),this},xo.prototype.remove=function(t){if("[object RegExp]"==_o.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=go(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},xo.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},xo.prototype.toggle=function(t,e){return this.list?(void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},xo.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(bo);return""===t[0]&&t.shift(),t},xo.prototype.has=xo.prototype.contains=function(t){return this.list?this.list.contains(t):!!~go(this.array(),t)};var ko=Element.prototype,Co=ko.matchesSelector||ko.webkitMatchesSelector||ko.mozMatchesSelector||ko.msMatchesSelector||ko.oMatchesSelector,Eo=function(t,e){if(Co)return Co.call(t,e);for(var n=t.parentNode.querySelectorAll(e),i=0;i<n.length;++i)if(n[i]==t)return!0;return!1};var Oo,Po=window.addEventListener?"addEventListener":"attachEvent",Ao=window.removeEventListener?"removeEventListener":"detachEvent",To="addEventListener"!==Po?"on":"",Mo={bind:function(t,e,n,i){return t[Po](To+e,n,i||!1),n},unbind:function(t,e,n,i){return t[Ao](To+e,n,i||!1),n}},jo=["focus","blur"],Ro={bind:function(t,e,n,i,r){return-1!==jo.indexOf(n)&&(r=!0),Mo.bind(t,n,(function(n){var r=n.target||n.srcElement;n.delegateTarget=function(t,e,n){for(var i=n?t:t.parentNode;i&&i!==document;){if(Eo(i,e))return i;i=i.parentNode}}(r,e,!0),n.delegateTarget&&i.call(t,n)}),r)},unbind:function(t,e,n,i){-1!==jo.indexOf(e)&&(i=!0),Mo.unbind(t,e,n,i)}},Do=function(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){return(r=e.createElement("html")).innerHTML=t,r.removeChild(r.lastChild)}var r,o=Io[i]||Io._default,a=o[0],s=o[1],l=o[2];(r=e.createElement("div")).innerHTML=s+t+l;for(;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);var c=e.createDocumentFragment();for(;r.firstChild;)c.appendChild(r.removeChild(r.firstChild));return c},Fo=!1;"undefined"!=typeof document&&((Oo=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Fo=!Oo.getElementsByTagName("link").length,Oo=void 0);var Io={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Fo?[1,"X<div>","</div>"]:[0,"",""]};Io.td=Io.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Io.option=Io.optgroup=[1,'<select multiple="multiple">',"</select>"],Io.thead=Io.tbody=Io.colgroup=Io.caption=Io.tfoot=[1,"<table>","</table>"],Io.polyline=Io.ellipse=Io.polygon=Io.circle=Io.text=Io.line=Io.path=Io.rect=Io.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Lo="undefined"!=typeof Element?Element.prototype:{};Lo.matches||Lo.matchesSelector||Lo.webkitMatchesSelector||Lo.mozMatchesSelector||Lo.msMatchesSelector||Lo.oMatchesSelector;function No(t,e){return(e=e||document).querySelector(t)}function Bo(t){t.parentNode&&t.parentNode.removeChild(t)}function Vo(t,e){if(t.ownerDocument!==e.ownerDocument)try{return e.ownerDocument.importNode(t,!0)}catch(t){}return t}function Go(t,e){return e.appendChild(Vo(t,e))}function zo(t,e){return Go(e,t),t}var Uo=2,Wo={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Uo,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Uo,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Ho(t,e,n){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Wo[i];r?(r===Uo&&"number"==typeof n&&(n=String(n)+"px"),t.style[i]=n):t.setAttributeNS(null,e,n)}function Ko(t,e,n){if("string"==typeof e){if(void 0===n)return function(t,e){return Wo[e]?t.style[e]:t.getAttributeNS(null,e)}(t,e);Ho(t,e,n)}else!function(t,e){var n,i,r=Object.keys(e);for(n=0;i=r[n];n++)Ho(t,i,e[i])}(t,e);return t}function qo(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var Yo=/\s+/,Xo=Object.prototype.toString;function $o(t){return void 0!==t}function Jo(t){return new Zo(t)}function Zo(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function Qo(t){var e=t.parentNode;return e&&e.removeChild(t),t}Zo.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~qo(e,t)||e.push(t),$o(this.el.className.baseVal)?this.el.className.baseVal=e.join(" "):this.el.className=e.join(" "),this},Zo.prototype.remove=function(t){if("[object RegExp]"===Xo.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=qo(e,t);return~n&&e.splice(n,1),this.el.className.baseVal=e.join(" "),this},Zo.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},Zo.prototype.toggle=function(t,e){return this.list?($o(e)?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):($o(e)?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},Zo.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(Yo);return""===t[0]&&t.shift(),t},Zo.prototype.has=Zo.prototype.contains=function(t){return this.list?this.list.contains(t):!!~qo(this.array(),t)};var ta={svg:"http://www.w3.org/2000/svg"},ea='<svg xmlns="'+ta.svg+'"';function na(t){var e=!1;"<svg"===t.substring(0,4)?-1===t.indexOf(ta.svg)&&(t=ea+t.substring(4)):(t=ea+">"+t+"</svg>",e=!0);var n=function(t){var e;return(e=new DOMParser).async=!1,e.parseFromString(t,"text/xml")}(t);if(!e)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function ia(t,e){var n;return"<"===t.charAt(0)?(n=na(t).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(ta.svg,t),e&&Ko(n,e),n}var ra=ia("svg");function oa(t,e){var n,i,r=Object.keys(e);for(n=0;i=r[n];n++)t[i]=e[i];return t}function aa(t){return t?ra.createSVGTransformFromMatrix(t):ra.createSVGTransform()}var sa=/([&<>]{1})/g,la=/([\n\r"]{1})/g,ca={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function ua(t,e){return t.replace(e,(function(t,e){return ca[e]||e}))}function ha(t,e){var n,i,r,o,a;switch(t.nodeType){case 3:e.push(ua(t.textContent,sa));break;case 1:if(e.push("<",t.tagName),t.hasAttributes())for(n=0,i=(r=t.attributes).length;n<i;++n)o=r.item(n),e.push(" ",o.name,'="',ua(o.value,la),'"');if(t.hasChildNodes()){for(e.push(">"),n=0,i=(a=t.childNodes).length;n<i;++n)ha(a.item(n),e);e.push("</",t.tagName,">")}else e.push("/>");break;case 8:e.push("\x3c!--",ua(t.nodeValue,sa),"--\x3e");break;case 4:e.push("<![CDATA[",t.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+t.nodeType)}return e}function pa(t,e){var n=na(e);if(function(t){for(var e;e=t.firstChild;)Qo(e)}(t),e){"#document-fragment"!==n.nodeName&&(n=n.documentElement);for(var i,r=(i=n.childNodes,Array.prototype.slice.call(i)),o=0;o<r.length;o++)Go(r[o],t)}}function fa(t,e){if(void 0!==e){try{pa(t,e)}catch(t){throw new Error("error parsing SVG: "+t.message)}return t}return function(t){for(var e=t.firstChild,n=[];e;)ha(e,n),e=e.nextSibling;return n.join("")}(t)}function da(t,e){return e instanceof SVGMatrix?t.createSVGTransformFromMatrix(e):e}function ya(t,e){var n=t.transform.baseVal;return e&&(Array.isArray(e)||(e=[e]),function(t,e){var n,i;for(t.clear(),n=0;i=e[n];n++)t.appendItem(da(t,i))}(n,e)),n.consolidate()}var ma=/^class /;function va(t){return"[object Array]"===Object.prototype.toString.call(t)}function ga(){var t=Array.prototype.slice.call(arguments);1===t.length&&va(t[0])&&(t=t[0]);var e=t.pop();return e.$inject=t,e}var ba=/constructor\s*[^(]*\(\s*([^)]*)\)/m,_a=/^function\s*[^(]*\(\s*([^)]*)\)/m,wa=/\/\*([^*]*)\*\//m;function xa(t){if("function"!=typeof t)throw new Error('Cannot annotate "'+t+'". Expected a function!');var e=t.toString().match(function(t){return ma.test(t.toString())}(t)?ba:_a);return e&&e[1]&&e[1].split(",").map((function(t){return(e=t.match(wa))?e[1].trim():t.trim()}))||[]}function Sa(){var t=[];this.factory=function(e,n){return t.push([e,"factory",n]),this},this.value=function(e,n){return t.push([e,"value",n]),this},this.type=function(e,n){return t.push([e,"type",n]),this},this.forEach=function(e){t.forEach(e)}}var ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Ca(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function Ea(t,e){e=e||{get:function(t,e){if(n.push(t),!1===e)return null;throw a('No provider for "'+t+'"!')}};var n=[],i=this._providers=Object.create(e._providers||null),r=this._instances=Object.create(null),o=r.injector=this,a=function(t){var e=n.join(" -> ");return n.length=0,new Error(e?t+" (Resolving: "+e+")":t)},s=function t(o,s){if(!i[o]&&-1!==o.indexOf(".")){for(var l=o.split("."),c=t(l.shift());l.length;)c=c[l.shift()];return c}if(Oa(r,o))return r[o];if(Oa(i,o)){if(-1!==n.indexOf(o))throw n.push(o),a("Cannot resolve circular dependency!");return n.push(o),r[o]=i[o][0](i[o][1]),n.pop(),r[o]}return e.get(o,s)},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof t){if(!va(t))throw new Error('Cannot invoke "'+t+'". Expected a function!');t=ga(t.slice())}var n=t.$inject||xa(t),i=n.map((function(t){return Oa(e,t)?e[t]:s(t)}));return{fn:t,dependencies:i}},c=function(t){var e=l(t),n=e.dependencies,i=e.fn;return new(Function.prototype.bind.apply(i,[null].concat(Ca(n))))},u=function(t,e,n){var i=l(t,n),r=i.dependencies,o=i.fn;return o.call.apply(o,[e].concat(Ca(r)))},h=function(t){return ga((function(e){return t.get(e)}))},p={factory:u,type:c,value:function(t){return t}};t.forEach((function(t){function e(t,e){return"value"!==t&&va(e)&&(e=ga(e.slice())),e}if(t instanceof Sa)t.forEach((function(t){var n=t[0],r=t[1],o=t[2];i[n]=[p[r],e(r,o),r]}));else if("object"===(void 0===t?"undefined":ka(t)))if(t.__exports__){var n=Object.keys(t).reduce((function(e,n){return"__"!==n.substring(0,2)&&(e[n]=t[n]),e}),Object.create(null)),r=new Ea((t.__modules__||[]).concat([n]),o),a=ga((function(t){return r.get(t)}));t.__exports__.forEach((function(t){i[t]=[a,t,"private",r]}))}else Object.keys(t).forEach((function(n){if("private"!==t[n][2]){var r=t[n][0],o=t[n][1];i[n]=[p[r],e(r,o),r]}else i[n]=t[n]}))})),this.get=s,this.invoke=u,this.instantiate=c,this.createChild=function(t,e){if(e&&e.length){var n,r,a,s,l=Object.create(null),c=Object.create(null),u=[],p=[],f=[];for(var d in i)n=i[d],-1!==e.indexOf(d)&&("private"===n[2]?-1===(r=u.indexOf(n[3]))?(a=n[3].createChild([],e),s=h(a),u.push(n[3]),p.push(a),f.push(s),l[d]=[s,d,"private",a]):l[d]=[f[r],d,"private",p[r]]:l[d]=[n[2],n[1]],c[d]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||e.forEach((function(t){-1!==n[1].$scope.indexOf(t)&&(l[d]=[n[2],n[1]],c[t]=!0)}));e.forEach((function(t){if(!c[t])throw new Error('No provider for "'+t+'". Cannot use provider from the parent!')})),t.unshift(l)}return new Ea(t,o)}}function Oa(t,e){return Object.hasOwnProperty.call(t,e)}var Pa=n(7),Aa=n.n(Pa),Ta=1e3;function Ma(t,e){var n=this;e=e||Ta,t.on(["render.shape","render.connection"],e,(function(t,e){var i=t.type,r=e.element,o=e.gfx;if(n.canRender(r))return"render.shape"===i?n.drawShape(o,r):n.drawConnection(o,r)})),t.on(["render.getShapePath","render.getConnectionPath"],e,(function(t,e){if(n.canRender(e))return"render.getShapePath"===t.type?n.getShapePath(e):n.getConnectionPath(e)}))}function ja(t){return t.join(",").replace(/,?([A-z]),?/g,"$1")}function Ra(t){for(var e,n="",i=0;e=t[i];i++)n+=e.x+","+e.y+" ";return n}function Da(t,e){var n=ia("polyline");return Ko(n,{points:Ra(t)}),e&&Ko(n,e),n}function Fa(t,e){var n,i,r,o;return e=!!e,Jr(t)||(t=[t]),oo(t,(function(t){var a=t;t.waypoints&&!e&&(a=Fa(t.waypoints,!0));var s=a.x,l=a.y,c=a.height||0,u=a.width||0;(s<n||void 0===n)&&(n=s),(l<i||void 0===i)&&(i=l),(s+u>r||void 0===r)&&(r=s+u),(l+c>o||void 0===o)&&(o=l+c)})),{x:n,y:i,height:o-i,width:r-n}}function Ia(t){return!(!t||!t.isFrame)}Ma.prototype.canRender=function(){},Ma.prototype.drawShape=function(){},Ma.prototype.drawConnection=function(){},Ma.prototype.getShapePath=function(){},Ma.prototype.getConnectionPath=function(){};var La=1;function Na(t,e){Ma.call(this,t,La),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=e.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Aa()(Na,Ma),Na.prototype.canRender=function(){return!0},Na.prototype.drawShape=function(t,e){var n=ia("rect");return Ko(n,{x:0,y:0,width:e.width||0,height:e.height||0}),Ia(e)?Ko(n,this.FRAME_STYLE):Ko(n,this.SHAPE_STYLE),zo(t,n),n},Na.prototype.drawConnection=function(t,e){var n=Da(e.waypoints,this.CONNECTION_STYLE);return zo(t,n),n},Na.prototype.getShapePath=function(t){var e=t.x,n=t.y,i=t.width;return ja([["M",e,n],["l",i,0],["l",0,t.height],["l",-i,0],["z"]])},Na.prototype.getConnectionPath=function(t){var e,n,i=t.waypoints,r=[];for(e=0;n=i[e];e++)n=n.original||n,r.push([0===e?"M":"L",n.x,n.y]);return ja(r)},Na.$inject=["eventBus","styles"];var Ba={__init__:["defaultRenderer"],defaultRenderer:["type",Na],styles:["type",function(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(t,e,n){return mo(this.style(e,n),{class:t})},this.style=function(e,n){Jr(e)||n||(n=e,e=[]);var i=ao(e,(function(e,n){return mo(e,t[n]||{})}),{});return n?mo(i,n):i},this.computeStyle=function(t,n,i){return Jr(n)||(i=n,n=[]),e.style(n||[],mo({},i,t||{}))}}]};function Va(t,e){return Math.round(t*e)/e}function Ga(t){return Qr(t)?t+"px":t}function za(t,e,n){var i=ia("g");Jo(i).add(e);var r=void 0!==n?n:t.childNodes.length-1;return t.insertBefore(i,t.childNodes[r]||null),i}var Ua={shape:["x","y","width","height"],connection:["waypoints"]};function Wa(t,e,n,i){this._eventBus=e,this._elementRegistry=i,this._graphicsFactory=n,this._init(t||{})}function Ha(t,e){var n="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",n)}Wa.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Wa.prototype._init=function(t){var e=this._eventBus,n=this._container=function(t){var e=(t=mo({},{width:"100%",height:"100%"},t)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),mo(n.style,{position:"relative",overflow:"hidden",width:Ga(t.width),height:Ga(t.height)}),e.appendChild(n),n}(t),i=this._svg=ia("svg");Ko(i,{width:"100%",height:"100%"}),zo(n,i);var r=this._viewport=za(i,"viewport");this._layers={},!1!==t.deferUpdate&&(this._viewboxChanged=function(t,e){var n,i,r,o;function a(){var a=Date.now(),l=o+e-a;if(l>0)return s(l);t.apply(r,i),n=o=i=r=void 0}function s(t){n=setTimeout(a,t)}return function(){o=Date.now();for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];i=a,r=this,n||s(e)}}(fo(this._viewboxChanged,this),300)),e.on("diagram.init",(function(){e.fire("canvas.init",{svg:i,viewport:r})}),this),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],(function(){delete this._cachedViewbox}),this),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},Wa.prototype._destroy=function(t){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},Wa.prototype._clear=function(){var t=this;this._elementRegistry.getAll().forEach((function(e){var n=function(t){return"waypoints"in t?"connection":"x"in t?"shape":"root"}(e);"root"===n?t.setRootElement(null,!0):t._removeElement(e,n)})),delete this._cachedViewbox},Wa.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},Wa.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");var n=this._layers[t];if(n||(n=this._layers[t]=this._createLayer(t,e)),void 0!==e&&n.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return n.group},Wa.prototype._createLayer=function(t,e){e||(e=0);var n=ao(this._layers,(function(t,n){return e>=n.index&&t++,t}),0);return{group:za(this._viewport,"layer-"+t,n),index:e}},Wa.prototype.getContainer=function(){return this._container},Wa.prototype._updateMarker=function(t,e,n){var i;t.id||(t=this._elementRegistry.get(t)),(i=this._elementRegistry._elements[t.id])&&(oo([i.gfx,i.secondaryGfx],(function(t){t&&(n?Jo(t).add(e):Jo(t).remove(e))})),this._eventBus.fire("element.marker.update",{element:t,gfx:i.gfx,marker:e,add:!!n}))},Wa.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},Wa.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},Wa.prototype.hasMarker=function(t,e){return t.id||(t=this._elementRegistry.get(t)),Jo(this.getGraphics(t)).has(e)},Wa.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},Wa.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},Wa.prototype.setRootElement=function(t,e){t&&this._ensureValid("root",t);var n=this._rootElement,i=this._elementRegistry,r=this._eventBus;if(n){if(!e)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:n}),r.fire("root.removed",{element:n}),i.remove(n)}if(t){var o=this.getDefaultLayer();r.fire("root.add",{element:t}),i.add(t,o,this._svg),r.fire("root.added",{element:t,gfx:o})}return this._rootElement=t,t},Wa.prototype._ensureValid=function(t,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element with id "+e.id+" already exists");var n=Ua[t];if(!so(n,(function(t){return void 0!==e[t]})))throw new Error("must supply { "+n.join(", ")+" } with "+t)},Wa.prototype._setParent=function(t,e,n){!function(t,e,n){if(t&&e){"number"!=typeof n&&(n=-1);var i=t.indexOf(e);if(-1!==i){if(i===n)return;if(-1===n)return;t.splice(i,1)}-1!==n?t.splice(n,0,e):t.push(e)}}(e.children,t,n),t.parent=e},Wa.prototype._addElement=function(t,e,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(t,e),r.fire(t+".add",{element:e,parent:n}),this._setParent(e,n,i);var a=o.create(t,e,i);return this._elementRegistry.add(e,a),o.update(t,e,a),r.fire(t+".added",{element:e,gfx:a}),e},Wa.prototype.addShape=function(t,e,n){return this._addElement("shape",t,e,n)},Wa.prototype.addConnection=function(t,e,n){return this._addElement("connection",t,e,n)},Wa.prototype._removeElement=function(t,e){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(t=n.get(t.id||t))return r.fire(e+".remove",{element:t}),i.remove(t),function(t,e){if(!t||!e)return-1;var n=t.indexOf(e);-1!==n&&t.splice(n,1)}(t.parent&&t.parent.children,t),t.parent=null,r.fire(e+".removed",{element:t}),n.remove(t),t},Wa.prototype.removeShape=function(t){return this._removeElement(t,"shape")},Wa.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},Wa.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},Wa.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Wa.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Wa.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,r,o,a,s=this._viewport,l=this.getSize();return t?(this._changeViewbox((function(){r=Math.min(l.width/t.width,l.height/t.height);var e=this._svg.createSVGMatrix().scale(r).translate(-t.x,-t.y);ya(s,e)})),t):(e=this.getDefaultLayer().getBBox(),n=(i=ya(s))?i.matrix:function(t,e,n,i,r,o){var a=ra.createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return oa(a,t);case 6:return oa(a,{a:t,b:e,c:n,d:i,e:r,f:o})}}(),r=Va(n.a,1e3),o=Va(-n.e||0,1e3),a=Va(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/r:0,y:a?a/r:0,width:l.width/r,height:l.height/r,scale:r,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:l})},Wa.prototype.scroll=function(t){var e=this._viewport,n=e.getCTM();return t&&this._changeViewbox((function(){t=mo({dx:0,dy:0},t||{}),n=this._svg.createSVGMatrix().translate(t.dx,t.dy).multiply(n),Ha(e,n)})),{x:n.e,y:n.f}},Wa.prototype.zoom=function(t,e){return t?"fit-viewport"===t?this._fitViewport(e):(this._changeViewbox((function(){"object"!=typeof e&&(n=this.viewbox().outer,e={x:n.width/2,y:n.height/2}),i=this._setZoom(t,e)})),Va(i.a,1e3)):this.viewbox(t).scale;var n,i},Wa.prototype._fitViewport=function(t){var e,n,i=this.viewbox(),r=i.outer,o=i.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!t?n={x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(e=Math.min(1,r.width/o.width,r.height/o.height),n={x:o.x+(t?o.width/2-r.width/e/2:0),y:o.y+(t?o.height/2-r.height/e/2:0),width:r.width/e,height:r.height/e}),this.viewbox(n),this.viewbox(!1).scale},Wa.prototype._setZoom=function(t,e){var n,i,r,o,a=this._svg,s=this._viewport,l=a.createSVGMatrix(),c=a.createSVGPoint(),u=(i=s.getCTM()).a;return e?(n=mo(c,e).matrixTransform(i.inverse()),r=l.translate(n.x,n.y).scale(1/u*t).translate(-n.x,-n.y),o=i.multiply(r)):o=l.scale(t),Ha(this._viewport,o),o},Wa.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Wa.prototype.getAbsoluteBBox=function(t){var e,n=this.viewbox();t.waypoints?e=this.getGraphics(t).getBBox():e=t;return{x:e.x*n.scale-n.x*n.scale,y:e.y*n.scale-n.y*n.scale,width:e.width*n.scale,height:e.height*n.scale}},Wa.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Ka="data-element-id";function qa(t){this._elements={},this._eventBus=t}qa.$inject=["eventBus"],qa.prototype.add=function(t,e,n){var i=t.id;this._validateId(i),Ko(e,Ka,i),n&&Ko(n,Ka,i),this._elements[i]={element:t,gfx:e,secondaryGfx:n}},qa.prototype.remove=function(t){var e=this._elements,n=t.id||t,i=n&&e[n];i&&(Ko(i.gfx,Ka,""),i.secondaryGfx&&Ko(i.secondaryGfx,Ka,""),delete e[n])},qa.prototype.updateId=function(t,e){this._validateId(e),"string"==typeof t&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var n=this.getGraphics(t),i=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,n,i)},qa.prototype.get=function(t){var e;e="string"==typeof t?t:t&&Ko(t,Ka);var n=this._elements[e];return n&&n.element},qa.prototype.filter=function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(n)})),e},qa.prototype.getAll=function(){return this.filter((function(t){return t}))},qa.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach((function(n){var i=e[n],r=i.element,o=i.gfx;return t(r,o)}))},qa.prototype.getGraphics=function(t,e){var n=t.id||t,i=this._elements[n];return i&&(e?i.secondaryGfx:i.gfx)},qa.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")};var Ya=n(8),Xa=n.n(Ya),$a=new Xa.a({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Ja=new Xa.a({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Za=new Xa.a({name:"attachers",collection:!0},{name:"host"}),Qa=new Xa.a({name:"outgoing",collection:!0},{name:"source"}),ts=new Xa.a({name:"incoming",collection:!0},{name:"target"});function es(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(t){var e=this.label,n=this.labels;!t&&e?n.remove(e):n.add(t,0)}}),$a.bind(this,"parent"),Ja.bind(this,"labels"),Qa.bind(this,"outgoing"),ts.bind(this,"incoming")}function ns(){es.call(this),$a.bind(this,"children"),Za.bind(this,"host"),Za.bind(this,"attachers")}function is(){ns.call(this)}function rs(){ns.call(this),Ja.bind(this,"labelTarget")}function os(){es.call(this),Qa.bind(this,"source"),ts.bind(this,"target")}Aa()(ns,es),Aa()(is,ns),Aa()(rs,ns),Aa()(os,es);var as={connection:os,shape:ns,label:rs,root:is};function ss(){this._uid=12}ss.prototype.createRoot=function(t){return this.create("root",t)},ss.prototype.createLabel=function(t){return this.create("label",t)},ss.prototype.createShape=function(t){return this.create("shape",t)},ss.prototype.createConnection=function(t){return this.create("connection",t)},ss.prototype.create=function(t,e){return(e=mo({},e||{})).id||(e.id=t+"_"+this._uid++),function(t,e){var n=as[t];if(!n)throw new Error("unknown type: <"+t+">");return mo(new n,e)}(t,e)};var ls=Array.prototype.slice;function cs(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function us(){}function hs(t,e,n){var i=aa();i.setTranslate(e,n),ya(t,i)}function ps(t,e){this._eventBus=t,this._elementRegistry=e}function fs(t,e,n){var i=n||e.firstChild;t!==i&&e.insertBefore(t,i)}cs.prototype.on=function(t,e,n,i){if(t=Jr(t)?t:[t],to(e)&&(i=n,n=e,e=1e3),!Qr(e))throw new Error("priority must be a number");var r=n;i&&((r=fo(n,i)).__fn=n.__fn||n);var o=this;t.forEach((function(t){o._addListener(t,{priority:e,callback:r,next:null})}))},cs.prototype.once=function(t,e,n,i){var r=this;if(to(e)&&(i=n,n=e,e=1e3),!Qr(e))throw new Error("priority must be a number");function o(){var e=n.apply(i,arguments);return r.off(t,o),e}o.__fn=n,this.on(t,e,o)},cs.prototype.off=function(t,e){t=Jr(t)?t:[t];var n=this;t.forEach((function(t){n._removeListener(t,e)}))},cs.prototype.createEvent=function(t){var e=new us;return e.init(t),e},cs.prototype.fire=function(t,e){var n,i,r,o;if(o=ls.call(arguments),"object"==typeof t&&(t=(n=t).type),!t)throw new Error("no event type specified");if(i=this._listeners[t]){n=e instanceof us?e:this.createEvent(e),o[0]=n;var a=n.type;t!==a&&(n.type=t);try{r=this._invokeListeners(n,o,i)}finally{t!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},cs.prototype.handleError=function(t){return!1===this.fire("error",{error:t})},cs.prototype._destroy=function(){this._listeners={}},cs.prototype._invokeListeners=function(t,e,n){for(var i;n&&!t.cancelBubble;)i=this._invokeListener(t,e,n),n=n.next;return i},cs.prototype._invokeListener=function(t,e,n){var i;try{void 0!==(i=function(t,e){return t.apply(null,e)}(n.callback,e))&&(t.returnValue=i,t.stopPropagation()),!1===i&&t.preventDefault()}catch(t){if(!this.handleError(t))throw console.error("unhandled error in event listener"),console.error(t.stack),t}return i},cs.prototype._addListener=function(t,e){var n,i=this._getListeners(t);if(i){for(;i;){if(i.priority<e.priority)return e.next=i,void(n?n.next=e:this._setListeners(t,e));n=i,i=i.next}n.next=e}else this._setListeners(t,e)},cs.prototype._getListeners=function(t){return this._listeners[t]},cs.prototype._setListeners=function(t,e){this._listeners[t]=e},cs.prototype._removeListener=function(t,e){var n,i,r,o=this._getListeners(t);if(e)for(;o;)n=o.next,(r=o.callback)!==e&&r.__fn!==e||(i?i.next=n:this._setListeners(t,n)),i=o,o=n;else this._setListeners(t,null)},us.prototype.stopPropagation=function(){this.cancelBubble=!0},us.prototype.preventDefault=function(){this.defaultPrevented=!0},us.prototype.init=function(t){mo(this,t||{})},ps.$inject=["eventBus","elementRegistry"],ps.prototype._getChildren=function(t){var e,n=this._elementRegistry.getGraphics(t);return t.parent?(e=function(t){return t.parentNode.childNodes[1]}(n))||(Jo(e=ia("g")).add("djs-children"),zo(n.parentNode,e)):e=n,e},ps.prototype._clear=function(t){var e=function(t){return t.childNodes[0]}(t);return So(e),e},ps.prototype._createContainer=function(t,e,n,i){var r=ia("g");Jo(r).add("djs-group"),void 0!==n?fs(r,e,e.childNodes[n]):zo(e,r);var o=ia("g");Jo(o).add("djs-element"),Jo(o).add("djs-"+t),i&&Jo(o).add("djs-frame"),zo(r,o);var a=ia("g");return Jo(a).add("djs-visual"),zo(o,a),o},ps.prototype.create=function(t,e,n){var i=this._getChildren(e.parent);return this._createContainer(t,i,n,Ia(e))},ps.prototype.updateContainments=function(t){var e=this,n=this._elementRegistry;oo(ao(t,(function(t,e){return e.parent&&(t[e.parent.id]=e.parent),t}),{}),(function(t){var i=t.children;if(i){var r=e._getChildren(t);oo(i.slice().reverse(),(function(t){fs(n.getGraphics(t).parentNode,r)}))}}))},ps.prototype.drawShape=function(t,e){return this._eventBus.fire("render.shape",{gfx:t,element:e})},ps.prototype.getShapePath=function(t){return this._eventBus.fire("render.getShapePath",t)},ps.prototype.drawConnection=function(t,e){return this._eventBus.fire("render.connection",{gfx:t,element:e})},ps.prototype.getConnectionPath=function(t){return this._eventBus.fire("render.getConnectionPath",t)},ps.prototype.update=function(t,e,n){if(e.parent){var i=this._clear(n);if("shape"===t)this.drawShape(i,e),hs(n,e.x,e.y);else{if("connection"!==t)throw new Error("unknown type: "+t);this.drawConnection(i,e)}e.hidden?Ko(n,"display","none"):Ko(n,"display","block")}},ps.prototype.remove=function(t){Qo(this._elementRegistry.getGraphics(t).parentNode)};var ds={__depends__:[Ba],__init__:["canvas"],canvas:["type",Wa],elementRegistry:["type",qa],elementFactory:["type",ss],eventBus:["type",cs],graphicsFactory:["type",ps]};function ys(t){var e=[],n=[];function i(t){return e.indexOf(t)>=0}t.forEach((function t(r){i(r)||((r.__depends__||[]).forEach(t),i(r)||(!function(t){e.push(t)}(r),(r.__init__||[]).forEach((function(t){n.push(t)}))))}));var r=new Ea(e);return n.forEach((function(t){try{r["string"==typeof t?"get":"invoke"](t)}catch(t){throw console.error("Failed to instantiate component"),console.error(t.stack),t}})),r}function ms(t,e){this.injector=e=e||function(t){return ys([{config:["value",t=t||{}]},ds].concat(t.modules||[]))}(t),this.get=e.get,this.invoke=e.invoke,this.get("eventBus").fire("diagram.init")}function vs(){}function gs(t,e){this.model=t,this.properties=e}ms.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},ms.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},vs.prototype.get=function(t){return this.$model.properties.get(this,t)},vs.prototype.set=function(t,e){this.$model.properties.set(this,t,e)},gs.prototype.createType=function(t){var e=this.model,n=this.properties,i=Object.create(vs.prototype);oo(t.properties,(function(t){t.isMany||void 0===t.default||(i[t.name]=t.default)})),n.defineModel(i,e),n.defineDescriptor(i,t);var r=t.ns.name;function o(t){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),oo(t,fo((function(t,e){this.set(e,t)}),this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,e),n.defineDescriptor(o,t),o};var bs={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},_s={String:function(t){return t},Boolean:function(t){return"true"===t},Integer:function(t){return parseInt(t,10)},Real:function(t){return parseFloat(t,10)}};function ws(t,e){var n=_s[t];return n?n(e):e}function xs(t){return!!bs[t]}function Ss(t){return!!_s[t]}function ks(t,e){var n,i,r=t.split(/:/);if(1===r.length)n=t,i=e;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+t);n=r[1],i=r[0]}return{name:t=(i?i+":":"")+n,prefix:i,localName:n}}function Cs(t){this.ns=t,this.name=t.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Es(t,e){this.packageMap={},this.typeMap={},this.packages=[],this.properties=e,oo(t,fo(this.registerPackage,this))}function Os(t,e,n){var i=e[n];if(i in t)throw new Error("package with "+n+" <"+i+"> already defined")}function Ps(t){this.model=t}function As(t,e,n){Object.defineProperty(t,e.name,{enumerable:!e.isReference,writable:!0,value:n,configurable:!0})}function Ts(t){this.properties=new Ps(this),this.factory=new gs(this,this.properties),this.registry=new Es(t,this.properties),this.typeCache={}}Cs.prototype.build=function(){return t=this,e=["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"],n={},i=Object(t),oo(e,(function(e){e in i&&(n[e]=t[e])})),n;var t,e,n,i},Cs.prototype.addProperty=function(t,e,n){"boolean"==typeof e&&(n=e,e=void 0),this.addNamedProperty(t,!1!==n);var i=this.properties;void 0!==e?i.splice(e,0,t):i.push(t)},Cs.prototype.replaceProperty=function(t,e,n){var i=t.ns,r=this.properties,o=this.propertiesByName,a=t.name!==e.name;if(t.isId){if(!e.isId)throw new Error("property <"+e.ns.name+"> must be id property to refine <"+t.ns.name+">");this.setIdProperty(e,!1)}if(t.isBody){if(!e.isBody)throw new Error("property <"+e.ns.name+"> must be body property to refine <"+t.ns.name+">");this.setBodyProperty(e,!1)}var s=r.indexOf(t);if(-1===s)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(e,n?void 0:s,a),o[i.name]=o[i.localName]=e},Cs.prototype.redefineProperty=function(t,e,n){var i=t.ns.prefix,r=e.split("#"),o=ks(r[0],i),a=ks(r[1],o.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error("refined property <"+a+"> not found");this.replaceProperty(s,t,n),delete t.redefines},Cs.prototype.addNamedProperty=function(t,e){var n=t.ns,i=this.propertiesByName;e&&(this.assertNotDefined(t,n.name),this.assertNotDefined(t,n.localName)),i[n.name]=i[n.localName]=t},Cs.prototype.removeNamedProperty=function(t){var e=t.ns,n=this.propertiesByName;delete n[e.name],delete n[e.localName]},Cs.prototype.setBodyProperty=function(t,e){if(e&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+t.ns.name+">)");this.bodyProperty=t},Cs.prototype.setIdProperty=function(t,e){if(e&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+t.ns.name+">)");this.idProperty=t},Cs.prototype.assertNotDefined=function(t,e){var n=t.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+t.definedBy.ns.name+"#"+t.ns.name+"> not allowed without redefines")},Cs.prototype.hasProperty=function(t){return this.propertiesByName[t]},Cs.prototype.addTrait=function(t,e){var n=this.allTypesByName,i=this.allTypes,r=t.name;r in n||(oo(t.properties,fo((function(n){n=mo({},n,{name:n.ns.localName,inherited:e}),Object.defineProperty(n,"definedBy",{value:t});var i=n.replaces,r=n.redefines;i||r?this.redefineProperty(n,i||r,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))}),this)),i.push(t),n[r]=t)},Es.prototype.getPackage=function(t){return this.packageMap[t]},Es.prototype.getPackages=function(){return this.packages},Es.prototype.registerPackage=function(t){t=mo({},t);var e=this.packageMap;Os(e,t,"prefix"),Os(e,t,"uri"),oo(t.types,fo((function(e){this.registerType(e,t)}),this)),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},Es.prototype.registerType=function(t,e){var n=ks((t=mo({},t,{superClass:(t.superClass||[]).slice(),extends:(t.extends||[]).slice(),properties:(t.properties||[]).slice(),meta:mo(t.meta||{})})).name,e.prefix),i=n.name,r={};oo(t.properties,fo((function(t){var e=ks(t.name,n.prefix),i=e.name;xs(t.type)||(t.type=ks(t.type,e.prefix).name),mo(t,{ns:e,name:i}),r[i]=t}),this)),mo(t,{ns:n,name:i,propertiesByName:r}),oo(t.extends,fo((function(t){var e=this.typeMap[t];e.traits=e.traits||[],e.traits.push(i)}),this)),this.definePackage(t,e),this.typeMap[i]=t},Es.prototype.mapTypes=function(t,e,n){var i=xs(t.name)?{name:t.name}:this.typeMap[t.name],r=this;function o(t){return a(t,!0)}function a(n,i){var o=ks(n,xs(n)?"":t.prefix);r.mapTypes(o,e,i)}if(!i)throw new Error("unknown type <"+t.name+">");oo(i.superClass,n?o:a),e(i,!n),oo(i.traits,o)},Es.prototype.getEffectiveDescriptor=function(t){var e=ks(t),n=new Cs(e);this.mapTypes(e,(function(t,e){n.addTrait(t,e)}));var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},Es.prototype.definePackage=function(t,e){this.properties.define(t,"$pkg",{value:e})},Ps.prototype.set=function(t,e,n){var i=this.model.getPropertyDescriptor(t,e),r=i&&i.name;void 0===n?i?delete t[r]:delete t.$attrs[e]:i?r in t?t[r]=n:As(t,i,n):t.$attrs[e]=n},Ps.prototype.get=function(t,e){var n=this.model.getPropertyDescriptor(t,e);if(!n)return t.$attrs[e];var i=n.name;return!t[i]&&n.isMany&&As(t,n,[]),t[i]},Ps.prototype.define=function(t,e,n){Object.defineProperty(t,e,n)},Ps.prototype.defineDescriptor=function(t,e){this.define(t,"$descriptor",{value:e})},Ps.prototype.defineModel=function(t,e){this.define(t,"$model",{value:e})},Ts.prototype.create=function(t,e){var n=this.getType(t);if(!n)throw new Error("unknown type <"+t+">");return new n(e)},Ts.prototype.getType=function(t){var e=this.typeCache,n=eo(t)?t:t.ns.name,i=e[n];return i||(t=this.registry.getEffectiveDescriptor(n),i=e[n]=this.factory.createType(t)),i},Ts.prototype.createAny=function(t,e,n){var i=ks(t),r={$type:t,$instanceOf:function(t){return t===this.$type}},o={name:t,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:e}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),oo(n,(function(t,e){Zr(t)&&void 0!==t.value?r[t.name]=t.value:r[e]=t})),r},Ts.prototype.getPackage=function(t){return this.registry.getPackage(t)},Ts.prototype.getPackages=function(){return this.registry.getPackages()},Ts.prototype.getElementDescriptor=function(t){return t.$descriptor},Ts.prototype.hasType=function(t,e){return void 0===e&&(e=t,t=this),e in t.$model.getElementDescriptor(t).allTypesByName},Ts.prototype.getPropertyDescriptor=function(t,e){return this.getElementDescriptor(t).propertiesByName[e]},Ts.prototype.getTypeDescriptor=function(t){return this.registry.typeMap[t]};var Ms=String.fromCharCode,js=Object.prototype.hasOwnProperty,Rs=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,Ds={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function Fs(t,e,n,i){return i?js.call(Ds,i)?Ds[i]:"&"+i+";":Ms(e||parseInt(n,16))}function Is(t){return t.length>3&&-1!==t.indexOf("&")?t.replace(Rs,Fs):t}Object.keys(Ds).forEach((function(t){Ds[t.toUpperCase()]=Ds[t]}));var Ls="http://www.w3.org/2001/XMLSchema-instance",Ns="xsi",Bs="xsi:type",Vs="non-whitespace outside of root node";function Gs(t){return new Error(t)}function zs(t){return"missing namespace for prefix <"+t+">"}function Us(t){return{get:t,enumerable:!0}}function Ws(t){var e,n={};for(e in t)n[e]=t[e];return n}function Hs(t){return t+"$uri"}function Ks(){return{line:0,column:0}}function qs(t){throw t}function Ys(t){if(!this)return new Ys(t);var e,n,i,r,o,a,s,l,c,u=t&&t.proxy,h=qs,p=Ks,f=!1,d=!1,y=null,m=!1;function v(t){t instanceof Error||(t=Gs(t)),y=t,h(t,p)}function g(t){o&&(t instanceof Error||(t=Gs(t)),o(t,p))}this.on=function(t,c){if("function"!=typeof c)throw Gs("required args <name, cb>");switch(t){case"openTag":n=c;break;case"text":e=c;break;case"closeTag":i=c;break;case"error":h=c;break;case"warn":o=c;break;case"cdata":r=c;break;case"attention":l=c;break;case"question":s=c;break;case"comment":a=c;break;default:throw Gs("unsupported event: "+t)}return this},this.ns=function(t){if(void 0===t&&(t={}),"object"!=typeof t)throw Gs("required args <nsMap={}>");var e,n={};for(e in t)n[e]=t[e];return n[Ls]=Ns,d=!0,c=n,this},this.parse=function(t){if("string"!=typeof t)throw Gs("required args <xml=string>");return y=null,function(t){var o,h,y,b,_,w,x,S,k,C,E=d?[]:null,O=d?function(t){var e,n,i={};for(e in t)i[n=t[e]]=n,i[Hs(n)]=e;return i}(c):null,P=[],A=0,T=!1,M=!1,j=0,R=0,D="",F=0;function I(){if(null!==C)return C;var t,e,n,i,r,o,a,s,l,u,h,p=d&&O.xmlns,y=d&&f?[]:null,m=F,v=D,b=v.length,_={},w={};t:for(;m<b;m++)if(l=!1,!(32===(u=v.charCodeAt(m))||u<14&&u>8)){for((u<65||u>122||u>90&&u<97)&&95!==u&&58!==u&&(g("illegal first char attribute name"),l=!0),h=m+1;h<b;h++)if(!((u=v.charCodeAt(h))>96&&u<123||u>64&&u<91||u>47&&u<59||46===u||45===u||95===u)){if(32===u||u<14&&u>8){g("missing attribute value"),m=h;continue t}if(61===u)break;g("illegal attribute name char"),l=!0}if("xmlns:xmlns"===(s=v.substring(m,h))&&(g("illegal declaration of xmlns"),l=!0),34===(u=v.charCodeAt(h+1)))-1===(h=v.indexOf('"',m=h+2))&&-1!==(h=v.indexOf("'",m))&&(g("attribute value quote missmatch"),l=!0);else if(39===u)-1===(h=v.indexOf("'",m=h+2))&&-1!==(h=v.indexOf('"',m))&&(g("attribute value quote missmatch"),l=!0);else for(g("missing attribute value quotes"),l=!0,h+=1;h<b&&!(32===(u=v.charCodeAt(h+1))||u<14&&u>8);h++);for(-1===h&&(g("missing closing quotes"),h=b,l=!0),l||(o=v.substring(m,h)),m=h;h+1<b&&!(32===(u=v.charCodeAt(h+1))||u<14&&u>8);h++)m===h&&(g("illegal character after attribute end"),l=!0);if(m=h+1,!l)if(s in w)g("attribute <"+s+"> already defined");else if(w[s]=!0,d)if(f){if(null!==(r="xmlns"===s?"xmlns":120===s.charCodeAt(0)&&"xmlns:"===s.substr(0,6)?s.substr(6):null)){if(t=Is(o),e=Hs(r),!(a=c[t])){if("xmlns"===r||e in O&&O[e]!==t)do{a="ns"+A++}while(void 0!==O[a]);else a=r;c[t]=a}O[r]!==a&&(i||(O=Ws(O),i=!0),O[r]=a,"xmlns"===r&&(O[Hs(a)]=t,p=a),O[e]=t),_[s]=o;continue}y.push(s,o)}else-1!==(u=s.indexOf(":"))?(n=O[s.substring(0,u)])?((s=p===n?s.substr(u+1):n+s.substr(u))===Bs&&(-1!==(u=o.indexOf(":"))?(n=o.substring(0,u),o=(n=O[n]||n)+o.substring(u)):o=p+":"+o),_[s]=o):g(zs(s.substring(0,u))):_[s]=o;else _[s]=o}if(f)for(m=0,b=y.length;m<b;m++){if(s=y[m++],o=y[m],-1!==(u=s.indexOf(":"))){if(!(n=O[s.substring(0,u)])){g(zs(s.substring(0,u)));continue}(s=p===n?s.substr(u+1):n+s.substr(u))===Bs&&(-1!==(u=o.indexOf(":"))?(n=o.substring(0,u),o=(n=O[n]||n)+o.substring(u)):o=p+":"+o)}_[s]=o}return C=_}p=function(){var e,n,i=/(\r\n|\r|\n)/g,r=0,o=0,a=0,s=R;for(;j>=a&&(e=i.exec(t))&&!((s=e[0].length+e.index)>j);)r+=1,a=s;-1==j?(o=s,n=t.substring(R)):0===R?(console.log(j-a),n=t.substring(R,j)):(o=j-a,n=-1==R?t.substring(j):t.substring(j,R+1));return{data:n,line:r,column:o}},u&&(k=Object.create({},{name:Us((function(){return x})),originalName:Us((function(){return S})),attrs:Us(I),ns:Us((function(){return O}))}));for(;-1!==R;){if(-1===(j=60===t.charCodeAt(R)?R:t.indexOf("<",R)))return P.length?v("unexpected end of file"):0===R?v("missing start tag"):void(R<t.length&&t.substring(R).trim()&&g(Vs));if(R!==j)if(P.length){if(e&&(e(t.substring(R,j),Is,p),m))return}else if(t.substring(R,j).trim()&&(g(Vs),m))return;if(33!==(_=t.charCodeAt(j+1)))if(63!==_){if(-1==(R=t.indexOf(">",j+1)))return v("unclosed tag");if(C={},47===_){if(T=!1,M=!0,!P.length)return v("missing open tag");if(h=x=P.pop(),b=j+2+h.length,t.substring(j+2,b)!==h)return v("closing tag mismatch");for(;b<R;b++)if(!(32===(_=t.charCodeAt(b))||_>8&&_<14))return v("close tag")}else{if(47===t.charCodeAt(R-1)?(h=x=t.substring(j+1,R-1),T=!0,M=!0):(h=x=t.substring(j+1,R),T=!0,M=!1),!(_>96&&_<123||_>64&&_<91||95===_||58===_))return v("illegal first char nodeName");for(b=1,y=h.length;b<y;b++)if(!((_=h.charCodeAt(b))>96&&_<123||_>64&&_<91||_>47&&_<59||45===_||95===_||46==_)){if(32===_||_<14&&_>8){x=h.substring(0,b),C=null;break}return v("invalid nodeName")}M||P.push(x)}if(d){if(o=O,T&&(M||E.push(o),null===C&&(f=-1!==h.indexOf("xmlns",b))&&(F=b,D=h,I(),f=!1)),S=x,-1!==(_=x.indexOf(":"))){if(!(w=O[x.substring(0,_)]))return v("missing namespace on <"+S+">");x=x.substr(_+1)}else w=O.xmlns;w&&(x=w+":"+x)}if(T&&(F=b,D=h,n&&(u?n(k,Is,M,p):n(x,I,Is,M,p),m)))return;if(M){if(i&&(i(u?k:x,Is,T,p),m))return;d&&(O=T?o:E.pop())}R+=1}else{if(-1===(R=t.indexOf("?>",j)))return v("unclosed question");if(s&&(s(t.substring(j,R+2),p),m))return;R+=2}else{if(91===(_=t.charCodeAt(j+2))&&"CDATA["===t.substr(j+3,6)){if(-1===(R=t.indexOf("]]>",j)))return v("unclosed cdata");if(r&&(r(t.substring(j+9,R),p),m))return;R+=3;continue}if(45===_&&45===t.charCodeAt(j+3)){if(-1===(R=t.indexOf("--\x3e",j)))return v("unclosed comment");if(a&&(a(t.substring(j+4,R),Is,p),m))return;R+=3;continue}if(-1===(R=t.indexOf(">",j+1)))return v("unclosed tag");if(l&&(l(t.substring(j,R+1),Is,p),m))return;R+=1}}}(t),p=Ks,m=!1,y},this.stop=function(){m=!0}}function Xs(t){return t.xml&&"lowerCase"===t.xml.tagAlias}var $s={xsi:"http://www.w3.org/2001/XMLSchema-instance"},Js="xsi:type";function Zs(t){return t.xml&&t.xml.serialize}function Qs(t){return Zs(t)===Js}function tl(t,e){return Xs(e)?t.prefix+":"+((n=t.localName).charAt(0).toUpperCase()+n.slice(1)):t.name;var n}function el(t){return new Error(t)}function nl(t){return t.$descriptor}function il(t){mo(this,t),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw el("expected element");var e,n=this.elementsById,i=nl(t).idProperty;if(i&&(e=t.get(i.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(e))throw new Error("illegal ID <"+e+">");if(n[e])throw el("duplicate ID <"+e+">");n[e]=t}},this.addWarning=function(t){this.warnings.push(t)}}function rl(){}function ol(){}function al(){}function sl(t,e){this.property=t,this.context=e}function ll(t,e){this.element=e,this.propertyDesc=t}function cl(){}function ul(t,e,n){this.model=t,this.type=t.getType(e),this.context=n}function hl(t,e,n){ul.call(this,t,e,n)}function pl(t,e,n){this.model=t,this.context=n}function fl(t){t instanceof Ts&&(t={model:t}),mo(this,{lax:!1},t)}rl.prototype.handleEnd=function(){},rl.prototype.handleText=function(){},rl.prototype.handleNode=function(){},ol.prototype=Object.create(rl.prototype),ol.prototype.handleNode=function(){return this},al.prototype=Object.create(rl.prototype),al.prototype.handleText=function(t){this.body=(this.body||"")+t},sl.prototype=Object.create(al.prototype),sl.prototype.handleNode=function(t){if(this.element)throw el("expected no sub nodes");return this.element=this.createReference(t),this},sl.prototype.handleEnd=function(){this.element.id=this.body},sl.prototype.createReference=function(t){return{property:this.property.ns.name,id:""}},ll.prototype=Object.create(al.prototype),ll.prototype.handleEnd=function(){var t=this.body||"",e=this.element,n=this.propertyDesc;t=ws(n.type,t),n.isMany?e.get(n.name).push(t):e.set(n.name,t)},cl.prototype=Object.create(al.prototype),cl.prototype.handleNode=function(t){var e=this,n=this.element;return n?e=this.handleChild(t):(n=this.element=this.createElement(t),this.context.addElement(n)),e},ul.prototype=Object.create(cl.prototype),ul.prototype.addReference=function(t){this.context.addReference(t)},ul.prototype.handleText=function(t){if(!nl(this.element).bodyProperty)throw el("unexpected body text <"+t+">");al.prototype.handleText.call(this,t)},ul.prototype.handleEnd=function(){var t=this.body,e=this.element,n=nl(e).bodyProperty;n&&void 0!==t&&(t=ws(n.type,t),e.set(n.name,t))},ul.prototype.createElement=function(t){var e,n=t.attributes,i=this.type,r=nl(i),o=this.context,a=new i({}),s=this.model;return oo(n,(function(t,n){var i=r.propertiesByName[n];i&&i.isReference?i.isMany?oo(t.split(" "),(function(t){o.addReference({element:a,property:i.ns.name,id:t})})):o.addReference({element:a,property:i.ns.name,id:t}):(i?t=ws(i.type,t):"xmlns"!==n&&(e=ks(n,r.ns.prefix),s.getPackage(e.prefix)&&o.addWarning({message:"unknown attribute <"+n+">",element:a,property:n,value:t})),a.set(n,t))})),a},ul.prototype.getPropertyForNode=function(t){var e,n,i=ks(t.name),r=this.type,o=this.model,a=nl(r),s=i.name,l=a.propertiesByName[s];if(l)return Qs(l)&&(e=t.attributes[Js])?(e=function(t,e){var n=ks(t);return function(t,e){var n=t.name,i=t.localName,r=e.xml&&e.xml.typePrefix;return r&&0===i.indexOf(r)?t.prefix+":"+i.slice(r.length):n}(n,e.getPackage(n.prefix))}(e,o),mo({},l,{effectiveType:nl(n=o.getType(e)).name})):l;var c=o.getPackage(i.prefix);if(c){if(e=tl(i,c),n=o.getType(e),l=io(a.properties,(function(t){return!t.isVirtual&&!t.isReference&&!t.isAttribute&&n.hasType(t.type)})))return mo({},l,{effectiveType:nl(n).name})}else if(l=io(a.properties,(function(t){return!t.isReference&&!t.isAttribute&&"Element"===t.type})))return l;throw el("unrecognized element <"+i.name+">")},ul.prototype.toString=function(){return"ElementDescriptor["+nl(this.type).name+"]"},ul.prototype.valueHandler=function(t,e){return new ll(t,e)},ul.prototype.referenceHandler=function(t){return new sl(t,this.context)},ul.prototype.handler=function(t){return"Element"===t?new pl(this.model,t,this.context):new ul(this.model,t,this.context)},ul.prototype.handleChild=function(t){var e,n,i,r;if(e=this.getPropertyForNode(t),i=this.element,Ss(n=e.effectiveType||e.type))return this.valueHandler(e,i);var o=(r=e.isReference?this.referenceHandler(e).handleNode(t):this.handler(n).handleNode(t)).element;return void 0!==o&&(e.isMany?i.get(e.name).push(o):i.set(e.name,o),e.isReference?(mo(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},hl.prototype=Object.create(ul.prototype),hl.prototype.createElement=function(t){var e=t.name,n=ks(e),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&tl(n,o)||e;if(!r.hasType(a))throw el("unexpected element <"+t.originalName+">");return ul.prototype.createElement.call(this,t)},pl.prototype=Object.create(cl.prototype),pl.prototype.createElement=function(t){var e=t.name,n=ks(e).prefix,i=t.ns[n+"$uri"],r=t.attributes;return this.model.createAny(e,i,r)},pl.prototype.handleChild=function(t){var e=new pl(this.model,"Element",this.context).handleNode(t),n=this.element,i=e.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),e},pl.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},fl.prototype.fromXML=function(t,e,n){var i=e.rootHandler;e instanceof ul?(i=e,e={}):"string"==typeof e?(i=this.handler(e),e={}):"string"==typeof i&&(i=this.handler(i));var r=this.model,o=this.lax,a=new il(mo({},e,{rootHandler:i})),s=new Ys({proxy:!0}),l=function(){var t=[];return Object.defineProperty(t,"peek",{value:function(){return this[this.length-1]}}),t}();function c(t,e,n){var i=e(),r=i.line,o=i.column,s=i.data;"<"===s.charAt(0)&&-1!==s.indexOf(" ")&&(s=s.slice(0,s.indexOf(" "))+">");var l="unparsable content "+(s?s+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+o+"\n\tnested error: "+t.message;if(n)return a.addWarning({message:l,error:t}),!0;throw el(l)}function u(t,e){return c(t,e,!0)}i.context=a,l.push(i);var h=/^<\?xml /i,p=/ encoding="([^"]+)"/i,f=/^utf-8$/i;function d(t,e){try{l.peek().handleText(t)}catch(t){u(t,e)}}var y=r.getPackages().reduce((function(t,e){return t[e.uri]=e.prefix,t}),{});s.ns(y).on("openTag",(function(t,e,n,i){var r=t.attrs||{},a=Object.keys(r).reduce((function(t,n){var i=e(r[n]);return t[n]=i,t}),{});!function(t,e){var n=l.peek();try{l.push(n.handleNode(t))}catch(t){c(t,e,o)&&l.push(new ol)}}({name:t.name,originalName:t.originalName,attributes:a,ns:t.ns},i)})).on("question",(function(t){if(h.test(t)){var e=p.exec(t),n=e&&e[1];n&&!f.test(n)&&a.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}})).on("closeTag",(function(){l.pop().handleEnd()})).on("cdata",d).on("text",(function(t,e,n){!function(t,e){(t=t.trim())&&d(t,e)}(e(t),n)})).on("error",c).on("warn",u),setTimeout((function(){var e;try{s.parse(t),function(){var t,e,n=a.elementsById,i=a.references;for(t=0;e=i[t];t++){var r=e.element,o=n[e.id],s=nl(r).propertiesByName[e.property];if(o||a.addWarning({message:"unresolved reference <"+e.id+">",element:e.element,property:e.property,value:e.id}),s.isMany){var l=r.get(s.name),c=l.indexOf(e);-1===c&&(c=l.length),o?l[c]=o:l.splice(c,1)}else r.set(s.name,o)}}()}catch(t){e=t}var r=i.element;e||r||(e=el("failed to parse document as <"+i.type.$descriptor.name+">")),n(e,e?void 0:r,a)}),0)},fl.prototype.handler=function(t){return new hl(this.model,t)};var dl='<?xml version="1.0" encoding="UTF-8"?>\n',yl=/<|>|'|"|&|\n\r|\n/g,ml=/<|>|&/g;function vl(t){var e={},n={},i={},r=[],o=[];this.byUri=function(e){return n[e]||t&&t.byUri(e)},this.add=function(t,e){n[t.uri]=t,e?r.push(t):o.push(t),this.mapPrefix(t.prefix,t.uri)},this.uriByPrefix=function(t){return e[t||"xmlns"]},this.mapPrefix=function(t,n){e[t||"xmlns"]=n},this.logUsed=function(t){var e=t.uri;i[e]=this.byUri(e)},this.getUsed=function(t){return[].concat(r,o).filter((function(t){return i[t.uri]}))}}function gl(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function bl(t){return eo(t)?t:(t.prefix?t.prefix+":":"")+t.localName}var _l={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},wl={"<":"lt",">":"gt","&":"amp"};function xl(t,e,n){return(t=eo(t)?t:""+t).replace(e,(function(t){return"&"+n[t]+";"}))}function Sl(t){this.tagName=t}function kl(){}function Cl(t){this.tagName=t}function El(t,e){this.body=[],this.attrs=[],this.parent=t,this.propertyDescriptor=e}function Ol(t,e){El.call(this,t,e)}function Pl(){this.value="",this.write=function(t){this.value+=t}}function Al(t,e){var n=[""];this.append=function(e){return t.write(e),this},this.appendNewLine=function(){return e&&t.write("\n"),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Tl(t){return t=mo({format:!1,preamble:!0},t||{}),{toXML:function(e,n){var i=n||new Pl,r=new Al(i,t.format);if(t.preamble&&r.append(dl),(new El).build(e).serializeTo(r),!n)return i.value}}}function Ml(t,e){Ts.call(this,t,e)}Sl.prototype.build=function(t){return this.element=t,this},Sl.prototype.serializeTo=function(t){t.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},kl.prototype.serializeValue=kl.prototype.serializeTo=function(t){t.append(this.escape?xl(this.value,ml,wl):this.value)},kl.prototype.build=function(t,e){return this.value=e,"String"===t.type&&-1!==e.search(ml)&&(this.escape=!0),this},gl(Cl,kl),Cl.prototype.serializeTo=function(t){t.appendIndent().append("<"+this.tagName+">"),this.serializeValue(t),t.append("</"+this.tagName+">").appendNewLine()},El.prototype.build=function(t){this.element=t;var e,n,i=t.$descriptor,r=this.propertyDescriptor,o=i.isGeneric;return e=o?this.parseGeneric(t):this.parseNsAttributes(t),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),o||(n=function(t){return ro(t.$descriptor.properties,(function(e){var n=e.name;if(e.isVirtual)return!1;if(!t.hasOwnProperty(n))return!1;var i=t[n];return i!==e.default&&(null!==i&&(!e.isMany||i.length))}))}(t),this.parseAttributes(ro(n,(function(t){return t.isAttr}))),this.parseContainments(function(t){return ro(t,(function(t){return!t.isAttr}))}(n))),this.parseGenericAttributes(t,e),this},El.prototype.nsTagName=function(t){return function(t,e){return e.isGeneric?mo({localName:e.ns.localName},t):mo({localName:(n=e.ns.localName,i=e.$pkg,Xs(i)?(r=n).charAt(0).toLowerCase()+r.slice(1):n)},t);var n,i,r}(this.logNamespaceUsed(t.ns),t)},El.prototype.nsPropertyTagName=function(t){return function(t,e){return mo({localName:e.ns.localName},t)}(this.logNamespaceUsed(t.ns),t)},El.prototype.isLocalNs=function(t){return t.uri===this.ns.uri},El.prototype.nsAttributeName=function(t){var e;if(e=eo(t)?ks(t):t.ns,t.inherited)return{localName:e.localName};var n=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:e.localName}:mo({localName:e.localName},n)},El.prototype.parseGeneric=function(t){var e=this,n=this.body,i=[];return oo(t,(function(r,o){"$body"===o?n.push((new kl).build({type:"String"},r)):"$children"===o?oo(r,(function(t){n.push(new El(e).build(t))})):0!==o.indexOf("$")&&e.parseNsAttribute(t,o,r)&&i.push({name:o,value:r})})),i},El.prototype.parseNsAttribute=function(t,e,n){var i,r=t.$model,o=ks(e);if("xmlns"===o.prefix&&(i={prefix:o.localName,uri:n}),o.prefix||"xmlns"!==o.localName||(i={uri:n}),!i)return{name:e,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},El.prototype.parseNsAttributes=function(t,e){var n=this,i=t.$attrs,r=[];return oo(i,(function(e,i){var o=n.parseNsAttribute(t,i,e);o&&r.push(o)})),r},El.prototype.parseGenericAttributes=function(t,e){var n=this;oo(e,(function(e){if(e.name!==Js)try{n.addAttribute(n.nsAttributeName(e.name),e.value)}catch(n){console.warn("missing namespace information for ",e.name,"=",e.value,"on",t,n)}}))},El.prototype.parseContainments=function(t){var e=this,n=this.body,i=this.element;oo(t,(function(t){var r=i.get(t.name),o=t.isReference;if(t.isMany||(r=[r]),t.isBody)n.push((new kl).build(t,r[0]));else if(Ss(t.type))oo(r,(function(i){n.push(new Cl(e.addTagName(e.nsPropertyTagName(t))).build(t,i))}));else if(o)oo(r,(function(i){n.push(new Sl(e.addTagName(e.nsPropertyTagName(t))).build(i))}));else{var a=Qs(t),s=function(t){return"property"===Zs(t)}(t);oo(r,(function(i){var r;r=a?new Ol(e,t):s?new El(e,t):new El(e),n.push(r.build(i))}))}}))},El.prototype.getNamespaces=function(t){var e,n=this.namespaces,i=this.parent;return n||(e=i&&i.getNamespaces(),t||!e?this.namespaces=n=new vl(e):n=e),n},El.prototype.logNamespace=function(t,e,n){var i=this.getNamespaces(n),r=t.uri,o=t.prefix;return i.byUri(r)||i.add(t,e),i.mapPrefix(o,r),t},El.prototype.logNamespaceUsed=function(t,e){var n,i,r,o=this.element.$model,a=this.getNamespaces(e),s=t.prefix,l=t.uri;if(!s&&!l)return{localName:t.localName};if(r=$s[s]||o&&(o.getPackage(s)||{}).uri,!(l=l||r||a.uriByPrefix(s)))throw new Error("no namespace uri given for prefix <"+s+">");if(!(t=a.byUri(l))){for(n=s,i=1;a.uriByPrefix(n);)n=s+"_"+i++;t=this.logNamespace({prefix:n,uri:l},r===l)}return s&&a.mapPrefix(s,l),t},El.prototype.parseAttributes=function(t){var e=this,n=this.element;oo(t,(function(t){var i=n.get(t.name);if(t.isReference)if(t.isMany){var r=[];oo(i,(function(t){r.push(t.id)})),i=r.join(" ")}else i=i.id;e.addAttribute(e.nsAttributeName(t),i)}))},El.prototype.addTagName=function(t){var e=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(e),bl(t)},El.prototype.addAttribute=function(t,e){var n=this.attrs;eo(e)&&(e=xl(e,yl,_l)),n.push({name:t,value:e})},El.prototype.serializeAttributes=function(t){var e=this.attrs,n=this.namespaces;n&&(e=function(t){return lo(t.getUsed(),(function(t){return{name:"xmlns"+(t.prefix?":"+t.prefix:""),value:t.uri}}))}(n).concat(e)),oo(e,(function(e){t.append(" ").append(bl(e.name)).append('="').append(e.value).append('"')}))},El.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==kl;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),oo(this.body,(function(e){e.serializeTo(t)})),n&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},gl(Ol,El),Ol.prototype.parseNsAttributes=function(t){var e=El.prototype.parseNsAttributes.call(this,t),n=t.$descriptor;if(n.name===this.propertyDescriptor.type)return e;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=t.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Js),(i.prefix?i.prefix+":":"")+o+n.ns.localName),e},Ol.prototype.isLocalNs=function(t){return t.uri===(this.typeNs||this.ns).uri},Ml.prototype=Object.create(Ts.prototype),Ml.prototype.fromXML=function(t,e,n,i){eo(e)||(i=n,n=e,e="bpmn:Definitions"),to(n)&&(i=n,n={});var r=new fl(mo({model:this,lax:!0},n)),o=r.handler(e);r.fromXML(t,o,i)},Ml.prototype.toXML=function(t,e,n){to(e)&&(n=e,e={});var i,r,o=new Tl(e);try{i=o.toXML(t)}catch(t){r=t}return n(r,i)};var jl={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",type:"LaneSet",isMany:!0,replaces:"FlowElementsContainer#laneSets"},{name:"flowElements",type:"FlowElement",isMany:!0,replaces:"FlowElementsContainer#flowElements"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"assignment",type:"Assignment",isMany:!0},{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",type:"String",isBody:!0}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",type:"String",isAttr:!0},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isVirtual:!0,isMany:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],prefix:"bpmn",xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[],prefix:"bpmndi"},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};var Rl=function(t,e){return new Ml(mo({},jl,t),e)};function Dl(t){return t?"<"+t.$type+(t.id?' id="'+t.id:"")+'" />':"<null>"}var Fl=new Xa.a({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function Il(t,e){return t.$instanceOf(e)}function Ll(t,e){var n={},i=[];function r(t,e){return function(n){t(n,e)}}function o(t){n[t.id]=t}function a(n,i){try{var r=n.di&&function(n,i){if(n.gfx)throw new Error(e("already rendered {element}",{element:Dl(n)}));return t.element(n,i)}(n,i);return o(n),r}catch(t){s(t.message,{element:n,error:t}),console.error(e("failed to import {element}",{element:Dl(n)})),console.error(t)}}function s(e,n){t.error(e,n)}function l(t){var n=t.bpmnElement;n?n.di?s(e("multiple DI elements defined for {element}",{element:Dl(n)}),{element:n}):(Fl.bind(n,"di"),n.di=t):s(e("no bpmnElement referenced in {element}",{element:Dl(t)}),{element:t})}function c(t){var e;l(e=t.plane),oo(e.planeElement,u)}function u(t){l(t)}function h(){for(;i.length;)i.shift()()}function p(t,e){C(t,e),b(t.ioSpecification,e),g(t.artifacts,e),o(t)}function f(t,e){a(t,e)}function d(t,e){a(t,e)}function y(t,e){a(t,e)}function m(t,e){a(t,e)}function v(t,e){a(t,e)}function g(t,e){oo(t,(function(t){Il(t,"bpmn:Association")?i.push((function(){v(t,e)})):v(t,e)}))}function b(t,e){t&&(oo(t.dataInputs,r(y,e)),oo(t.dataOutputs,r(m,e)))}function _(t,e){C(t,e),g(t.artifacts,e)}function w(t,e){var n=a(t,e);Il(t,"bpmn:SubProcess")&&_(t,n||e),Il(t,"bpmn:Activity")&&b(t.ioSpecification,e),i.push((function(){oo(t.dataInputAssociations,r(d,e)),oo(t.dataOutputAssociations,r(d,e))}))}function x(t,e){a(t,e)}function S(t,e){i.push((function(){var n=a(t,e);t.childLaneSet&&k(t.childLaneSet,n||e),function(t){oo(t.flowNodeRef,(function(e){var n=e.get("lanes");n&&n.push(t)}))}(t)}))}function k(t,e){oo(t.lanes,r(S,e))}function C(t,n){!function(t,n){oo(t,(function(t){Il(t,"bpmn:SequenceFlow")?i.push((function(){!function(t,e){a(t,e)}(t,n)})):Il(t,"bpmn:BoundaryEvent")?i.unshift((function(){w(t,n)})):Il(t,"bpmn:FlowNode")?w(t,n):Il(t,"bpmn:DataObject")||(Il(t,"bpmn:DataStoreReference")?x(t,n):Il(t,"bpmn:DataObjectReference")?x(t,n):s(e("unrecognized flowElement {element} in context {context}",{element:Dl(t),context:n?Dl(n.businessObject):"null"}),{element:t,context:n}))}))}(t.flowElements,n),t.laneSets&&function(t,e){oo(t,r(k,e))}(t.laneSets,n)}function E(t,e){var n=a(t,e),i=t.processRef;i&&p(i,n||e)}return{handleDeferred:h,handleDefinitions:function(o,a){var u=o.diagrams;if(a&&-1===u.indexOf(a))throw new Error(e("diagram not part of bpmn:Definitions"));if(!a&&u&&u.length&&(a=u[0]),!a)throw new Error(e("no diagram to display"));c(a);var d=a.plane;if(!d)throw new Error(e("no plane for {element}",{element:Dl(a)}));var y=d.bpmnElement;if(!y){if(!(y=function(t){return io(t.rootElements,(function(t){return Il(t,"bpmn:Process")||Il(t,"bpmn:Collaboration")}))}(o)))throw new Error(e("no process or collaboration to display"));s(e("correcting missing bpmnElement on {plane} to {rootElement}",{plane:Dl(d),rootElement:Dl(y)})),d.bpmnElement=y,l(d)}var m,v=function(e,n){return t.root(e,n)}(y,d);if(Il(y,"bpmn:Process"))p(y,v);else{if(!Il(y,"bpmn:Collaboration"))throw new Error(e("unsupported bpmnElement for {plane}: {rootElement}",{plane:Dl(d),rootElement:Dl(y)}));oo((m=y).participants,r(E)),g(m.artifacts),i.push((function(){var t;oo(m.messageFlows,r(f,t))})),function(t,e){ro(t,(function(t){return!n[t.id]&&Il(t,"bpmn:Process")&&t.laneSets})).forEach(r(p,e))}(o.rootElements,v)}h()},handleSubProcess:_,registerDi:l}}function Nl(t,e){var n=Bl(t);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(e)}function Bl(t){return t&&t.businessObject||t}function Vl(t){return!Nl(t,"bpmn:CallActivity")&&(Nl(t,"bpmn:SubProcess")?!!Bl(t).di.isExpanded:!Nl(t,"bpmn:Participant")||!!Bl(t).processRef)}function Gl(t){return Nl(t,"bpmn:FlowElement")||Nl(t,"bpmn:Participant")||Nl(t,"bpmn:Lane")||Nl(t,"bpmn:SequenceFlow")||Nl(t,"bpmn:MessageFlow")||Nl(t,"bpmn:DataInput")||Nl(t,"bpmn:DataOutput")?"name":Nl(t,"bpmn:TextAnnotation")?"text":Nl(t,"bpmn:Group")?"categoryValueRef":void 0}function zl(t){var e=t.businessObject,n=Gl(e);if(n)return"categoryValueRef"===n?function(t){var e=t.categoryValueRef;return e&&e.value||""}(e):e[n]||""}function Ul(t,e,n){return!!io(t.eventDefinitions,(function(i){return i.$type===e&&function(t,e){return so(e,(function(e,n){return t[n]==e}))}(t,n)}))}function Wl(t){return t.businessObject.di}function Hl(t){return t.businessObject}function Kl(t,e){return Wl(t).get("bioc:fill")||e||"white"}function ql(t,e){return Wl(t).get("bioc:stroke")||e||"black"}var Yl=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){var e=t.exports=function(t,n){if(n||(n=16),void 0===t&&(t=128),t<=0)return"0";for(var i=Math.log(Math.pow(2,t))/Math.log(n),r=2;i===1/0;r*=2)i=Math.log(Math.pow(2,t/r))/Math.log(n)*r;var o=i-Math.floor(i),a="";for(r=0;r<Math.floor(i);r++){a=Math.floor(Math.random()*n).toString(n)+a}if(o){var s=Math.pow(n,o);a=Math.floor(Math.random()*s).toString(n)+a}var l=parseInt(a,n);return l!==1/0&&l>=Math.pow(2,t)?e(t,n):a};e.rack=function(t,n,i){var r=function(r){var a=0;do{if(a++>10){if(!i)throw new Error("too many ID collisions, use more bits");t+=i}var s=e(t,n)}while(Object.hasOwnProperty.call(o,s));return o[s]=r,s},o=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=n||16,r}}));function Xl(t){if(!(this instanceof Xl))return new Xl(t);t=t||[128,36,1],this._seed=t.length?Yl.rack(t[0],t[1],t[2]):t}Xl.prototype.next=function(t){return this._seed(t||!0)},Xl.prototype.nextPrefixed=function(t,e){var n;do{n=t+this.next(!0)}while(this.assigned(n));return this.claim(n,e),n},Xl.prototype.claim=function(t,e){this._seed.set(t,e||!0)},Xl.prototype.assigned=function(t){return this._seed.get(t)||!1},Xl.prototype.unclaim=function(t){delete this._seed.hats[t]},Xl.prototype.clear=function(){var t,e=this._seed.hats;for(t in e)this.unclaim(t)};var $l=new Xl,Jl=10,Zl=3,Ql=.95,tc=.35;function ec(t,e,n,i,r,o,a){Ma.call(this,e,a);var s=t&&t.defaultFillColor,l=t&&t.defaultStrokeColor,c=$l.next(),u={},h=n.computeStyle;function p(t,e){var n=mo({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},e.attrs),i=e.ref||{x:0,y:0},o=e.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var a=ia("marker");Ko(e.element,n),zo(a,e.element),Ko(a,{id:t,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*o,markerHeight:20*o,orient:"auto"});var s=No("defs",r._svg);s||(s=ia("defs"),zo(r._svg,s)),zo(s,a),u[t]=a}function f(t){return t.replace(/[()\s,#]+/g,"_")}function d(t,e,n){var i=t+"-"+f(e)+"-"+f(n)+"-"+c;return u[i]||function(t,e,n,i){if("sequenceflow-end"===e){var r=ia("path");Ko(r,{d:"M 1 5 L 11 10 L 1 15 Z"}),p(t,{element:r,ref:{x:11,y:10},scale:.5,attrs:{fill:i,stroke:i}})}if("messageflow-start"===e){var o=ia("circle");Ko(o,{cx:6,cy:6,r:3.5}),p(t,{element:o,attrs:{fill:n,stroke:i},ref:{x:6,y:6}})}if("messageflow-end"===e){var a=ia("path");Ko(a,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),p(t,{element:a,attrs:{fill:n,stroke:i,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===e){var s=ia("path");Ko(s,{d:"M 11 5 L 1 10 L 11 15"}),p(t,{element:s,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===e){var l=ia("path");Ko(l,{d:"M 1 5 L 11 10 L 1 15"}),p(t,{element:l,attrs:{fill:"none",stroke:i,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===e){var c=ia("path");Ko(c,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),p(t,{element:c,attrs:{fill:n,stroke:i},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===e){var u=ia("path");Ko(u,{d:"M 6 4 L 10 16"}),p(t,{element:u,attrs:{stroke:i},ref:{x:0,y:10},scale:.5})}}(i,t,e,n),"url(#"+i+")"}function y(t,e,n,i,r){Zr(i)&&(r=i,i=0),i=i||0,"none"===(r=h(r,{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete r.fillOpacity;var o=e/2,a=n/2,s=ia("circle");return Ko(s,{cx:o,cy:a,r:Math.round((e+n)/4-i)}),Ko(s,r),zo(t,s),s}function m(t,e,n,i,r,o){Zr(r)&&(o=r,r=0),r=r||0,o=h(o,{stroke:"black",strokeWidth:2,fill:"white"});var a=ia("rect");return Ko(a,{x:r,y:r,width:e-2*r,height:n-2*r,rx:i,ry:i}),Ko(a,o),zo(t,a),a}function v(t,e,n){var i=Da(e,n=h(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}));return zo(t,i),i}function g(t,e,n){n=h(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=ia("path");return Ko(i,{d:e}),Ko(i,n),zo(t,i),i}function b(t,e,n,i){return g(e,n,mo({"data-marker":t},i))}function _(t){return function(e,n){return O[t](e,n)}}function w(t){return O[t]}function x(t,e){var n=Hl(t),i=function(t){return"bpmn:IntermediateThrowEvent"===t.$type||"bpmn:EndEvent"===t.$type}(n);return n.eventDefinitions&&n.eventDefinitions.length>1?n.parallelMultiple?w("bpmn:ParallelMultipleEventDefinition")(e,t,i):w("bpmn:MultipleEventDefinition")(e,t,i):Ul(n,"bpmn:MessageEventDefinition")?w("bpmn:MessageEventDefinition")(e,t,i):Ul(n,"bpmn:TimerEventDefinition")?w("bpmn:TimerEventDefinition")(e,t,i):Ul(n,"bpmn:ConditionalEventDefinition")?w("bpmn:ConditionalEventDefinition")(e,t):Ul(n,"bpmn:SignalEventDefinition")?w("bpmn:SignalEventDefinition")(e,t,i):Ul(n,"bpmn:EscalationEventDefinition")?w("bpmn:EscalationEventDefinition")(e,t,i):Ul(n,"bpmn:LinkEventDefinition")?w("bpmn:LinkEventDefinition")(e,t,i):Ul(n,"bpmn:ErrorEventDefinition")?w("bpmn:ErrorEventDefinition")(e,t,i):Ul(n,"bpmn:CancelEventDefinition")?w("bpmn:CancelEventDefinition")(e,t,i):Ul(n,"bpmn:CompensateEventDefinition")?w("bpmn:CompensateEventDefinition")(e,t,i):Ul(n,"bpmn:TerminateEventDefinition")?w("bpmn:TerminateEventDefinition")(e,t,i):null}function S(t,e,n){n=mo({size:{width:100}},n);var i=o.createText(e||"",n);return Jo(i).add("djs-label"),zo(t,i),i}function k(t,e,n){return S(t,Hl(e).name,{box:e,align:n,padding:5,style:{fill:ql(e,l)}})}function C(t,e,n){!function(t,e,n,i,r){var o=aa();o.setTranslate(e,n);var a=aa();a.setRotate(i,0,0);var s=aa();s.setScale(r||1,r||1),ya(t,[o,a,s])}(S(t,e,{box:{height:30,width:n.height},align:"center-middle",style:{fill:ql(n,l)}}),0,-(-1*n.height),270)}function E(t){for(var e=t.waypoints,n="m  "+e[0].x+","+e[0].y,i=1;i<e.length;i++)n+="L"+e[i].x+","+e[i].y+" ";return n}var O=this.handlers={"bpmn:Event":function(t,e,n){return"fillOpacity"in n||(n.fillOpacity=Ql),y(t,e.width,e.height,n)},"bpmn:StartEvent":function(t,e){var n={fill:Kl(e,s),stroke:ql(e,l)};Hl(e).isInterrupting||(n={strokeDasharray:"6",strokeLinecap:"round",fill:Kl(e,s),stroke:ql(e,l)});var i=w("bpmn:Event")(t,e,n);return x(e,t),i},"bpmn:MessageEventDefinition":function(t,e,n){return g(t,i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:e.width,containerHeight:e.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:n?ql(e,l):Kl(e,s),stroke:n?Kl(e,s):ql(e,l)})},"bpmn:TimerEventDefinition":function(t,e){var n=y(t,e.width,e.height,.2*e.height,{strokeWidth:2,fill:Kl(e,s),stroke:ql(e,l)});g(t,i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:ql(e,l)});for(var r=0;r<12;r++){var o=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.5}}),a=e.width/2;g(t,o,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*r+","+e.height/2+","+a+")",stroke:ql(e,l)})}return n},"bpmn:EscalationEventDefinition":function(t,e,n){return g(t,i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?ql(e,l):"none",stroke:ql(e,l)})},"bpmn:ConditionalEventDefinition":function(t,e){return g(t,i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:ql(e,l)})},"bpmn:LinkEventDefinition":function(t,e,n){return g(t,i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:n?ql(e,l):"none",stroke:ql(e,l)})},"bpmn:ErrorEventDefinition":function(t,e,n){return g(t,i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:e.width,containerHeight:e.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:n?ql(e,l):"none",stroke:ql(e,l)})},"bpmn:CancelEventDefinition":function(t,e,n){var r,o,a,s=g(t,i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:n?ql(e,l):"none",stroke:ql(e,l)});return r=s,o=45,(a=aa()).setRotate(o,0,0),ya(r,a),s},"bpmn:CompensateEventDefinition":function(t,e,n){return g(t,i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:n?ql(e,l):"none",stroke:ql(e,l)})},"bpmn:SignalEventDefinition":function(t,e,n){return g(t,i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?ql(e,l):"none",stroke:ql(e,l)})},"bpmn:MultipleEventDefinition":function(t,e,n){return g(t,i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:e.width,containerHeight:e.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:n?ql(e,l):"none"})},"bpmn:ParallelMultipleEventDefinition":function(t,e){return g(t,i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:e.width,containerHeight:e.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:ql(e,l),stroke:ql(e,l)})},"bpmn:EndEvent":function(t,e){var n=w("bpmn:Event")(t,e,{strokeWidth:4,fill:Kl(e,s),stroke:ql(e,l)});return x(e,t),n},"bpmn:TerminateEventDefinition":function(t,e){return y(t,e.width,e.height,8,{strokeWidth:4,fill:ql(e,l),stroke:ql(e,l)})},"bpmn:IntermediateEvent":function(t,e){var n=w("bpmn:Event")(t,e,{strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l)});return y(t,e.width,e.height,Zl,{strokeWidth:1,fill:Kl(e,"none"),stroke:ql(e,l)}),x(e,t),n},"bpmn:IntermediateCatchEvent":_("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":_("bpmn:IntermediateEvent"),"bpmn:Activity":function(t,e,n){return"fillOpacity"in(n=n||{})||(n.fillOpacity=Ql),m(t,e.width,e.height,Jl,n)},"bpmn:Task":function(t,e){var n={fill:Kl(e,s),stroke:ql(e,l)},i=w("bpmn:Activity")(t,e,n);return k(t,e,"center-middle"),P(t,e),i},"bpmn:ServiceTask":function(t,e){var n=w("bpmn:Task")(t,e);return g(t,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l)}),g(t,i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:Kl(e,s)}),g(t,i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l)}),n},"bpmn:UserTask":function(t,e){var n=w("bpmn:Task")(t,e);return g(t,i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Kl(e,s),stroke:ql(e,l)}),g(t,i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Kl(e,s),stroke:ql(e,l)}),g(t,i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:ql(e,l),stroke:ql(e,l)}),n},"bpmn:ManualTask":function(t,e){var n=w("bpmn:Task")(t,e);return g(t,i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:Kl(e,s),stroke:ql(e,l)}),n},"bpmn:SendTask":function(t,e){var n=w("bpmn:Task")(t,e);return g(t,i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:ql(e,l),stroke:Kl(e,s)}),n},"bpmn:ReceiveTask":function(t,e){var n,r=Hl(e),o=w("bpmn:Task")(t,e);return r.instantiate?(y(t,28,28,4.4,{strokeWidth:1}),n=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):n=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),g(t,n,{strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l)}),o},"bpmn:ScriptTask":function(t,e){var n=w("bpmn:Task")(t,e);return g(t,i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:ql(e,l)}),n},"bpmn:BusinessRuleTask":function(t,e){var n=w("bpmn:Task")(t,e);return Ko(g(t,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:Kl(e,"#aaaaaa"),stroke:ql(e,l)}),Ko(g(t,i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:ql(e,l)}),n},"bpmn:SubProcess":function(t,e,n){n=mo({fill:Kl(e,s),stroke:ql(e,l)},n);var i=w("bpmn:Activity")(t,e,n),r=Vl(e);return function(t){return t&&!!Bl(t).triggeredByEvent}(e)&&Ko(i,{strokeDasharray:"1,2"}),k(t,e,r?"center-top":"center-middle"),r?P(t,e):P(t,e,["SubProcessMarker"]),i},"bpmn:AdHocSubProcess":function(t,e){return w("bpmn:SubProcess")(t,e)},"bpmn:Transaction":function(t,e){var i=w("bpmn:SubProcess")(t,e),r=n.style(["no-fill","no-events"],{stroke:ql(e,l)});return m(t,e.width,e.height,Jl-2,Zl,r),i},"bpmn:CallActivity":function(t,e){return w("bpmn:SubProcess")(t,e,{strokeWidth:5})},"bpmn:Participant":function(t,e){var n={fillOpacity:Ql,fill:Kl(e,s),stroke:ql(e,l)},i=w("bpmn:Lane")(t,e,n);Vl(e)?(v(t,[{x:30,y:0},{x:30,y:e.height}],{stroke:ql(e,l)}),C(t,Hl(e).name,e)):S(t,Hl(e).name,{box:e,align:"center-middle",style:{fill:ql(e,l)}});return!!Hl(e).participantMultiplicity&&w("ParticipantMultiplicityMarker")(t,e),i},"bpmn:Lane":function(t,e,n){var i=m(t,e.width,e.height,0,mo({fill:Kl(e,s),fillOpacity:tc,stroke:ql(e,l)},n)),r=Hl(e);"bpmn:Lane"===r.$type&&C(t,r.name,e);return i},"bpmn:InclusiveGateway":function(t,e){var n=w("bpmn:Gateway")(t,e);return y(t,e.width,e.height,.24*e.height,{strokeWidth:2.5,fill:Kl(e,s),stroke:ql(e,l)}),n},"bpmn:ExclusiveGateway":function(t,e){var n=w("bpmn:Gateway")(t,e),r=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:e.width,containerHeight:e.height,position:{mx:.32,my:.3}});return Wl(e).isMarkerVisible&&g(t,r,{strokeWidth:1,fill:ql(e,l),stroke:ql(e,l)}),n},"bpmn:ComplexGateway":function(t,e){var n=w("bpmn:Gateway")(t,e);return g(t,i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:e.width,containerHeight:e.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:ql(e,l),stroke:ql(e,l)}),n},"bpmn:ParallelGateway":function(t,e){var n=w("bpmn:Gateway")(t,e);return g(t,i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:e.width,containerHeight:e.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:ql(e,l),stroke:ql(e,l)}),n},"bpmn:EventBasedGateway":function(t,e){var n=Hl(e),r=w("bpmn:Gateway")(t,e);y(t,e.width,e.height,.2*e.height,{strokeWidth:1,fill:"none",stroke:ql(e,l)});var o=n.eventGatewayType,a=!!n.instantiate;if("Parallel"===o){var s=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:e.width,containerHeight:e.height,position:{mx:.474,my:.296}});Ko(g(t,s),{strokeWidth:1,fill:"none"})}else if("Exclusive"===o){if(!a)Ko(y(t,e.width,e.height,.26*e.height),{strokeWidth:1,fill:"none",stroke:ql(e,l)});!function(){var n=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:e.width,containerHeight:e.height,position:{mx:.36,my:.44}}),r={strokeWidth:2,fill:Kl(e,"none"),stroke:ql(e,l)};g(t,n,r)}()}return r},"bpmn:Gateway":function(t,e){var n={fill:Kl(e,s),fillOpacity:Ql,stroke:ql(e,l)};return function(t,e,n,i){var r=e/2,o=n/2,a=[{x:r,y:0},{x:e,y:o},{x:r,y:n},{x:0,y:o}].map((function(t){return t.x+","+t.y})).join(" ");i=h(i,{stroke:"black",strokeWidth:2,fill:"white"});var s=ia("polygon");return Ko(s,{points:a}),Ko(s,i),zo(t,s),s}(t,e.width,e.height,n)},"bpmn:SequenceFlow":function(t,e){var n,i=E(e),r=Kl(e,s),o=ql(e,l),a=g(t,i,{strokeLinejoin:"round",markerEnd:d("sequenceflow-end",r,o),stroke:ql(e,l)}),c=Hl(e);return e.source&&(n=e.source.businessObject,c.conditionExpression&&n.$instanceOf("bpmn:Activity")&&Ko(a,{markerStart:d("conditional-flow-marker",r,o)}),n.default&&(n.$instanceOf("bpmn:Gateway")||n.$instanceOf("bpmn:Activity"))&&n.default===c&&Ko(a,{markerStart:d("conditional-default-flow-marker",r,o)})),a},"bpmn:Association":function(t,e,n){var i=Hl(e),r=Kl(e,s),o=ql(e,l);return n=mo({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:ql(e,l)},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=d("association-end",r,o)),"Both"===i.associationDirection&&(n.markerStart=d("association-start",r,o)),v(t,e.waypoints,n)},"bpmn:DataInputAssociation":function(t,e){var n=Kl(e,s),i=ql(e,l);return w("bpmn:Association")(t,e,{markerEnd:d("association-end",n,i)})},"bpmn:DataOutputAssociation":function(t,e){var n=Kl(e,s),i=ql(e,l);return w("bpmn:Association")(t,e,{markerEnd:d("association-end",n,i)})},"bpmn:MessageFlow":function(t,e){var n=Hl(e),r=Wl(e),o=Kl(e,s),a=ql(e,l),c=g(t,E(e),{markerEnd:d("messageflow-end",o,a),markerStart:d("messageflow-start",o,a),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:ql(e,l)});if(n.messageRef){var u=c.getPointAtLength(c.getTotalLength()/2),h=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:u.x,y:u.y}}),p={strokeWidth:1};"initiating"===r.messageVisibleKind?(p.fill="white",p.stroke="black"):(p.fill="#888",p.stroke="white"),g(t,h,p)}return c},"bpmn:DataObject":function(t,e){var n=g(t,i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.474,my:.296}}),{fill:Kl(e,s),fillOpacity:Ql,stroke:ql(e,l)});return function(t){var e=t.dataObjectRef;return t.isCollection||e&&e.isCollection}(Hl(e))&&function(t,e){var n=(e.height-16)/e.height,r=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.451,my:n}});g(t,r,{strokeWidth:2})}(t,e),n},"bpmn:DataObjectReference":_("bpmn:DataObject"),"bpmn:DataInput":function(t,e){var n=i.getRawPath("DATA_ARROW"),r=w("bpmn:DataObject")(t,e);return g(t,n,{strokeWidth:1}),r},"bpmn:DataOutput":function(t,e){var n=i.getRawPath("DATA_ARROW"),r=w("bpmn:DataObject")(t,e);return g(t,n,{strokeWidth:1,fill:"black"}),r},"bpmn:DataStoreReference":function(t,e){return g(t,i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:Kl(e,s),fillOpacity:Ql,stroke:ql(e,l)})},"bpmn:BoundaryEvent":function(t,e){var n=Hl(e).cancelActivity,i={strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l)};n||(i.strokeDasharray="6",i.strokeLinecap="round");var r=mo({},i,{fillOpacity:1}),o=mo({},i,{fill:"none"}),a=w("bpmn:Event")(t,e,r);return y(t,e.width,e.height,Zl,o),x(e,t),a},"bpmn:Group":function(t,e){return m(t,e.width,e.height,Jl,{strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(t,e){return function(t,e){var n={width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y};return S(t,zl(e),{box:n,fitBox:!0,style:mo({},o.getExternalStyle(),{fill:ql(e,l)})})}(t,e)},"bpmn:TextAnnotation":function(t,e){var n=m(t,e.width,e.height,0,0,{fill:"none",stroke:"none"});return g(t,i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:0,my:0}}),{stroke:ql(e,l)}),S(t,Hl(e).text||"",{box:e,align:"left-top",padding:5,style:{fill:ql(e,l)}}),n},ParticipantMultiplicityMarker:function(t,e){b("participant-multiplicity",t,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:e.width/2/e.width,my:(e.height-15)/e.height}}),{strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l)})},SubProcessMarker:function(t,e){hs(m(t,14,14,0,{strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l)}),e.width/2-7.5,e.height-20),b("sub-process",t,i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2-7.5)/e.width,my:(e.height-20)/e.height}}),{fill:Kl(e,s),stroke:ql(e,l)})},ParallelMarker:function(t,e,n){b("parallel",t,i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+n.parallel)/e.width,my:(e.height-20)/e.height}}),{fill:Kl(e,s),stroke:ql(e,l)})},SequentialMarker:function(t,e,n){b("sequential",t,i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+n.seq)/e.width,my:(e.height-19)/e.height}}),{fill:Kl(e,s),stroke:ql(e,l)})},CompensationMarker:function(t,e,n){b("compensation",t,i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+n.compensation)/e.width,my:(e.height-13)/e.height}}),{strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l)})},LoopMarker:function(t,e,n){b("loop",t,i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+n.loop)/e.width,my:(e.height-7)/e.height}}),{strokeWidth:1,fill:Kl(e,s),stroke:ql(e,l),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(t,e,n){b("adhoc",t,i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+n.adhoc)/e.width,my:(e.height-15)/e.height}}),{strokeWidth:1,fill:ql(e,l),stroke:ql(e,l)})}};function P(t,e,n){var i,r=Hl(e),o=n&&-1!==n.indexOf("SubProcessMarker");i=o?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},oo(n,(function(n){w(n)(t,e,i)})),r.isForCompensation&&w("CompensationMarker")(t,e,i),"bpmn:AdHocSubProcess"===r.$type&&w("AdhocMarker")(t,e,i);var a=r.loopCharacteristics,s=a&&a.isSequential;a&&(void 0===s&&w("LoopMarker")(t,e,i),!1===s&&w("ParallelMarker")(t,e,i),!0===s&&w("SequentialMarker")(t,e,i))}this._drawPath=g}Aa()(ec,Ma),ec.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],ec.prototype.canRender=function(t){return Nl(t,"bpmn:BaseElement")},ec.prototype.drawShape=function(t,e){var n=e.type;return(0,this.handlers[n])(t,e)},ec.prototype.drawConnection=function(t,e){var n=e.type;return(0,this.handlers[n])(t,e)},ec.prototype.getShapePath=function(t){return Nl(t,"bpmn:Event")?(n=(e=t).x+e.width/2,i=e.y+e.height/2,r=e.width/2,ja([["M",n,i],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]])):Nl(t,"bpmn:Activity")?function(t,e){var n=t.x,i=t.y,r=t.width,o=t.height;return ja([["M",n+e,i],["l",r-2*e,0],["a",e,e,0,0,1,e,e],["l",0,o-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-r,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-o],["a",e,e,0,0,1,e,-e],["z"]])}(t,Jl):Nl(t,"bpmn:Gateway")?function(t){var e=t.width/2,n=t.height/2;return ja([["M",t.x+e,t.y],["l",e,n],["l",-e,n],["l",-e,-n],["z"]])}(t):function(t){var e=t.x,n=t.y,i=t.width;return ja([["M",e,n],["l",i,0],["l",0,t.height],["l",-i,0],["z"]])}(t);var e,n,i,r};var nc=0,ic={width:150,height:50};function rc(t,e){var n;e.textContent=t;try{var i,r=""===t;return e.textContent=r?"dummy":t,i={width:(n=e.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch(t){return{width:0,height:0}}}function oc(t,e,n){for(var i,r=t.shift(),o=r;;){if((i=rc(o,n)).width=o?i.width:0," "===o||""===o||i.width<Math.round(e)||o.length<2)return ac(t,o,r,i);o=sc(o,i.width,e)}}function ac(t,e,n,i){if(e.length<n.length){var r=n.slice(e.length).trim();t.unshift(r)}return{width:i.width,height:i.height,text:e}}function sc(t,e,n){var i=Math.max(t.length*(n/e),1),r=function(t,e){var n,i=t.split(/(\s|-)/g),r=[],o=0;if(i.length>1)for(;n=i.shift();){if(!(n.length+o<e)){"-"===n&&r.pop();break}r.push(n),o+=n.length}return r.join("")}(t,i);return r||(r=t.slice(0,Math.max(Math.round(i-1),1))),r}function lc(t){this._config=mo({},{size:ic,padding:nc,style:{},align:"center-top"},t||{})}lc.prototype.createText=function(t,e){return this.layoutText(t,e).element},lc.prototype.getDimensions=function(t,e){return this.layoutText(t,e).dimensions},lc.prototype.layoutText=function(t,e){var n=mo({},this._config.size,e.box),i=mo({},this._config.style,e.style),r=function(t){var e=t.split("-");return{horizontal:e[0]||"center",vertical:e[1]||"top"}}(e.align||this._config.align),o=function(t){return Zr(t)?mo({top:0,left:0,right:0,bottom:0},t):{top:t,left:t,right:t,bottom:t}}(void 0!==e.padding?e.padding:this._config.padding),a=e.fitBox||!1,s=function(t){if("fontSize"in t&&"lineHeight"in t)return t.lineHeight*parseInt(t.fontSize,10)}(i),l=t.split(/\r?\n/g),c=[],u=n.width-o.left-o.right,h=ia("text");for(Ko(h,{x:0,y:0}),Ko(h,i),zo(function(){var t=document.getElementById("helper-svg");return t||(Ko(t=ia("svg"),{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(t)),t}(),h);l.length;)c.push(oc(l,u,h));"middle"===r.vertical&&(o.top=o.bottom=0);var p=ao(c,(function(t,e,n){return t+(s||e.height)}),0)+o.top+o.bottom,f=ao(c,(function(t,e,n){return e.width>t?e.width:t}),0),d=o.top;"middle"===r.vertical&&(d+=(n.height-p)/2),d-=(s||c[0].height)/4;var y=ia("text");return Ko(y,i),oo(c,(function(t){var e;switch(d+=s||t.height,r.horizontal){case"left":e=o.left;break;case"right":e=(a?f:u)-o.right-t.width;break;default:e=Math.max(((a?f:u)-t.width)/2+o.left,0)}var n=ia("tspan");Ko(n,{x:e,y:d}),n.textContent=t.text,zo(y,n)})),Qo(h),{dimensions:{width:f,height:p},element:y}};var cc=12,uc=1.2,hc=30;function pc(t){var e=mo({fontFamily:"Arial, sans-serif",fontSize:cc,fontWeight:"normal",lineHeight:uc},t&&t.defaultStyle||{}),n=parseInt(e.fontSize,10)-1,i=mo({},e,{fontSize:n},t&&t.externalStyle||{}),r=new lc({style:e});this.getExternalLabelBounds=function(t,e){var n=r.getDimensions(e,{box:{width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y},style:i});return{x:Math.round(t.x+t.width/2-n.width/2),y:Math.round(t.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(t,n){var i=r.getDimensions(n,{box:t,style:e,align:"left-top",padding:5});return{x:t.x,y:t.y,width:t.width,height:Math.max(hc,Math.round(i.height))}},this.createText=function(t,e){return r.createText(t,e||{})},this.getDefaultStyle=function(){return e},this.getExternalStyle=function(){return i}}pc.$inject=["config.textRenderer"];var fc=/\{([^}]+)\}/g,dc=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;var yc={__init__:["bpmnRenderer"],bpmnRenderer:["type",ec],textRenderer:["type",pc],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 ",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,e){var n,i,r=this.pathMap[t];e.abspos?(n=e.abspos.x,i=e.abspos.y):(n=e.containerWidth*e.position.mx,i=e.containerHeight*e.position.my);var o,a,s={};if(e.position){for(var l=e.containerHeight/r.height*e.yScaleFactor,c=e.containerWidth/r.width*e.xScaleFactor,u=0;u<r.heightElements.length;u++)s["y"+u]=r.heightElements[u]*l;for(var h=0;h<r.widthElements.length;h++)s["x"+h]=r.widthElements[h]*c}return o=r.d,a={mx:n,my:i,e:s},String(o).replace(fc,(function(t,e){return function(t,e,n){var i=n;return e.replace(dc,(function(t,e,n,r,o){e=e||r,i&&(e in i&&(i=i[e]),"function"==typeof i&&o&&(i=i()))})),i=(null==i||i==n?t:i)+""}(t,e,a)}))}}]};var mc={translate:["value",function(t,e){return e=e||{},t.replace(/{([^}]+)}/g,(function(t,n){return e[n]||"{"+n+"}"}))}]},vc={width:90,height:20},gc=15;function bc(t){var e=t.length/2-1,n=t[Math.floor(e)],i=t[Math.ceil(e+.01)],r=function(t){var e=t.length/2-1,n=t[Math.floor(e)],i=t[Math.ceil(e+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}(t),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=gc:a+=gc,{x:a,y:s}}function _c(t,e){var n,i,r,o=t.di.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(vc.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=function(t){return t.waypoints?bc(t.waypoints):Nl(t,"bpmn:Group")?{x:t.x+t.width/2,y:t.y+vc.height/2}:{x:t.x+t.width/2,y:t.y+t.height+vc.height/2}}(e),i=vc),mo({x:n.x-i.width/2,y:n.y-i.height/2},i)}n(22);function wc(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function xc(t){return wc({x:t.x+(t.width||0)/2,y:t.y+(t.height||0)/2})}function Sc(t,e){return mo({id:t.id,type:t.$type,businessObject:t},e)}function kc(t,e,n){var i=t.di.waypoint;return!i||i.length<2?[xc(e),xc(n)]:i.map((function(t){return{x:t.x,y:t.y}}))}function Cc(t,e,n,i){return new Error(t("element {element} referenced by {referenced}#{property} not yet drawn",{element:Dl(n),referenced:Dl(e),property:i}))}function Ec(t,e,n,i,r,o){this._eventBus=t,this._canvas=e,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=o}Ec.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],Ec.prototype.add=function(t,e){var n,i,r,o,a,s,l,c=t.di,u=this._translate;if(Nl(c,"bpmndi:BPMNPlane"))n=this._elementFactory.createRoot(Sc(t)),this._canvas.setRootElement(n);else if(Nl(c,"bpmndi:BPMNShape")){var h=!Vl(t);i=e&&(e.hidden||e.collapsed);var p=t.di.bounds;n=this._elementFactory.createShape(Sc(t,{collapsed:h,hidden:i,x:Math.round(p.x),y:Math.round(p.y),width:Math.round(p.width),height:Math.round(p.height)})),Nl(t,"bpmn:BoundaryEvent")&&this._attachBoundary(t,n),Nl(t,"bpmn:Lane")&&(r=0),Nl(t,"bpmn:DataStoreReference")&&(o=e,a=xc(p),s=a.x,l=a.y,s>=o.x&&s<=o.x+o.width&&l>=o.y&&l<=o.y+o.height||(e=this._canvas.getRootElement())),this._canvas.addShape(n,e,r)}else{if(!Nl(c,"bpmndi:BPMNEdge"))throw new Error(u("unknown di {di} for element {semantic}",{di:Dl(c),semantic:Dl(t)}));var f=this._getSource(t),d=this._getTarget(t);i=e&&(e.hidden||e.collapsed),n=this._elementFactory.createConnection(Sc(t,{hidden:i,source:f,target:d,waypoints:kc(t,f,d)})),Nl(t,"bpmn:DataAssociation")&&(e=null),Nl(t,"bpmn:SequenceFlow")&&(r=0),this._canvas.addConnection(n,e,r)}return function(t){return Nl(t,"bpmn:Event")||Nl(t,"bpmn:Gateway")||Nl(t,"bpmn:DataStoreReference")||Nl(t,"bpmn:DataObjectReference")||Nl(t,"bpmn:DataInput")||Nl(t,"bpmn:DataOutput")||Nl(t,"bpmn:SequenceFlow")||Nl(t,"bpmn:MessageFlow")||Nl(t,"bpmn:Group")}(t)&&zl(n)&&this.addLabel(t,n),this._eventBus.fire("bpmnElement.added",{element:n}),n},Ec.prototype._attachBoundary=function(t,e){var n=this._translate,i=t.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:Dl(t)}));var r=this._elementRegistry.get(i.id),o=r&&r.attachers;if(!r)throw Cc(n,t,i,"attachedToRef");e.host=r,o||(r.attachers=o=[]),-1===o.indexOf(e)&&o.push(e)},Ec.prototype.addLabel=function(t,e){var n,i,r;return n=_c(t,e),(i=zl(e))&&(n=this._textRenderer.getExternalLabelBounds(n,i)),r=this._elementFactory.createLabel(Sc(t,{id:t.id+"_label",labelTarget:e,type:"label",hidden:e.hidden||!zl(e),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(r,e.parent)},Ec.prototype._getEnd=function(t,e){var n,i,r=t.$type,o=this._translate;if(i=t[e+"Ref"],"source"===e&&"bpmn:DataInputAssociation"===r&&(i=i&&i[0]),("source"===e&&"bpmn:DataOutputAssociation"===r||"target"===e&&"bpmn:DataInputAssociation"===r)&&(i=t.$parent),n=i&&this._getElement(i))return n;throw i?Cc(o,t,i,e+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:Dl(t),side:e}))},Ec.prototype._getSource=function(t){return this._getEnd(t,"source")},Ec.prototype._getTarget=function(t){return this._getEnd(t,"target")},Ec.prototype._getElement=function(t){return this._elementRegistry.get(t.id)};var Oc={__depends__:[yc,{__depends__:[mc],bpmnImporter:["type",Ec]}]};function Pc(t){return t.originalEvent||t.srcEvent}function Ac(t){return!(Pc(t)||t).button}function Tc(t){var e=Pc(t)||t;return!!Ac(t)&&(/mac/i.test(navigator.platform)?e.metaKey:e.ctrlKey)}function Mc(t){return!0}var jc=500;function Rc(t,e,n){var i=this;function r(n,i,r){var o,a;(function(t,e){return!(l[t]||Ac)(e)})(n,i)||(r?a=e.getGraphics(r):(o=i.delegateTarget||i.target)&&(a=o,r=e.get(a)),a&&r&&!1===t.fire(n,{element:r,gfx:a,originalEvent:i})&&(i.stopPropagation(),i.preventDefault()))}var o={};function a(t){return o[t]}var s={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":Mc};var c="svg, .djs-element";function u(t,e,n,i){var a=o[n]=function(t){r(n,t)};i&&(l[n]=i),a.$delegate=Ro.bind(t,c,e,a)}function h(t,e,n){var i=a(n);i&&Ro.unbind(t,e,i.$delegate)}t.on("canvas.destroy",(function(t){var e;e=t.svg,oo(s,(function(t,n){h(e,n,t)}))})),t.on("canvas.init",(function(t){var e;e=t.svg,oo(s,(function(t,n){u(e,n,t)}))})),t.on(["shape.added","connection.added"],(function(e){var n=e.element,i=e.gfx;t.fire("interactionEvents.createHit",{element:n,gfx:i})})),t.on(["shape.changed","connection.changed"],jc,(function(e){var n=e.element,i=e.gfx;t.fire("interactionEvents.updateHit",{element:n,gfx:i})})),t.on("interactionEvents.createHit",jc,(function(t){var e=t.element,n=t.gfx;i.createDefaultHit(e,n)})),t.on("interactionEvents.updateHit",(function(t){var e=t.element,n=t.gfx;i.updateDefaultHit(e,n)}));var p=y("djs-hit djs-hit-stroke"),f=y("djs-hit djs-hit-click-stroke"),d={all:y("djs-hit djs-hit-all"),"click-stroke":f,stroke:p};function y(t,e){return e=mo({stroke:"white",strokeWidth:15},e||{}),n.cls(t,["no-fill","no-border"],e)}function m(t,e){var n=d[e];if(!n)throw new Error("invalid hit type <"+e+">");return Ko(t,n),t}function v(t,e){zo(t,e)}this.removeHits=function(t){var e;oo((e=".djs-hit",(t||document).querySelectorAll(e)),Qo)},this.createDefaultHit=function(t,e){var n,i=t.waypoints,r=t.isFrame;return i?this.createWaypointsHit(e,i):(n=r?"stroke":"all",this.createBoxHit(e,n,{width:t.width,height:t.height}))},this.createWaypointsHit=function(t,e){var n=Da(e);return m(n,"stroke"),v(t,n),n},this.createBoxHit=function(t,e,n){n=mo({x:0,y:0},n);var i=ia("rect");return m(i,e),Ko(i,n),v(t,i),i},this.updateDefaultHit=function(t,e){var n=No(".djs-hit",e);if(n)return t.waypoints?function(t,e){Ko(t,{points:Ra(e)})}(n,t.waypoints):Ko(n,{width:t.width,height:t.height}),n},this.fire=r,this.triggerMouseEvent=function(t,e,n){var i=s[t];if(!i)throw new Error("unmapped DOM event name <"+t+">");return r(i,e,n)},this.mouseHandler=a,this.registerEvent=u,this.unregisterEvent=h}Rc.$inject=["eventBus","elementRegistry","styles"];var Dc={__init__:["interactionEvents"],interactionEvents:["type",Rc]},Fc=500;function Ic(t,e,n){this.offset=6;var i=e.cls("djs-outline",["no-fill"]),r=this;function o(t,e){var n=ia("rect");return Ko(n,mo({x:10,y:10,width:100,height:100},i)),zo(t,n),n}t.on(["shape.added","shape.changed"],Fc,(function(t){var e=t.element,n=t.gfx,i=No(".djs-outline",n);i||(i=o(n)),r.updateShapeOutline(i,e)})),t.on(["connection.added","connection.changed"],(function(t){var e=t.element,n=t.gfx,i=No(".djs-outline",n);i||(i=o(n)),r.updateConnectionOutline(i,e)}))}Ic.prototype.updateShapeOutline=function(t,e){Ko(t,{x:-this.offset,y:-this.offset,width:e.width+2*this.offset,height:e.height+2*this.offset})},Ic.prototype.updateConnectionOutline=function(t,e){var n=Fa(e);Ko(t,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Ic.$inject=["eventBus","styles","elementRegistry"];var Lc={__init__:["outline"],outline:["type",Ic]};function Nc(t){this._eventBus=t,this._selectedElements=[];var e=this;t.on(["shape.remove","connection.remove"],(function(t){var n=t.element;e.deselect(n)})),t.on(["diagram.clear"],(function(t){e.select(null)}))}Nc.$inject=["eventBus"],Nc.prototype.deselect=function(t){var e=this._selectedElements,n=e.indexOf(t);if(-1!==n){var i=e.slice();e.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:e})}},Nc.prototype.get=function(){return this._selectedElements},Nc.prototype.isSelected=function(t){return-1!==this._selectedElements.indexOf(t)},Nc.prototype.select=function(t,e){var n=this._selectedElements,i=n.slice();Jr(t)||(t=t?[t]:[]),e?oo(t,(function(t){-1===n.indexOf(t)&&n.push(t)})):this._selectedElements=n=t.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Bc="hover",Vc="selected";function Gc(t,e,n,i){function r(t,n){e.addMarker(t,n)}function o(t,n){e.removeMarker(t,n)}this._multiSelectionBox=null,t.on("element.hover",(function(t){r(t.element,Bc)})),t.on("element.out",(function(t){o(t.element,Bc)})),t.on("selection.changed",(function(t){var e=t.oldSelection,n=t.newSelection;oo(e,(function(t){-1===n.indexOf(t)&&o(t,Vc)})),oo(n,(function(t){-1===e.indexOf(t)&&r(t,Vc)}))}))}function zc(t,e,n,i){t.on("create.end",500,(function(t){var n=t.context,i=n.canExecute,r=n.elements,o=(n.hints||{}).autoSelect;if(i){if(!1===o)return;Jr(o)?e.select(o):e.select(r)}})),t.on("connect.end",500,(function(t){t.context.canExecute&&t.context.target&&e.select(t.context.target)})),t.on("shape.move.end",500,(function(t){var n=t.previousSelection||[],r=i.get(t.context.shape.id);io(n,(function(t){return r.id===t.id}))||e.select(r)})),t.on("element.click",(function(t){var i=t.element;i===n.getRootElement()&&(i=null);var r=e.isSelected(i),o=e.get().length>1,a=Tc(t);if(r&&o)return a?e.deselect(i):e.select(i);r?e.deselect(i):e.select(i,a)}))}Gc.$inject=["eventBus","canvas","selection","styles"],zc.$inject=["eventBus","selection","canvas","elementRegistry"];var Uc={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Dc,Lc],selection:["type",Nc],selectionVisuals:["type",Gc],selectionBehavior:["type",zc]};function Wc(t){this._counter=0,this._prefix=(t?t+"-":"")+Math.floor(1e9*Math.random())+"-"}Wc.prototype.next=function(){return this._prefix+ ++this._counter};var Hc=new Wc("ov");function Kc(t,e,n,i){var r,o;this._eventBus=e,this._canvas=n,this._elementRegistry=i,this._ids=Hc,this._overlayDefaults=mo({show:null,scale:!0},t&&t.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),o=Do('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />'),r.insertBefore(o,r.firstChild),o),this._init()}function qc(t,e,n){mo(t.style,{left:e+"px",top:n+"px"})}function Yc(t,e){t.style.display=!1===e?"none":""}function Xc(t,e){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach((function(n){t.style[n+"transform"]=e}))}Kc.$inject=["config.overlays","eventBus","canvas","elementRegistry"],Kc.prototype.get=function(t){if(eo(t)&&(t={id:t}),eo(t.element)&&(t.element=this._elementRegistry.get(t.element)),t.element){var e=this._getOverlayContainer(t.element,!0);return e?t.type?ro(e.overlays,co({type:t.type})):e.overlays.slice():[]}return t.type?ro(this._overlays,co({type:t.type})):t.id?this._overlays[t.id]:null},Kc.prototype.add=function(t,e,n){if(Zr(e)&&(n=e,e=null),t.id||(t=this._elementRegistry.get(t)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!t)throw new Error("invalid element specified");var i=this._ids.next();return n=mo({},this._overlayDefaults,n,{id:i,type:e,element:t,html:n.html}),this._addOverlay(n),i},Kc.prototype.remove=function(t){var e=this.get(t)||[];Jr(e)||(e=[e]);var n=this;oo(e,(function(t){var e=n._getOverlayContainer(t.element,!0);if(t&&(Bo(t.html),Bo(t.htmlContainer),delete t.htmlContainer,delete t.element,delete n._overlays[t.id]),e){var i=e.overlays.indexOf(t);-1!==i&&e.overlays.splice(i,1)}}))},Kc.prototype.show=function(){Yc(this._overlayRoot)},Kc.prototype.hide=function(){Yc(this._overlayRoot,!1)},Kc.prototype.clear=function(){this._overlays={},this._overlayContainers=[],So(this._overlayRoot)},Kc.prototype._updateOverlayContainer=function(t){var e=t.element,n=t.html,i=e.x,r=e.y;if(e.waypoints){var o=Fa(e);i=o.x,r=o.y}qc(n,i,r),function(t,e,n){2==arguments.length?t.getAttribute(e):null===n?t.removeAttribute(e):t.setAttribute(e,n)}(t.html,"data-container-id",e.id)},Kc.prototype._updateOverlay=function(t){var e,n,i=t.position,r=t.htmlContainer,o=t.element,a=i.left,s=i.top;void 0!==i.right&&(e=o.waypoints?Fa(o).width:o.width,a=-1*i.right+e);void 0!==i.bottom&&(n=o.waypoints?Fa(o).height:o.height,s=-1*i.bottom+n);qc(r,a||0,s||0)},Kc.prototype._createOverlayContainer=function(t){var e=Do('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(e);var n={html:e,element:t,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},Kc.prototype._updateRoot=function(t){var e=t.scale||1,n="matrix("+[e,0,0,e,-1*t.x*e,-1*t.y*e].join(",")+")";Xc(this._overlayRoot,n)},Kc.prototype._getOverlayContainer=function(t,e){var n=io(this._overlayContainers,(function(e){return e.element===t}));return n||e?n:this._createOverlayContainer(t)},Kc.prototype._addOverlay=function(t){var e,n,i=t.id,r=t.element,o=t.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),eo(o)&&(o=Do(o)),n=this._getOverlayContainer(r),(e=Do('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">')).appendChild(o),t.type&&wo(e).add("djs-overlay-"+t.type),t.htmlContainer=e,n.overlays.push(t),n.html.appendChild(e),this._overlays[i]=t,this._updateOverlay(t),this._updateOverlayVisibilty(t,this._canvas.viewbox())},Kc.prototype._updateOverlayVisibilty=function(t,e){var n=t.show,i=n&&n.minZoom,r=n&&n.maxZoom,o=t.htmlContainer,a=!0;n&&(($r(i)&&i>e.scale||$r(r)&&r<e.scale)&&(a=!1),Yc(o,a)),this._updateOverlayScale(t,e)},Kc.prototype._updateOverlayScale=function(t,e){var n,i,r,o=t.scale,a=t.htmlContainer,s="";!0!==o&&(!1===o?(n=1,i=1):(n=o.min,i=o.max),$r(n)&&e.scale<n&&(r=(1/e.scale||1)*n),$r(i)&&e.scale>i&&(r=(1/e.scale||1)*i)),$r(r)&&(s="scale("+r+","+r+")"),Xc(a,s)},Kc.prototype._updateOverlaysVisibilty=function(t){var e=this;oo(this._overlays,(function(n){e._updateOverlayVisibilty(n,t)}))},Kc.prototype._init=function(){var t=this._eventBus,e=this;t.on("canvas.viewbox.changing",(function(t){e.hide()})),t.on("canvas.viewbox.changed",(function(t){var n;n=t.viewbox,e._updateRoot(n),e._updateOverlaysVisibilty(n),e.show()})),t.on(["shape.remove","connection.remove"],(function(t){var n=t.element;oo(e.get({element:n}),(function(t){e.remove(t.id)}));var i=e._getOverlayContainer(n);if(i){Bo(i.html);var r=e._overlayContainers.indexOf(i);-1!==r&&e._overlayContainers.splice(r,1)}})),t.on("element.changed",500,(function(t){var n=t.element,i=e._getOverlayContainer(n,!0);i&&(oo(i.overlays,(function(t){e._updateOverlay(t)})),e._updateOverlayContainer(i))})),t.on("element.marker.update",(function(t){var n=e._getOverlayContainer(t.element,!0);n&&wo(n.html)[t.add?"add":"remove"](t.marker)})),t.on("diagram.clear",this.clear,this)};var $c={__init__:["overlays"],overlays:["type",Kc]},Jc='<img width="52" height="52" src="'+("data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960"><path fill="#fff" d="M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z"/><path fill="#52b415" d="M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z"/></svg>'))+'" />';function Zc(t){return t.join(";")}var Qc,tu='<div class="bjs-powered-by-lightbox" style="'+Zc(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+Zc(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"])+'"></div><div class="notice" style="'+Zc(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"])+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px">'+Jc+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';var eu={width:"100%",height:"100%",position:"relative"};function nu(t){return t+(Qr(t)?"px":"")}function iu(t){var e,n;t=mo({},eu,t),this._moddle=this._createModdle(t),this._container=this._createContainer(t),e=this._container,n=Do('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100">'+Jc+"</a>"),e.appendChild(n),Mo.bind(n,"click",(function(t){Qc||(Qc=Do(tu),Ro.bind(Qc,".backdrop","click",(function(t){document.body.removeChild(Qc)}))),document.body.appendChild(Qc),t.preventDefault()})),this._init(this._container,this._moddle,t)}function ru(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ou(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function au(){var t=this.data,e=this.verticalScrollbar,n=this.horizontalScrollbar,i=t.getSelectedRect(),r=i.l,o=i.t,a=i.left,s=i.top,l=i.width,c=i.height,u=this.getTableOffset();if(Math.abs(a)+l>u.width)n.move({left:r+l-u.width});else{var h=t.freezeTotalWidth();a<h&&n.move({left:r-1-h})}if(Math.abs(s)+c>u.height)e.move({top:o+c-u.height-1});else{var p=t.freezeTotalHeight();s<p&&e.move({top:o-1-p})}}function su(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(-1!==e||-1!==n){var o=this.table,a=this.selector,s=this.toolbar;t?a.setEnd(e,n,r):a.set(e,n,i),s.reset(),o.render()}}function lu(t,e){var n=this.selector,i=this.data,r=i.rows,o=i.cols,a=ou(n.indexes,2),s=a[0],l=a[1],c=n.range,u=c.eri,h=c.eci;if(t){var p=ou(n.moveIndexes,2);s=p[0],l=p[1]}"left"===e?l>0&&(l-=1):"right"===e?(h!==l&&(l=h),l<o.len-1&&(l+=1)):"up"===e?s>0&&(s-=1):"down"===e?(u!==s&&(s=u),s<r.len-1&&(s+=1)):"row-first"===e?l=0:"row-last"===e?l=o.len-1:"col-first"===e?s=0:"col-last"===e&&(s=r.len-1),t&&(n.moveIndexes=[s,l]),su.call(this,t,s,l),au.call(this)}function cu(t){if(0===t.buttons&&t.target.className!=="".concat(St,"-resizer-hover")){var e=t.offsetX,n=t.offsetY,i=this.rowResizer,r=this.colResizer,o=this.tableEl,a=this.data,s=a.rows,l=a.cols;if(e>l.indexWidth&&n>s.height)return i.hide(),void r.hide();var c=o.box(),u=a.getCellRectByXY(t.offsetX,t.offsetY);u.ri>=0&&-1===u.ci?(u.width=l.indexWidth,i.show(u,{width:c.width})):i.hide(),-1===u.ri&&u.ci>=0?(u.height=s.height,r.show(u,{height:c.height})):r.hide()}}function uu(t){var e=this.verticalScrollbar,n=this.data,i=e.scroll().top,r=t.deltaY,o=n.rows;if(t.detail&&(r=40*t.detail),r>0){var a=n.scroll.ri+1;a<o.len&&e.move({top:i+o.getHeight(a)-1})}else{var s=n.scroll.ri-1;s>=0&&e.move({top:0===s?0:i-o.getHeight(s)})}}function hu(t,e){var n=this.verticalScrollbar,i=this.horizontalScrollbar,r=n.scroll().top,o=i.scroll().left;"left"===t||"right"===t?i.move({left:o-e}):"up"!==t&&"down"!==t||n.move({top:r-e})}function pu(){var t=this.data,e=this.verticalScrollbar,n=this.getTableOffset().height;e.set(n,t.rows.totalHeight())}function fu(){var t=this.data,e=this.horizontalScrollbar,n=this.getTableOffset().width;t&&e.set(n,t.cols.totalWidth())}function du(){var t=this.selector,e=this.data,n=this.editor,i=ou(e.freeze,2),r=i[0],o=i[1];if(r>0||o>0){var a=e.freezeTotalWidth(),s=e.freezeTotalHeight();n.setFreezeLengths(a,s)}t.resetAreaOffset()}function yu(){this.table.render()}function mu(){var t=this.tableEl,e=this.overlayerEl,n=this.overlayerCEl,i=this.table,r=this.toolbar,o=this.selector,a=this.el,s=this.getTableOffset(),l=this.getRect();t.attr(l),e.offset(l),n.offset(s),a.css("width","".concat(l.width,"px")),pu.call(this),fu.call(this),du.call(this),i.render(),r.reset(),o.reset()}function vu(){var t=this.data,e=this.selector;t.clearClipboard(),e.hideClipboard()}function gu(){var t=this.data,e=this.selector;t.copy(),e.showClipboard()}function bu(){var t=this.data,e=this.selector;t.cut(),e.showClipboard()}function _u(t){this.data.paste(t,(function(t){return Kr("Tip",t)}))&&mu.call(this)}function wu(){this.data.autofilter(),mu.call(this)}function xu(){var t=this.toolbar;t.paintformatActive()&&(_u.call(this,"format"),vu.call(this),t.paintformatToggle())}function Su(t){var e=this,n=this.selector,i=this.data,r=this.table,o=this.sortFilter,a=t.offsetX,s=t.offsetY,l=t.target.className==="".concat(St,"-selector-corner"),c=i.getCellRectByXY(a,s),u=c.left,h=c.top,p=c.width,f=c.height,d=c.ri,y=c.ci,m=i.autoFilter;if(m.includes(d,y)&&u+p-20<a&&h+f-20<s){var v=m.items(y,(function(t,e){return i.rows.getCell(t,e)}));return o.set(y,v,m.getFilter(y),m.getSort(y)),void o.setOffset({left:u,top:h+f+2})}t.shiftKey||(l?n.showAutofill(d,y):su.call(this,!1,d,y),wt(window,(function(t){var r=i.getCellRectByXY(t.offsetX,t.offsetY);d=r.ri,y=r.ci,l?n.showAutofill(d,y):1!==t.buttons||t.shiftKey||su.call(e,!0,d,y,!0,!0)}),(function(){l&&i.autofill(n.arange,"all",(function(t){return Kr("Tip",t)}))&&r.render(),n.hideAutofill(),xu.call(e)}))),l||1!==t.buttons||t.shiftKey&&su.call(this,!0,d,y)}function ku(){var t=this.editor,e=this.data.getSelectedRect(),n=this.getTableOffset(),i="top";e.top>n.height/2&&(i="bottom"),t.setOffset(e,i)}function Cu(){var t=this.editor,e=this.data;ku.call(this),t.setCell(e.getSelectedCell(),e.getSelectedValidator()),vu.call(this)}function Eu(t){var e=this,n=this.data,i=this.table,r=this.selector;n.scrolly(t,(function(){r.resetBRLAreaOffset(),ku.call(e),i.render()}))}function Ou(t){var e=this,n=this.data,i=this.table,r=this.selector;n.scrollx(t,(function(){r.resetBRTAreaOffset(),ku.call(e),i.render()}))}function Pu(t){var e=this,n=this.data,i=this.table,r=this.selector;n.sync_scrolly(t,(function(){r.resetBRLAreaOffset(),ku.call(e),i.render()}))}function Au(t){var e=this,n=this.data,i=this.table,r=this.selector;n.sync_scrollx(t,(function(){r.resetBRTAreaOffset(),ku.call(e),i.render()}))}function Tu(t,e){var n=t.ri,i=this.table,r=this.selector,o=this.data;o.rows.setHeight(n,e),o.setRowHeight(n,e),i.render(),r.resetAreaOffset(),pu.call(this),ku.call(this)}function Mu(t,e){var n=t.ci,i=this.table,r=this.selector,o=this.data;o.cols.setWidth(n,e),o.setColWidth(n,e),i.render(),r.resetAreaOffset(),fu.call(this),ku.call(this)}function ju(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"finished",n=this.data,i=this.table;n.setSelectedCellText(t,e),"finished"===e&&i.render()}function Ru(t){var e=this.data;"insert-row"===t?e.insert("row"):"delete-row"===t?e.delete("row"):"insert-column"===t?e.insert("column"):"delete-column"===t?e.delete("column"):"delete-cell"===t?e.deleteCell():"delete-cell-format"===t?e.deleteCell("format"):"delete-cell-text"===t&&e.deleteCell("text"),vu.call(this),mu.call(this)}function Du(t,e){var n=this.data;if("undo"===t)this.undo();else if("redo"===t)this.redo();else if("print"===t);else if("paintformat"===t)!0===e?gu.call(this):vu.call(this);else if("clearformat"===t)Ru.call(this,"delete-cell-format");else if("link"===t);else if("chart"===t);else if("autofilter"===t)wu.call(this);else if("freeze"===t)if(e){var i=n.selector,r=i.ri,o=i.ci;this.freeze(r,o)}else this.freeze(0,0);else"overlayer"===t?this.enableOverlayer(e):(n.setSelectedCellAttr(t,e),"formula"===t&&Cu.call(this),mu.call(this))}function Fu(t,e,n,i){this.data.setAutoFilter(t,e,n,i),mu.call(this)}function Iu(){var t=this,e=this.overlayerEl,n=this.rowResizer,i=this.colResizer,r=this.verticalScrollbar,o=this.horizontalScrollbar,a=this.editor,s=this.contextMenu,l=this.data,c=this.toolbar,u=this.modalValidation,h=this.sortFilter;e.on("mousemove",(function(e){cu.call(t,e)})).on("mousedown",(function(e){2===e.buttons?l.xyInSelectedRect(e.offsetX,e.offsetY)?(s.setPosition(e.offsetX,e.offsetY),e.stopPropagation()):s.hide():2===e.detail?Cu.call(t):(a.clear(),Su.call(t,e))})).on("mousewheel.stop",(function(e){uu.call(t,e)})),function(t,e){var n=e.move,i=e.end,r=0,o=0;vt(t,"touchstart",(function(t){var e=t.touches[0],n=e.pageX,i=e.pageY;r=n,o=i})),vt(t,"touchmove",(function(t){if(n){var e=t.changedTouches[0],i=e.pageX,a=e.pageY,s=i-r,l=a-o;(Math.abs(s)>10||Math.abs(l)>10)&&(xt(s,l,t,n),r=i,o=a),t.preventDefault()}})),vt(t,"touchend",(function(t){if(i){var e=t.changedTouches[0],n=e.pageX,a=e.pageY;xt(n-r,a-o,t,i)}}))}(e.el,{move:function(e,n){hu.call(t,e,n)}}),c.change=function(e,n){return Du.call(t,e,n)},h.ok=function(e,n,i,r){return Fu.call(t,e,n,i,r)},n.finishedFn=function(e,n){Tu.call(t,e,n)},i.finishedFn=function(e,n){Mu.call(t,e,n)},r.moveFn=function(e,n){Eu.call(t,e,n)},o.moveFn=function(e,n){Ou.call(t,e,n)},a.change=function(e,n){ju.call(t,n,e)},u.change=function(t){if("save"===t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];l.addValidation.apply(l,n)}else l.removeValidation()},s.itemClick=function(e){"validation"===e?u.setValue(l.getSelectedValidation()):"copy"===e?gu.call(t):"cut"===e?bu.call(t):"paste"===e?_u.call(t,"all"):"paste-value"===e?_u.call(t,"text"):"paste-format"===e?_u.call(t,"format"):Ru.call(t,e)},vt(window,"resize",(function(){t.reload()})),vt(window,"click",(function(n){t.focusing=e.contains(n.target)})),vt(window,"keydown",(function(e){if(t.focusing){var n=e.keyCode||e.which,i=e.key,r=e.ctrlKey,o=e.shiftKey,u=e.altKey,h=e.metaKey;if(r||h){var p="all";switch(o&&(p="text"),u&&(p="format"),n){case 90:t.undo(),e.preventDefault();break;case 89:t.redo(),e.preventDefault();break;case 67:gu.call(t),e.preventDefault();break;case 88:bu.call(t),e.preventDefault();break;case 85:c.trigger("underline"),e.preventDefault();break;case 86:_u.call(t,p),e.preventDefault();break;case 37:lu.call(t,o,"row-first"),e.preventDefault();break;case 38:lu.call(t,o,"col-first"),e.preventDefault();break;case 39:lu.call(t,o,"row-last"),e.preventDefault();break;case 40:lu.call(t,o,"col-last"),e.preventDefault();break;case 32:su.call(t,!1,-1,l.selector.ci,!1),e.preventDefault();break;case 66:c.trigger("font-bold");break;case 73:c.trigger("font-italic")}}else{switch(n){case 32:o&&su.call(t,!1,l.selector.ri,-1,!1);break;case 27:s.hide(),vu.call(t);break;case 37:lu.call(t,o,"left"),e.preventDefault();break;case 38:lu.call(t,o,"up"),e.preventDefault();break;case 39:lu.call(t,o,"right"),e.preventDefault();break;case 40:lu.call(t,o,"down"),e.preventDefault();break;case 9:a.clear(),lu.call(t,!1,o?"left":"right"),e.preventDefault();break;case 13:u||(a.clear(),lu.call(t,!1,o?"up":"down"),e.preventDefault());break;case 8:Ru.call(t,"delete-cell-text"),e.preventDefault()}"Delete"===i?(Ru.call(t,"delete-cell-text"),e.preventDefault()):n>=65&&n<=90||n>=48&&n<=57||n>=96&&n<=105||"="===e.key?(ju.call(t,e.key,"input"),Cu.call(t)):113===n&&Cu.call(t)}}}))}function Lu(t){var e=new iu({container:"."+"".concat(St,"-svg")});e.importXML(t,(function(){var t=e.get("overlays"),n=e.get("canvas"),i=e.get("elementRegistry"),r=e.get("modeling"),o=i.get("CalmCustomerTask"),a=$('<div class="highlight-overlay">').css({width:o.width,height:o.height});t.add("CalmCustomerTask",{position:{top:0,left:0},html:a});var s=i.get("SelectAPizzaTask");r.setColor([s],{stroke:"green",fill:"rgba(0, 80, 0, 0.4)"}),n.addMarker("OrderReceivedEvent","highlight")}))}Aa()(iu,ms),iu.prototype.importXML=function(t,e,n){to(e)&&(n=e,e=null),n=n||function(){};var i=this;t=this._emit("import.parse.start",{xml:t})||t,this._moddle.fromXML(t,"bpmn:Definitions",(function(t,r,o){r=i._emit("import.parse.complete",{error:t,definitions:r,context:o})||r;var a=o.warnings;if(t)return t=function(t){var e=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(t.message);return e&&(t.message="unparsable content <"+e[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+e[2]),t}(t),i._emit("import.done",{error:t,warnings:a}),n(t,a);i.importDefinitions(r,e,(function(t,e){var r=[].concat(a,e||[]);i._emit("import.done",{error:t,warnings:r}),n(t,r)}))}))},iu.prototype.importDefinitions=function(t,e,n){return to(e)&&(n=e,e=null),n=n||function(){},this._setDefinitions(t),this.open(e,n)},iu.prototype.open=function(t,e){to(t)&&(e=t,t=null);var n=this._definitions,i=t;if(e=e||function(){},!n)return e(new Error("no XML imported"));if("string"==typeof t&&!(i=function(t,e){return e&&io(t.diagrams,(function(t){return t.id===e}))||null}(n,t)))return e(new Error("BPMNDiagram <"+t+"> not found"));try{this.clear()}catch(t){return e(t)}return function(t,e,n,i){var r,o,a;to(n)&&(i=n,n=null);var s,l=[];try{r=t.get("bpmnImporter"),o=t.get("eventBus"),a=t.get("translate"),o.fire("import.render.start",{definitions:e}),function(t,e){new Ll({root:function(t){return r.add(t)},element:function(t,e){return r.add(t,e)},error:function(t,e){l.push({message:t,context:e})}},a).handleDefinitions(t,e)}(e,n),o.fire("import.render.complete",{error:s,warnings:l})}catch(t){s=t}i(s,l)}(this,n,i,e)},iu.prototype.saveXML=function(t,e){e||(e=t,t={});var n=this,i=this._definitions;if(!i)return e(new Error("no definitions loaded"));i=this._emit("saveXML.start",{definitions:i})||i,this._moddle.toXML(i,t,(function(t,i){try{i=n._emit("saveXML.serialized",{error:t,xml:i})||i,n._emit("saveXML.done",{error:t,xml:i})}catch(t){console.error("error in saveXML life-cycle listener",t)}e(t,i)}))},iu.prototype.saveSVG=function(t,e){var n,i;e||(e=t,t={}),this._emit("saveSVG.start");try{var r=this.get("canvas"),o=r.getDefaultLayer(),a=No("defs",r._svg),s=fa(o),l=a?"<defs>"+fa(a)+"</defs>":"",c=o.getBBox();n='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+l+s+"</svg>"}catch(t){i=t}this._emit("saveSVG.done",{error:i,svg:n}),e(i,n)},iu.prototype._setDefinitions=function(t){this._definitions=t},iu.prototype.getModules=function(){return this._modules},iu.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach((function(t){var e=t.businessObject;e&&e.di&&delete e.di})),ms.prototype.clear.call(this))},iu.prototype.destroy=function(){ms.prototype.destroy.call(this),Bo(this._container)},iu.prototype.on=function(t,e,n,i){return this.get("eventBus").on(t,e,n,i)},iu.prototype.off=function(t,e){this.get("eventBus").off(t,e)},iu.prototype.attachTo=function(t){if(!t)throw new Error("parentNode required");this.detach(),t.get&&t.constructor.prototype.jquery&&(t=t.get(0)),"string"==typeof t&&(t=No(t)),t.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},iu.prototype.getDefinitions=function(){return this._definitions},iu.prototype.detach=function(){var t=this._container,e=t.parentNode;e&&(this._emit("detach",{}),e.removeChild(t))},iu.prototype._init=function(t,e,n){var i,r,o=n.modules||this.getModules(),a=n.additionalModules||[],s=[].concat([{bpmnjs:["value",this],moddle:["value",e]}],o,a),l=mo((i=["additionalModules"],r={},oo(Object(n),(function(t,e){-1===i.indexOf(e)&&(r[e]=t)})),r),{canvas:mo({},n.canvas,{container:t}),modules:s});ms.call(this,l),n&&n.container&&this.attachTo(n.container)},iu.prototype._emit=function(t,e){return this.get("eventBus").fire(t,e)},iu.prototype._createContainer=function(t){var e=Do('<div class="bjs-container"></div>');return mo(e.style,{width:nu(t.width),height:nu(t.height),position:t.position}),e},iu.prototype._createModdle=function(t){var e=mo({},this._moddleExtensions,t.moddleExtensions);return new Rl(e)},iu.prototype._modules=[Oc,mc,Uc,$c],iu.prototype._moddleExtensions={};var Nu=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.settings,o=r.view,s=r.showToolbar,l=r.showContextmenu;this.el=a("div","".concat(St,"-sheet")),this.toolbar=new vr(n,o.width,!s),e.children(this.toolbar.el,this.el),this.data=n,this.tableEl=a("div","".concat(St,"-table")),this.svgEl=a("div","".concat(St,"-svg")),this.svgEl.css("position","absolute"),this.svgEl.css("top","0px"),this.svgEl.css("left","0px"),this.svgEl.css("width","1000px"),this.svgEl.css("height","1000px"),fetch("pizza-collaboration.bpmn").then((function(t){if(t.ok)return t.text();throw new Error})).then((function(t){Lu.call(i,t)})).catch((function(t){return console.log(t)})),this.rowResizer=new Ct(!1,n.rows.height),this.colResizer=new Ct(!0,n.cols.minWidth),this.verticalScrollbar=new Ot(!0),this.horizontalScrollbar=new Ot(!1),this.editor=new _e(Ie,(function(){return i.getTableOffset()}),n.rows.height),this.modalValidation=new Br,this.contextMenu=new Ee((function(){return i.getTableOffset()}),!l),this.selector=new Kt(n),this.overlayerCEl=a("div","".concat(St,"-overlayer-content")).children(this.editor.el,this.selector.el),this.overlayerEl=a("div","".concat(St,"-overlayer")).child(this.overlayerCEl),this.sortFilter=new Hr,this.el.children(this.tableEl,this.svgEl,this.overlayerEl.el,this.rowResizer.el,this.colResizer.el,this.verticalScrollbar.el,this.horizontalScrollbar.el,this.contextMenu.el,this.modalValidation.el,this.sortFilter.el),this.table=new Gn(this.tableEl.el,n),Iu.call(this),mu.call(this),su.call(this,!1,0,0),this.sync_sheets=[]}var e,n,i;return e=t,(n=[{key:"exportData",value:function(){return this.data.getData()}},{key:"setLayer",value:function(){this.table.setlayer()}},{key:"loadData",value:function(t){return this.data.setData(t),this.setLayer(),mu.call(this),console.log("loadData end"),this}},{key:"freeze",value:function(t,e){return this.data.setFreeze(t,e),mu.call(this),this}},{key:"undo",value:function(){this.data.undo(),mu.call(this)}},{key:"redo",value:function(){this.data.redo(),mu.call(this)}},{key:"reload",value:function(){return mu.call(this),this}},{key:"sync",value:function(){yu.call(this)}},{key:"sync_movex",value:function(t){Au.call(this,t)}},{key:"sync_movey",value:function(t){Pu.call(this,t)}},{key:"getRect",value:function(){var t=this.data;return{width:t.viewWidth(),height:t.viewHeight()}}},{key:"getTableOffset",value:function(){var t=this.data,e=t.rows,n=t.cols,i=this.getRect(),r=i.width,o=i.height;return{width:r-n.indexWidth,height:o-e.height,left:n.indexWidth,top:e.height}}},{key:"enableOverlayer",value:function(t){t?this.overlayerEl.show():this.overlayerEl.hide()}}])&&ru(e.prototype,n),i&&ru(e,i),t}(),Bu=(n(64),n(23)),Vu=n.n(Bu);function Gu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"spreadsheet",(function(){return Uu}));var zu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=e,r=e;"string"==typeof e&&(i=document.querySelector(e),r=document.querySelector(e+"2")),this.data=new mt("sheet1",n),this.data2=new mt("sheet2",n);var o=a("div","".concat(St)).on("contextmenu",(function(t){return t.preventDefault()})),s=a("div","".concat(St)).on("contextmenu",(function(t){return t.preventDefault()}));i.appendChild(o.el),r.appendChild(s.el),this.sheet=new Nu(o,this.data),this.sheet2=new Nu(s,this.data2),this.data.verticalAddSplitSheet(this.sheet2),this.data2.verticalAddSplitSheet(this.sheet)}var e,n,i;return e=t,i=[{key:"locale",value:function(t,e){W(t,e)}}],(n=[{key:"getEl",value:function(){return this.rootEl2}},{key:"loadData",value:function(t){return this.sheet.loadData(t),this.sheet2.loadData(t),this}},{key:"getData",value:function(){return this.data.getData()}},{key:"validate",value:function(){return this.data.validations.errors.size<=0}},{key:"change",value:function(t){return console.log("Spreadsheet change"),this.data.change=t,this}}])&&Gu(e.prototype,n),i&&Gu(e,i),t}(),Uu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new zu(t,e)};window&&(window.x=window.x||{},window.x.spreadsheet=Uu,window.x.spreadsheet.locale=function(t,e){return W(t,e)});var Wu=new Vu.a,Hu={b:!0,c:"#ff8800",n:50,s:"string"},Ku=Wu.addFolder({title:"Number"});Ku.addInput(Hu,"n",{label:"text"}),Ku.addInput(Hu,"n",{label:"slider",max:100,min:0}),Ku.addInput(Hu,"n",{label:"list",options:{low:0,medium:50,high:100}});var qu=Wu.addFolder({title:"String"});qu.addInput(Hu,"s",{label:"text"}),qu.addInput(Hu,"s",{label:"list",options:{dark:"Dark",light:"Light"}}),Wu.addFolder({title:"Boolean"}).addInput(Hu,"b",{label:"checkbox"}),Wu.addFolder({title:"Color"}).addInput(Hu,"c",{label:"text"});e.default=zu}]);
//# sourceMappingURL=xspreadsheet.js.map